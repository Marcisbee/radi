{"version":3,"file":"radi.js","sources":["../src/consts/GLOBALS.js","../src/service.js","../src/utils/capitalise.js","../src/utils/ensureArray.js","../src/utils/flatten.js","../src/utils/formToJSON.js","../src/component/Component.js","../src/html/destroyTree.js","../src/html/fireEvent.js","../src/html/insertAfter.js","../src/html/nodeChanged.js","../src/html/props.js","../src/html/patch.js","../src/store/Store.js","../src/mount.js","../src/html/createElement.js","../src/html/customAttribute.js","../src/html/customTag.js","../src/html/html.js","../src/subscribe/Subscribe.js","../src/custom/attributes/animation.js","../src/custom/attributes/html.js","../src/custom/attributes/loadfocus.js","../src/custom/attributes/onsubmit.js","../src/custom/attributes/onvalidate.js","../src/custom/tags/await.js","../src/custom/tags/errors.js","../src/custom/tags/modal.js","../src/custom/tags/portal.js","../src/custom/validation/Validator.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  VERSION: '0.5.0',\n  CUSTOM_ATTRIBUTES: {},\n  CUSTOM_TAGS: {},\n  SERVICES: {},\n};\n\nexport default GLOBALS;\n","import GLOBALS from './consts/GLOBALS';\n\n/**\n * @param  {string}   name\n * @param  {Function} fn\n * @param  {*[]}   args\n * @return {Function}\n */\nexport function service(name, fn, ...args) {\n  if (typeof name !== 'string') {\n    throw new Error('[Radi.js] Service first argument has to be string');\n  }\n\n  if (typeof fn !== 'function') {\n    throw new Error('[Radi.js] Service second argument has to be function');\n  }\n\n  const mounted = fn(...args);\n\n  service.prototype[name] = mounted;\n\n  return GLOBALS.SERVICES[name] = mounted;\n}\n","\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function capitalise(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function ensureArray(list) {\n  if (arguments.length === 0) return [];\n  if (arguments.length === 1) {\n    if (list === undefined || list === null) return [];\n    if (Array.isArray(list)) return list;\n  }\n  return Array.prototype.slice.call(arguments);\n}\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function flatten(list) {\n  return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n","/**\n * Checks that an element has a non-empty `name` and `value` property.\n * @param  {Element} element  the element to check\n * @return {Bool}             true if the element is an input, false if not\n */\nconst isValidElement = element => element.name && (element.value || element.value === '');\n\n/**\n * Checks if an elementâ€™s value can be saved (e.g. not an unselected checkbox).\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the value should be added, false if not\n */\nconst isValidValue = element =>\n  (!['checkbox', 'radio'].includes(element.type) || element.checked);\n\n/**\n * Checks if an input is a checkbox, because checkboxes allow multiple values.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a checkbox, false if not\n */\nconst isCheckbox = element => element.type === 'checkbox';\n\n/**\n * Checks if an input is a `select` with the `multiple` attribute.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a multiselect, false if not\n */\nconst isMultiSelect = element => element.options && element.multiple;\n\n/**\n * Retrieves the selected options from a multi-select as an array.\n * @param  {HTMLOptionsCollection} options  the options for the select\n * @return {Array}                          an array of selected option values\n */\nconst getSelectValues = options =>\n  [].reduce.call(options, (values, option) =>\n    option.selected\n      ? values.concat(option.value)\n      : values, []);\n\n/**\n * Retrieves input data from a form and returns it as a JSON object.\n * @param  {HTMLFormControlsCollection} elements  the form elements\n * @return {Object}                               form data as an object literal\n */\nexport const formToJSON = (elements, transform = (e, v) => v) =>\n  [].reduce.call(elements, (data, element) => {\n  // Make sure the element has the required properties and should be added.\n    if (isValidElement(element) && isValidValue(element)) {\n    /*\n     * Some fields allow for more than one value, so we need to check if this\n     * is one of those fields and, if so, store the values as an array.\n     */\n      if (isCheckbox(element)) {\n        data[element.name] = (data[element.name] || [])\n          .concat(transform(element, element.value));\n      } else if (isMultiSelect(element)) {\n        data[element.name] = transform(element, getSelectValues(element));\n      } else {\n        data[element.name] = transform(element, element.value);\n      }\n    }\n\n    return data;\n  }, {});\n","import { capitalise } from '../utils';\n\nexport class Component {\n  /**\n   * @param {Function} fn\n   * @param {string} name\n   */\n  constructor(fn, name) {\n    this.self = fn;\n    this.name = name || fn.name;\n    this.__$events = {};\n  }\n\n  /**\n   * @param  {string}   event\n   * @param  {Function} fn\n   * @return {Function}\n   */\n  on(event, fn) {\n    const e = this.__$events;\n    const name = `on${capitalise(event)}`;\n    if (!e[name]) e[name] = [];\n    e[name].push(fn);\n    return fn;\n  }\n\n  /**\n   * @param  {string} event\n   * @param  {*[]} args\n   */\n  trigger(event, ...args) {\n    const name = `on${capitalise(event)}`;\n\n    (this.__$events[name] || [])\n      .map(e => e(...args));\n\n    if (typeof this[name] === 'function') {\n      this[name](...args);\n    }\n\n    if (typeof this.self[name] === 'function') {\n      this.self[name](...args);\n    }\n  }\n}\n","import { fireEvent } from './index';\n\n/**\n * @param  {HTMLElement} node\n */\nexport function destroyTree(node) {\n  fireEvent('destroy', node);\n\n  if (node.nodeType === 1) {\n    let curChild = node.firstChild;\n    while (curChild) {\n      destroyTree(curChild);\n      curChild = curChild.nextSibling;\n    }\n  }\n}\n","\n/**\n * @param  {string} type\n * @param  {HTMLElement} $node\n * @return {HTMLElement}\n */\nexport function fireEvent(type, $node) {\n  const onEvent = document.createEvent('Event');\n  onEvent.initEvent(type, true, true);\n\n  if (typeof $node.dispatchEvent === 'function') {\n    $node._eventFired = true;\n    $node.dispatchEvent(onEvent);\n  }\n\n  return $node;\n}\n","\n/**\n * @param  {HTMLElement} newNode\n * @param  {HTMLElement} $reference\n * @param  {HTMLElement} $parent\n * @return {HTMLElement}\n */\nexport function insertAfter(newNode, $reference, $parent) {\n  if (!$parent) $parent = $reference.parentNode;\n\n  if (newNode instanceof Node) {\n    if ($reference === null || $reference === undefined) {\n      return $parent.insertBefore(newNode, $reference);\n    }\n\n    if ($reference instanceof Node) {\n      return $parent.insertBefore(newNode, $reference.nextSibling);\n    }\n  }\n\n  return newNode;\n}\n","\n/**\n * @param  {Node} node1\n * @param  {Node} node2\n * @return {boolean}\n */\nexport function nodeChanged(node1, node2) {\n  if (node1 === undefined || node2 === undefined) return false;\n  if (typeof node1 !== typeof node2) return true;\n  if ((typeof node1 === 'string' || typeof node1 === 'number')\n    && node1 !== node2) return true;\n  if (node1.type !== node2.type) return true;\n  if (node1.props) return true;\n\n  return false;\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport { Listener } from '../store';\n\nfunction autoUpdate(value, fn) {\n  if (value instanceof Listener) {\n    return fn(value.getValue(e => fn(value.map(e))));\n  }\n  return fn(value);\n}\n\nfunction setBooleanProp($target, name, value) {\n  if (value) {\n    $target.setAttribute(name, value);\n    $target[name] = true;\n  } else {\n    $target[name] = false;\n  }\n}\n\nfunction removeBooleanProp($target, name) {\n  $target.removeAttribute(name);\n  $target[name] = false;\n}\n\nfunction isEventProp(name) {\n  return /^on/.test(name);\n}\n\nfunction extractEventName(name) {\n  return name.slice(2).toLowerCase();\n}\n\nfunction isCustomProp(name) {\n  return isEventProp(name);\n}\n\nexport function setProp($target, name, value) {\n  if (typeof GLOBALS.CUSTOM_ATTRIBUTES[name] !== 'undefined') {\n    const { allowedTags, addToElement, caller } = GLOBALS.CUSTOM_ATTRIBUTES[name];\n\n    if (!allowedTags || (\n      allowedTags\n        && allowedTags.length > 0\n        && allowedTags.indexOf($target.localName) >= 0\n    )) {\n      if (typeof caller === 'function') {\n        value = caller($target, value);\n      }\n      if (!addToElement) return;\n    }\n  }\n\n  if (name === 'style') {\n    setStyles($target, value);\n  } else if (isCustomProp(name)) {\n    addEventListener($target, name, value);\n  } else if (name === 'className') {\n    $target.setAttribute('class', value);\n  } else if (typeof value === 'boolean') {\n    setBooleanProp($target, name, value);\n  } else {\n    if (name === 'value' && document.activeElement !== $target) {\n      $target[name] = value;\n    }\n    $target.setAttribute(name, value);\n  }\n}\n\nexport function removeProp($target, name, value) {\n  if (isCustomProp(name)) {\n\n  } else if (name === 'className') {\n    $target.removeAttribute('class');\n  } else if (typeof value === 'boolean') {\n    removeBooleanProp($target, name);\n  } else {\n    $target.removeAttribute(name);\n  }\n}\n\nexport function setStyles($target, styles) {\n  Object.keys(styles).forEach(name => {\n    autoUpdate(styles[name], value => {\n      $target.style[name] = value;\n    });\n  });\n}\n\nexport function setProps($target, props) {\n  Object.keys(props).forEach(name => {\n    autoUpdate(props[name], value => {\n      if (name === 'model') {\n        name = 'value';\n      } else\n      if (name === 'class' || name === 'className') {\n        if (Array.isArray(value)) {\n          value = value.filter(v => v && typeof v !== 'function').join(' ');\n        }\n      }\n      setProp($target, name, value);\n    });\n  });\n}\n\nexport function updateProp($target, name, newVal, oldVal) {\n  if (!newVal) {\n    removeProp($target, name, oldVal);\n  } else if (!oldVal || newVal !== oldVal) {\n    setProp($target, name, newVal);\n  }\n}\n\nexport function updateProps($target, newProps, oldProps = {}) {\n  const props = Object.assign({}, newProps, oldProps);\n  Object.keys(props).forEach(name => {\n    autoUpdate(newProps[name], value => {\n      if (name === 'model') {\n        name = 'value';\n      }\n      updateProp($target, name, value, oldProps[name]);\n    });\n  });\n}\n\nexport function addEventListener($target, name, value) {\n  const exceptions = ['mount', 'destroy'];\n  if (isEventProp(name)) {\n    $target.addEventListener(\n      extractEventName(name),\n      (e) => {\n        if (exceptions.indexOf(name) >= 0) {\n          if ($target === e.target) value(e);\n        } else\n        if (typeof value === 'function') {\n          value(e);\n        }\n      },\n      false\n    );\n  }\n}\n","import {\n  ensureArray,\n  flatten,\n} from '../utils';\nimport { createElement } from './createElement';\nimport { destroyTree } from './destroyTree';\nimport { fireEvent } from './fireEvent';\nimport { insertAfter } from './insertAfter';\nimport { nodeChanged } from './nodeChanged';\nimport { updateProps } from './props';\n\nfunction beforeDestroy(node, next) {\n  if (typeof node.beforedestroy === 'function') {\n    return node.beforedestroy(next);\n  }\n\n  return next();\n}\n\n/**\n * @param  {HTMLElement} $parent\n * @param  {Object|Object[]} newNode\n * @param  {Object|Object[]} oldNode\n * @param  {number} [index=0]\n * @param  {HTMLElement} $pointer\n * @return {Object[]}\n */\nexport function patch($parent, newNode, oldNode, index = 0, $pointer) {\n  let $output = $parent && $parent.childNodes[index];\n  if ($pointer) {\n    index = Array.prototype.indexOf.call($parent.childNodes, $pointer) + 1;\n  }\n\n  const normalNewNode = flatten(ensureArray(newNode));\n  const normalOldNode = flatten(ensureArray(oldNode));\n  const newLength = normalNewNode.length;\n  const oldLength = normalOldNode.length;\n\n  let modifier = 0;\n  for (let i = 0; i < newLength || i < oldLength; i++) {\n    if (normalNewNode[i] instanceof Date) normalNewNode[i] = normalNewNode[i].toString();\n    if (normalOldNode[i] === false || normalOldNode[i] === undefined || normalOldNode[i] === null) {\n      $output = createElement(normalNewNode[i], $parent);\n      if ($pointer) {\n        insertAfter($output, $parent.childNodes[((index + i) - 1)], $parent);\n      } else {\n        $parent.appendChild($output);\n      }\n      fireEvent('mount', $output);\n    } else\n    if (normalNewNode[i] === false || normalNewNode[i] === undefined || normalNewNode[i] === null) {\n      const $target = $parent.childNodes[index + i + modifier];\n      if ($target) {\n        beforeDestroy($target, () => {\n          // This is for async node removals\n          const $targetScoped = $parent.childNodes[index + i + modifier];\n          $parent.removeChild($targetScoped);\n          destroyTree($targetScoped);\n          modifier -= 1;\n        });\n      }\n    } else\n    if (nodeChanged(normalNewNode[i], normalOldNode[i])) {\n      $parent.replaceChild(\n        $output = createElement(normalNewNode[i], $parent),\n        $parent.childNodes[index + i]\n      );\n      fireEvent('mount', $output);\n    } else if (typeof normalNewNode[i].type === 'string') {\n      const childNew = normalNewNode[i];\n      const childOld = normalOldNode[i];\n      updateProps(\n        $parent.childNodes[index + i],\n        childNew.props,\n        childOld.props\n      );\n      const newLength2 = childNew.children.length;\n      const oldLength2 = childOld.children.length;\n      for (let n = 0; n < newLength2 || n < oldLength2; n++) {\n        patch(\n          $parent.childNodes[index + i],\n          childNew.children[n],\n          childOld.children[n],\n          n\n        );\n      }\n    }\n  }\n\n  return normalNewNode;\n}\n","import { patch } from '../html/patch';\n\nlet currentListener = null;\n\nfunction anchored(anchor, to) {\n  return (newState, oldState) => {\n    if (anchor[0] === newState) return false;\n    if (newState !== oldState) {\n      anchor[0] = newState;\n      to.dispatch(() => newState);\n    }\n    return true;\n  };\n}\n\nfunction extractState(state, path = []) {\n  if (!state) return state;\n\n  if (this && state && typeof state.subscribe === 'function') {\n    const anchor = [];\n    if (path.length > 0) {\n      state.subscribe((newState, oldState) => {\n        if (anchor[0] === newState) return false;\n        if (newState !== oldState) {\n          this.dispatch(() => this.setPartial(path, newState));\n          anchor[0] = newState;\n        }\n        return true;\n      });\n    } else {\n      this.subscribe(anchored(anchor, state));\n      state.subscribe(anchored(anchor, this));\n    }\n    return state.get();\n  }\n\n  if (typeof state === 'object') {\n    const tempState = Array.isArray(state) ? new Array(state.length) : {};\n    for (const key in state) {\n      if (state.hasOwnProperty(key)) {\n        tempState[key] = extractState.call(this, state[key], path.concat(key));\n      }\n    }\n    return tempState;\n  }\n\n  return state;\n}\n\nfunction clone(target, source) {\n  const out = Array.isArray(target) ? [] : {};\n\n  for (const i in target) out[i] = target[i];\n  for (const i in source) out[i] = source[i];\n\n  return out;\n}\n\nfunction proxied(state, fn, path = []) {\n  return new Proxy(state, {\n    get(_, prop) {\n      const newPath = path.concat(prop);\n\n      if (typeof state[prop] === 'object') {\n        return proxied(state[prop], fn, newPath);\n      }\n\n      if (typeof fn === 'function') fn(newPath);\n      return state[prop];\n    },\n  });\n}\n\nlet renderQueue = [];\n\nfunction addToRenderQueue(data) {\n  const fn = data.update || data;\n  if (renderQueue.indexOf(fn) < 0) {\n    renderQueue.push(fn);\n  }\n  return fn;\n}\n\nfunction clearRenderQueue() {\n  renderQueue = [];\n}\n\nfunction Dependencies() {\n  this.dependencies = {};\n  this.add = (path, component) => {\n    const key = path[0];\n    if (typeof this.dependencies[key] === 'undefined') this.dependencies[key] = [];\n\n    if (this.dependencies[key].indexOf(component) < 0) {\n      // console.log('addDependency', key, component)\n      this.dependencies[key].push(component);\n    }\n  };\n  this.remove = (path, component) => {\n    const key = path[0];\n    const index = (this.dependencies[key] || []).indexOf(component);\n    if (index >= 0) {\n      // console.log('removeDependency', key, component)\n      this.dependencies[key].splice(index, 1);\n    }\n  };\n  this.fn = fn => (path) => {\n    const current = currentListener;\n    if (current) {\n      this.add(path, current);\n\n      current.__onDestroy = () => {\n        this.remove(path, current);\n      };\n    }\n    return fn(path);\n  };\n  this.trigger = (key, newStore, oldState) => {\n    if (this.dependencies[key]) {\n      this.dependencies[key].forEach(fn => (\n        addToRenderQueue(fn)(newStore, oldState)\n      ));\n    }\n  };\n}\n\nconst noop = e => e;\n\nexport class Listener {\n  constructor(map, store, dep) {\n    this.map = map;\n    this.update = this.update.bind(this);\n    this.render = this.render.bind(this);\n    this.store = store;\n    this.dep = dep;\n  }\n\n  getValue(updater) {\n    const tempListener = currentListener;\n    currentListener = updater;\n\n    const state = proxied(this.store.get(), this.dep.fn(() => {}));\n\n    this.newTree = this.map(state);\n\n    currentListener = tempListener;\n    return this.newTree;\n  }\n\n  update() {\n    const value = this.getValue(this.update);\n\n    patch(this.$parent, this.newTree, this.oldTree, 0, this.$pointer);\n    this.oldTree = this.newTree;\n    return value;\n  }\n\n  render(state) {\n    const comp = this;\n    return function () {\n      this.onMount = (element, parent) => {\n        comp.mounted = true;\n        comp.$pointer = element;\n        comp.$parent = parent || element.parentNode;\n        comp.update(state);\n      };\n      return null;\n    };\n  }\n}\n\nexport function Store(state = {}/* , fn = () => {} */) {\n  let currentState = { ...state };\n\n  const StoreHold = function (listenerToRender) {\n    const listener = new Listener(listenerToRender, StoreHold, dependencies);\n\n    return listener;\n  };\n\n  const dependencies = new Dependencies();\n  let remap = noop;\n  let mappedState;\n\n  StoreHold.getInitial = () => initialSate;\n  StoreHold.get = () => remap(currentState);\n  StoreHold.setPartial = (path, value) => {\n    const target = Array.isArray(currentState) ? [] : {};\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? this.setPartial(path.slice(1), value, currentState[path[0]])\n          : value;\n      return clone(currentState, target);\n    }\n    return value;\n  };\n  StoreHold.update = (chunkState/* , noStrictSubs */) => {\n    const keys = Object.keys(chunkState);\n    // const oldState = currentState;\n    const newState = {\n      ...currentState,\n      ...chunkState,\n    };\n    currentState = newState;\n    const newlyMappedState = StoreHold.get();\n    if (remap !== noop) {\n      for (const key in newlyMappedState) {\n        if (\n          newlyMappedState.hasOwnProperty(key)\n          && (\n            !mappedState || (\n              mappedState\n              && mappedState[key] !== newlyMappedState[key]\n              && keys.indexOf(key) < 0\n            )\n          )\n        ) {\n          keys.push(key);\n        }\n      }\n    }\n    dependencies.trigger('*', newlyMappedState, mappedState);\n    keys.forEach(key => dependencies.trigger(key, newlyMappedState, mappedState));\n    mappedState = newlyMappedState;\n\n    clearRenderQueue();\n\n    return currentState;\n  };\n  StoreHold.dispatch = (action, ...args) => {\n    const payload = action(currentState, ...args);\n    // console.log('dispatch', {\n    //   action: action.name,\n    //   args: args,\n    //   payload,\n    // });\n    // console.log('dispatch', action.name, payload);\n    return StoreHold.update(payload);\n  };\n  StoreHold.willDispatch = (action, ...args) => (...args2) =>\n    StoreHold.dispatch(action, ...args, ...args2);\n  StoreHold.subscribe = (callback/* , strict */) => {\n    dependencies.add('*', callback);\n    callback(StoreHold.get(), null);\n    return StoreHold;\n  };\n  StoreHold.unsubscribe = (subscriber) => {\n    dependencies.remove('*', subscriber);\n  };\n  StoreHold.map = (fnMap) => {\n    const tempFn = remap;\n    remap = (...args) => fnMap(tempFn(...args));\n    return StoreHold;\n  };\n\n  const initialSate = extractState.call(StoreHold, state);\n\n  return StoreHold;\n}\n","import { patch } from './html/patch';\n\n/**\n * @typedef {Object} Mount\n * @property {Object} component\n * @property {Object} node\n * @property {function} destroy\n */\n\n/**\n * @param  {Object} component\n * @param  {HTMLElement} container\n * @return {Mount}\n */\nexport function mount(component, container) {\n  return {\n    component: component,\n    node: patch(container, component),\n    destroy: () => {\n      return patch(container, null, component);\n    },\n  };\n};\n","import {\n  fireEvent,\n  insertAfter,\n  setProps,\n} from './index';\n\nimport { Component } from '../component';\nimport { Listener } from '../store';\nimport { mount } from '../mount';\n\n/**\n * @param  {Object} node\n * @param  {HTMLElement} $parent\n * @return {HTMLElement|null}\n */\nexport function createElement(node, $parent) {\n  if (typeof node === 'string' || typeof node === 'number') {\n    return document.createTextNode(node);\n  }\n\n  if (node === undefined || node === false || node === null) {\n    return document.createComment('');\n  }\n\n  if (node instanceof Listener) {\n    node = node.render();\n  }\n\n  if (Array.isArray(node)) {\n    const $pointer = document.createTextNode('');\n\n    $pointer.addEventListener('mount', () => {\n      for (let i = 0; i < node.length; i++) {\n        mount(node[i], $parent);\n      }\n    });\n\n    return $pointer;\n  }\n\n  if (typeof node === 'function' || typeof node.type === 'function') {\n    const fn = node.type || node;\n\n    const lifecycles = new Component(fn);\n\n    const $element = createElement(\n      fn.call(lifecycles, {\n        ...(node.props || {}),\n        children: node.children || [],\n      }),\n      $parent\n    );\n\n    let $styleRef;\n\n    if ($element && typeof $element.addEventListener === 'function') {\n      $element.addEventListener('mount', () => {\n        if (typeof lifecycles.style === 'string') {\n          $styleRef = document.createElement('style');\n          $styleRef.innerHTML = lifecycles.style;\n          document.head.appendChild($styleRef);\n        }\n        lifecycles.trigger('mount', $element, $parent);\n      }, {\n        passive: true,\n        once: true,\n      }, false);\n\n      $element.addEventListener('destroy', () => {\n        lifecycles.trigger('destroy', $element, $parent);\n        if ($styleRef instanceof Node) {\n          document.head.removeChild($styleRef);\n        }\n      }, {\n        passive: true,\n        once: true,\n      }, false);\n    }\n\n    return $element;\n  }\n\n  if (typeof node === 'object') {\n    if (node.type) {\n      let $el;\n      if (node.type === 'svg' || $parent instanceof SVGElement) {\n        $el = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          node.type\n        );\n      } else {\n        $el = document.createElement(node.type);\n      }\n      const $lastEl = null;\n      setProps($el, node.props);\n      const applyChildren = $child => n => {\n        const $n = createElement(n, $child);\n        if ($n) {\n          if ($lastEl) {\n            insertAfter($n, $lastEl, $child);\n          } else {\n            $child.appendChild.call($el, $n);\n            fireEvent('mount', $n);\n          }\n        }\n      };\n      node.children.map(applyChildren($el));\n      return $el;\n    }\n    return createElement(JSON.stringify(node), $parent);\n  }\n\n  // console.error('Unhandled node', node);\n  return document.createTextNode(`${node}`);\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} attributeName\n * @param {function} caller\n * @param {Object} object\n * @returns {Object}\n */\nexport function customAttribute(attributeName, caller, {\n  allowedTags,\n  addToElement,\n} = {}) {\n  return GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n    name: attributeName,\n    caller,\n    allowedTags: allowedTags || null,\n    addToElement,\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} tagName\n * @param {function} onmount\n * @returns {object}\n */\nexport function customTag(tagName, render) {\n  return GLOBALS.CUSTOM_TAGS[tagName] = {\n    name: tagName,\n    render: render || (() => {}),\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport { flatten } from '../utils';\n\n/**\n * @typedef {Object} Node\n * @property {*} type\n * @property {Object} props\n * @property {*[]} children\n */\n\n/**\n * @param  {*} preType\n * @param  {Object} preProps\n * @param  {*[]} preChildren\n * @return {Node}\n */\nexport function html(preType, preProps, ...preChildren) {\n  let type = (typeof preType === 'number') ? `${preType}` : preType;\n  let props = preProps || {};\n  const children = flatten(preChildren);\n\n  if (type instanceof Promise || (type && type.constructor.name === 'LazyPromise')) {\n    type = 'await';\n    props = {\n      src: preType,\n    };\n  }\n\n  if (typeof GLOBALS.CUSTOM_TAGS[type] !== 'undefined') {\n    type = GLOBALS.CUSTOM_TAGS[type].render;\n  }\n\n  return {\n    type,\n    props,\n    children,\n  };\n}\n","import { Store } from '../store';\n\n/**\n * @param       {EventTarget} [target=document] [description]\n * @constructor\n */\nexport function Subscribe(target = document) {\n  return {\n    on: (eventHolder, transformer = e => e) => {\n      const events = eventHolder.trim().split(' ');\n      let eventSubscription = null;\n      let staticDefaults = null;\n      let staticStore = null;\n      let state = false;\n\n      if (typeof transformer !== 'function') {\n        throw new Error(`[Radi.js] Subscription \\`${eventHolder}\\` must be transformed by function`);\n      }\n\n      function updater(defaults, newStore) {\n        const store = newStore || new Store(defaults || {});\n\n        state = true;\n        staticDefaults = defaults;\n        staticStore = store;\n        events.forEach(event => target.addEventListener(event,\n          eventSubscription = (...args) =>\n            store.dispatch((oldStore) => ({ ...oldStore, ...transformer(...args, event) }))\n        ));\n\n        return store;\n      }\n\n      updater.stop = () => {\n        if (state) {\n          events.forEach(event => target.removeEventListener(event, eventSubscription));\n        }\n        return state = !state;\n      };\n      updater.start = () => !state && updater(staticDefaults, staticStore);\n\n      return updater;\n    },\n  };\n}\n","import { customAttribute } from '../../html/customAttribute';\n\nexport const animate = (target, type, opts, done) => {\n  const direct = opts[type];\n  if (typeof direct !== 'function') {\n    console.warn(`[Radi.js] Animation \\`${type}\\` for node \\`${target.nodeName.toLowerCase}\\` should be function`);\n    return;\n  }\n\n  return direct(target, done);\n};\n\ncustomAttribute('animation', (el, value) => {\n  animate(el, 'in', value, () => {});\n  el.beforedestroy = done => animate(el, 'out', value, done);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('html', (el, value) => {\n  el.addEventListener('mount', () => {\n    if (el.escape) {\n      el.textContent = value;\n    } else {\n      el.innerHTML = value;\n    }\n  });\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('loadfocus', (el) => {\n  el.addEventListener('mount', () => el.focus());\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('onsubmit', (el, fn) => {\n  return function(e) {\n    if (el.prevent) e.preventDefault();\n    fn(e, formToJSON(el.elements || {}));\n  }\n}, {\n  allowedTags: [\n    'form',\n  ],\n  addToElement: true,\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\nimport { Store } from '../../store';\n\nexport const errorsStore = new Store({}, 'errorStore');\nconst setErrors = (state, name, errors) => ({\n  ...state,\n  [name]: errors,\n});\n\nfunction fullValidate(elements, rules, update) {\n  let values = formToJSON(elements, ({touched}, value) => ({touched, value}));\n  let plainValues = Object.keys(values)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: values[key].value,\n    }), {});\n  let errors = [];\n\n  for (let name in values) {\n    const value = values[name];\n\n    if (typeof rules[name] === 'function') {\n      const result = rules[name](value.value, plainValues);\n      const valid = (\n          result\n          && typeof result.check === 'function'\n          && result.check()\n        )\n        || result\n        || name + ' field is invalid';\n\n      if (valid !== true) errors.push({\n        field: name,\n        touched: Boolean(value.touched),\n        error: valid,\n      });\n    }\n  }\n\n  update(errors);\n}\n\nlet formCount = 0;\n\ncustomAttribute('onvalidate', (el, rules) => {\n  const formName = el.name || 'defaultForm' + (formCount++);\n  let submit;\n\n  function update(errors) {\n    errorsStore.dispatch(setErrors, formName, errors);\n  }\n\n  errorsStore.subscribe(state => {\n    if (submit) {\n      submit.disabled = state[formName].length > 0;\n    }\n  });\n\n  el.addEventListener('mount', e => {\n    const validate = rules(e);\n    const elements = e.target.elements;\n    if (validate && typeof validate === 'object'\n      && elements) {\n\n      for (let element of elements) {\n        const name = element.name;\n\n        if (!element.__radiValidate\n          && typeof name === 'string'\n          && typeof validate[name] === 'function') {\n\n          element.addEventListener('input', () => {\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          })\n          element.__radiValidate = true;\n\n          element.touched = false;\n          const setTouched = ({target}) => {\n            target.touched = true;\n            target.removeEventListener('change', setTouched);\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          };\n          element.addEventListener('change', setTouched);\n        }\n\n        if (element.type === 'submit' && element.disabled === true) {\n          submit = element;\n        }\n      }\n\n      fullValidate(\n        elements,\n        validate,\n        update\n      );\n    }\n  }, false);\n}, {\n  allowedTags: [\n    'form',\n  ],\n});\n","import { Store } from '../../store';\nimport { customTag } from '../../html';\n\nfunction ensureFn(maybeFn) {\n  if (typeof maybeFn === 'function') return maybeFn;\n  return (e) => maybeFn || e;\n}\n\ncustomTag('await',\n  function Await(promise) {\n    const { src } = promise;\n    const awaitStore = new Store({\n      status: 'placeholder',\n    });\n\n    const update = (e, status) => ({status});\n\n    if (src &&\n      (src instanceof Promise || src.constructor.name === 'LazyPromise')\n    ) {\n      let output = '';\n      src\n        .then(data => {\n          output = data;\n          awaitStore.dispatch(update, 'transform');\n        })\n        .catch(error => {\n          output = error;\n          awaitStore.dispatch(update, 'error');\n        });\n\n      return awaitStore(({status}) => ensureFn(promise[status])(output));\n    }\n\n    return null;\n  }\n);\n","import { errorsStore } from '../attributes';\nimport { customTag } from '../../html';\n\ncustomTag('errors',\n  function Errors({name, onrender}) {\n    if (typeof name === 'undefined') {\n      console.warn('[Radi.js] Warn: Every <errors> tag needs to have `name` attribute!');\n    }\n    if (typeof onrender !== 'function') {\n      console.warn('[Radi.js] Warn: Every <errors> tag needs to have `onrender` attribute!');\n    }\n\n    return errorsStore(state => (\n      state[name] && onrender(state[name])\n    ))\n  }\n);\n","import { service } from '../../service';\nimport { html, customTag } from '../../html';\nimport { Store } from '../../store';\n\nconst h = html;\n\nexport const ModalStore = new Store({});\n\nconst registerModal = (store, name) => ({\n  [name]: false,\n});\n\nconst switchModal = (store, name, type) => ({\n  [name]: type,\n});\n\nexport const ModalService = service('modal', (...args) => {\n  return {\n    open: (name) => ModalStore.dispatch(switchModal, name, true),\n    close: (name) => ModalStore.dispatch(switchModal, name, false),\n    onOpen: (name, fn) =>\n      ModalStore.subscribe((n, p) => n[name] === true && n[name] !== p[name] && fn()),\n    onClose: (name, fn) =>\n      ModalStore.subscribe((n, p) => n[name] === false && n[name] !== p[name] && fn()),\n  };\n});\n\ncustomTag('modal',\n  function Modal({name = 'default', children}) {\n    if (typeof name === 'undefined') {\n      console.warn('[Radi.js] Warn: Every <modal> tag needs to have `name` attribute!');\n    }\n\n    this.onMount = el => ModalStore.dispatch(registerModal, name);\n\n    return h('portal', {},\n      ModalStore(data => (\n        data[name] && h('div',\n          { class: 'radi-modal', name },\n          h('div', {\n            class: 'radi-modal-backdrop',\n            onclick: () => service.modal.close(name),\n          }),\n          h('div',\n            { class: 'radi-modal-content' },\n            ...(children.slice())\n          )\n        )\n      ))\n    );\n  }\n);\n","import { mount } from '../../mount';\nimport {\n  customTag,\n  patch,\n} from '../../html';\n\ncustomTag('portal',\n  function Portal(data) {\n    let $ref;\n    let $parent;\n    const toRender = data.children || [];\n\n    this.onMount = ($element) => {\n      mount(function () {\n        this.onMount = ($el, $p) => {\n          $ref = $el;\n          $parent = $p;\n        };\n\n        return () => toRender;\n      }, data.on || document.body);\n    };\n\n    this.onDestroy = (el, parent) => {\n      patch($parent, null, toRender, 0, $ref || el);\n    };\n\n    return null;\n  }\n);\n","const validValue = (value) => (\n  typeof value === 'string'\n    || typeof value === 'number'\n    || value\n);\n\nexport class Validator {\n  constructor(value) {\n    this.value = value;\n    this.rules = [];\n  }\n\n  register({type, validate, error}) {\n    let nn = this.rules.push({\n      type: type,\n      validate: value => (validValue(value) && validate(value)),\n      error: error || 'Invalid field',\n    });\n\n    this.error = text => {\n      this.rules[nn - 1].error = text || error;\n      return this;\n    }\n\n    return this;\n  }\n\n  check(newValue) {\n    if (typeof newValue !== 'undefined') {\n      this.value = newValue;\n    }\n\n    return this.rules.reduce((acc, value) => (\n      typeof acc === 'string' ? acc : (!value.validate(this.value) && value.error) || acc\n    ), true)\n  }\n\n  required() {\n    return this.register({\n      type: 'required',\n      validate: value => value !== '',\n      error: 'Field is required',\n    })\n  }\n\n  test(regexp) {\n    return this.register({\n      type: 'test',\n      validate: value => value === '' || regexp.test(value),\n      error: 'Field must be valid',\n    })\n  }\n\n  equal(equal) {\n    return this.register({\n      type: 'equal',\n      validate: value => value === '' || value === equal,\n      error: 'Field must be equal to ' + equal,\n    })\n  }\n\n  notEqual(equal) {\n    return this.register({\n      type: 'notEqual',\n      validate: value => value === '' || value !== equal,\n      error: 'Field must not be equal to ' + equal,\n    })\n  }\n\n  min(num) {\n    return this.register({\n      type: 'min',\n      validate: value => value.length >= num,\n      error: 'Min char length is ' + num,\n    })\n  }\n\n  max(num) {\n    return this.register({\n      type: 'max',\n      validate: value => value.length < num,\n      error: 'Max char length is ' + num,\n    })\n  }\n\n  email() {\n    return this.register({\n      type: 'email',\n      validate: value => value === '' || /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n      error: 'Email is not valid',\n    })\n  }\n}\n","import GLOBALS from './consts/GLOBALS';\nimport { service } from './service';\nimport {\n  customAttribute,\n  customTag,\n  html,\n  patch,\n} from './html';\nimport { Store } from './store';\nimport { Subscribe } from './subscribe';\nimport { mount } from './mount';\nimport { Validator } from './custom';\n\nconst Radi = {\n  v: GLOBALS.VERSION,\n  version: GLOBALS.VERSION,\n  h: html,\n  html,\n  Store,\n  customTag,\n  customAttribute,\n  patch,\n  mount,\n  service,\n  Subscribe,\n  Validator,\n};\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (window) window.Radi = Radi;\nexport default Radi;\n"],"names":["const","destroyTree","let","createElement","i","this","equal"],"mappings":"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"}