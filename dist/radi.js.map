{"version":3,"file":"radi.js","sources":["../src/consts/GLOBALS.js","../src/service.js","../src/html/customAttribute.js","../src/html/customTag.js","../src/html/fireEvent.js","../src/html/destroyTree.js","../src/utils/capitalise.js","../src/utils/flatten.js","../src/utils/formToJSON.js","../src/html/html.js","../src/component/Component.js","../src/component/componentStore.js","../src/html/setAttribute.js","../src/html/render.js","../src/html/renderComponent.js","../src/html/patch.js","../src/store/Store.js","../src/subscribe/Subscribe.js","../src/custom/attributes/animation.js","../src/custom/attributes/html.js","../src/custom/attributes/loadfocus.js","../src/custom/attributes/onsubmit.js","../src/custom/attributes/onvalidate.js","../src/custom/tags/index.js","../src/custom/validation/Validator.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  VERSION: '0.5.0',\n  CUSTOM_ATTRIBUTES: {},\n  CUSTOM_TAGS: {},\n  SERVICES: {},\n};\n\nexport default GLOBALS;\n","import GLOBALS from './consts/GLOBALS';\n\n/**\n * @param  {string}   name\n * @param  {Function} fn\n * @param  {*[]}   args\n * @return {Function}\n */\nexport function service(name, fn, ...args) {\n  if (typeof name !== 'string') {\n    throw new Error('[Radi.js] Service first argument has to be string');\n  }\n\n  if (typeof fn !== 'function') {\n    throw new Error('[Radi.js] Service second argument has to be function');\n  }\n\n  const mounted = fn(...args);\n\n  service.prototype[name] = mounted;\n\n  return GLOBALS.SERVICES[name] = mounted;\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} attributeName\n * @param {function} caller\n * @param {Object} object\n * @returns {Object}\n */\nexport function customAttribute(attributeName, caller, {\n  allowedTags,\n  addToElement,\n} = {}) {\n  return GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n    name: attributeName,\n    caller,\n    allowedTags: allowedTags || null,\n    addToElement,\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} tagName\n * @param {function} onmount\n * @returns {object}\n */\nexport function customTag(tagName, render) {\n  return GLOBALS.CUSTOM_TAGS[tagName] = {\n    name: tagName,\n    render: render || (() => {}),\n  };\n}\n","\n/**\n * @param  {string} type\n * @param  {HTMLElement} $node\n * @return {HTMLElement}\n */\nexport function fireEvent(type, $node) {\n  const onEvent = document.createEvent('Event');\n  onEvent.initEvent(type, true, true);\n\n  if (typeof $node.dispatchEvent === 'function') {\n    $node._eventFired = true;\n    $node.dispatchEvent(onEvent);\n  }\n\n  return $node;\n}\n","import { fireEvent } from './fireEvent';\n\n/**\n * @param  {HTMLElement} node\n */\nexport function destroyTree(node) {\n  fireEvent('destroy', node);\n  const instance = node.__radiInstance;\n  if (instance) {\n    instance.trigger('destroy');\n    instance.__onDestroy();\n  }\n  node.__radiInstance = null;\n\n  if (node.nodeType === 1) {\n    let curChild = node.firstChild;\n    while (curChild) {\n      destroyTree(curChild);\n      curChild = curChild.nextSibling;\n    }\n  }\n}\n","\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function capitalise(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function flatten(list) {\n  return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n","/**\n * Checks that an element has a non-empty `name` and `value` property.\n * @param  {Element} element  the element to check\n * @return {Bool}             true if the element is an input, false if not\n */\nconst isValidElement = element => element.name && (element.value || element.value === '');\n\n/**\n * Checks if an elementâ€™s value can be saved (e.g. not an unselected checkbox).\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the value should be added, false if not\n */\nconst isValidValue = element =>\n  (!['checkbox', 'radio'].includes(element.type) || element.checked);\n\n/**\n * Checks if an input is a checkbox, because checkboxes allow multiple values.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a checkbox, false if not\n */\nconst isCheckbox = element => element.type === 'checkbox';\n\n/**\n * Checks if an input is a `select` with the `multiple` attribute.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a multiselect, false if not\n */\nconst isMultiSelect = element => element.options && element.multiple;\n\n/**\n * Retrieves the selected options from a multi-select as an array.\n * @param  {HTMLOptionsCollection} options  the options for the select\n * @return {Array}                          an array of selected option values\n */\nconst getSelectValues = options =>\n  [].reduce.call(options, (values, option) =>\n    option.selected\n      ? values.concat(option.value)\n      : values, []);\n\n/**\n * Retrieves input data from a form and returns it as a JSON object.\n * @param  {HTMLFormControlsCollection} elements  the form elements\n * @return {Object}                               form data as an object literal\n */\nexport const formToJSON = (elements, transform = (e, v) => v) =>\n  [].reduce.call(elements, (data, element) => {\n  // Make sure the element has the required properties and should be added.\n    if (isValidElement(element) && isValidValue(element)) {\n    /*\n     * Some fields allow for more than one value, so we need to check if this\n     * is one of those fields and, if so, store the values as an array.\n     */\n      if (isCheckbox(element)) {\n        data[element.name] = (data[element.name] || [])\n          .concat(transform(element, element.value));\n      } else if (isMultiSelect(element)) {\n        data[element.name] = transform(element, getSelectValues(element));\n      } else {\n        data[element.name] = transform(element, element.value);\n      }\n    }\n\n    return data;\n  }, {});\n","import GLOBALS from '../consts/GLOBALS';\nimport { flatten } from '../utils';\n\n/**\n * @typedef {Object} Node\n * @property {*} type\n * @property {Object} props\n * @property {*[]} children\n */\n\n/**\n * @param  {*} preType\n * @param  {Object} preProps\n * @param  {*[]} preChildren\n * @return {Node}\n */\nexport function html(preType, preProps, ...preChildren) {\n  let type = (typeof preType === 'number') ? `${preType}` : preType;\n  let props = preProps || {};\n  const children = flatten(preChildren);\n\n  if (type instanceof Promise || (type && type.constructor.name === 'LazyPromise')) {\n    type = 'await';\n    props = {\n      src: preType,\n    };\n  }\n\n  if (typeof GLOBALS.CUSTOM_TAGS[type] !== 'undefined') {\n    type = GLOBALS.CUSTOM_TAGS[type].render;\n  }\n\n  return {\n    type,\n    props,\n    children,\n  };\n}\n","import { capitalise } from '../utils';\n\nexport class Component {\n  /**\n   * @param {Function} fn\n   * @param {string} name\n   */\n  constructor(fn, name) {\n    this.self = fn;\n    this.name = name || fn.name;\n    this.__$events = {};\n  }\n\n  /**\n   * @param  {string}   event\n   * @param  {Function} fn\n   * @return {Function}\n   */\n  on(event, fn) {\n    const e = this.__$events;\n    const name = `on${capitalise(event)}`;\n    if (!e[name]) e[name] = [];\n    e[name].push(fn);\n    return fn;\n  }\n\n  /**\n   * @param  {string} event\n   * @param  {*[]} args\n   */\n  trigger(event, ...args) {\n    const name = `on${capitalise(event)}`;\n\n    (this.__$events[name] || [])\n      .map(e => e(...args));\n\n    if (typeof this[name] === 'function') {\n      this[name](...args);\n    }\n\n    if (typeof this.self[name] === 'function') {\n      this.self[name](...args);\n    }\n  }\n}\n","export const componentStore = {\n  currentComponent: null,\n};\n","import GLOBALS from '../consts/GLOBALS';\n\nexport function setAttribute(dom, key, value) {\n  if (typeof GLOBALS.CUSTOM_ATTRIBUTES[key] !== 'undefined') {\n    const { allowedTags } = GLOBALS.CUSTOM_ATTRIBUTES[key];\n\n    if (!allowedTags || (\n      allowedTags\n        && allowedTags.length > 0\n        && allowedTags.indexOf(dom.localName) >= 0\n    )) {\n      if (typeof GLOBALS.CUSTOM_ATTRIBUTES[key].caller === 'function') {\n        GLOBALS.CUSTOM_ATTRIBUTES[key].caller(dom, value);\n      }\n      if (!GLOBALS.CUSTOM_ATTRIBUTES[key].addToElement) return;\n    }\n  }\n\n  if (typeof value === 'function' && key.startsWith('on')) {\n    const eventType = key.slice(2).toLowerCase();\n    dom.__radiHandlers = dom.__radiHandlers || {};\n    dom.removeEventListener(eventType, dom.__radiHandlers[eventType]);\n    dom.__radiHandlers[eventType] = value;\n    dom.addEventListener(eventType, dom.__radiHandlers[eventType]);\n  } else if (key === 'checked' || key === 'value' || key === 'className') {\n    dom[key] = value;\n  } else if (key === 'style' && typeof value === 'object') {\n    Object.assign(dom.style, value);\n  } else if (key === 'ref' && typeof value === 'function') {\n    value(dom);\n  } else if (key === 'key') {\n    dom.__radiKey = value;\n  } else if (typeof value !== 'object' && typeof value !== 'function') {\n    if (value) {\n      dom.setAttribute(key, value);\n    } else {\n      dom.removeAttribute(key);\n    }\n  }\n}\n","import { fireEvent } from './fireEvent';\nimport { renderComponent } from './renderComponent';\nimport { setAttribute } from './setAttribute';\n\nexport function render(vdom, parent = null) {\n  const mount = parent ? (el => parent.appendChild(el)) : (el => el);\n  let itemToMount;\n  if (typeof vdom === 'string' || typeof vdom === 'number') {\n    itemToMount = mount(document.createTextNode(vdom));\n  } else if (typeof vdom === 'boolean' || vdom === null || typeof vdom === 'undefined') {\n    itemToMount = mount(document.createTextNode(''));\n  } else if (typeof vdom === 'object' && typeof vdom.type === 'function') {\n    itemToMount = renderComponent(vdom, parent);\n  } else if (typeof vdom === 'object' && typeof vdom.type === 'string') {\n    const dom = mount(document.createElement(vdom.type));\n    for (const child of [].concat(...vdom.children)) render(child, dom);\n    for (const prop in vdom.props) setAttribute(dom, prop, vdom.props[prop]);\n    itemToMount = dom;\n  }\n\n  if (itemToMount) {\n    fireEvent('mount', itemToMount);\n    return itemToMount;\n  }\n  throw new Error(`Invalid VDOM: ${vdom}.`);\n}\n","import { Component, componentStore } from '../component';\n\nimport { patch } from './patch';\nimport { render } from './render';\n\nfunction evaluate(comp, fn) {\n  const temp = componentStore.currentComponent;\n  componentStore.currentComponent = comp;\n  const evaluated = fn();\n  componentStore.currentComponent = temp;\n  return evaluated;\n}\n\nexport function renderComponent(vdom, parent) {\n  const props = Object.assign({}, vdom.props, { children: vdom.children });\n\n  const lifecycles = new Component(vdom.type);\n\n  lifecycles.update = () => patchComponent(lifecycles.dom, vdom, parent);\n  lifecycles.render = (instance = lifecycles) => (\n    evaluate(instance, () => vdom.type.call(lifecycles, props))\n  );\n  lifecycles.dom = render(\n    lifecycles.render(),\n    parent\n  );\n\n  let $styleRef;\n\n  if (lifecycles.dom && typeof lifecycles.dom.addEventListener === 'function') {\n    lifecycles.on('mount', () => {\n      if (typeof lifecycles.style === 'string') {\n        $styleRef = document.createElement('style');\n        $styleRef.innerHTML = lifecycles.style;\n        document.head.appendChild($styleRef);\n      }\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n\n    lifecycles.on('destroy', () => {\n      lifecycles.dom = null;\n      lifecycles.self = null;\n      lifecycles.__$events = {};\n      if ($styleRef instanceof Node) {\n        document.head.removeChild($styleRef);\n      }\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n  }\n\n  lifecycles.dom.__radiInstance = lifecycles;\n  lifecycles.trigger('mount', lifecycles.dom, parent);\n  return lifecycles.dom;\n}\n\nexport function patchComponent(dom, vdom, parent = dom.parentNode) {\n  const props = Object.assign({}, vdom.props, { children: vdom.children });\n  const instance = dom.__radiInstance;\n  if (instance && instance.self === vdom.type) {\n    return patch(dom, instance.render(), parent);\n  } else if (instance.isPrototypeOf(vdom.type)) {\n    const ndom = renderComponent(vdom, parent);\n    return parent ? (parent.replaceChild(ndom, dom) && ndom) : (ndom);\n  } else if (!instance.isPrototypeOf(vdom.type)) {\n    return patch(dom, vdom.type(props), parent);\n  }\n  return null;\n}\n","import { destroyTree } from './destroyTree';\nimport { fireEvent } from './fireEvent';\nimport { patchComponent } from './renderComponent';\nimport { render } from './render';\nimport { setAttribute } from './setAttribute';\n\nfunction beforeDestroy(node, next) {\n  if (typeof node.beforedestroy === 'function') {\n    return node.beforedestroy(next);\n  }\n\n  return next();\n}\n\nexport function patch(dom, vdom, parent = dom.parentNode) {\n  const replace = parent ? el => (parent.replaceChild(el, dom) && el) : (el => el);\n  if (typeof vdom === 'object' && typeof vdom.type === 'function') {\n    return patchComponent(dom, vdom, parent);\n  } else if (typeof vdom !== 'object' && dom instanceof Text) {\n    return dom.textContent !== vdom ? replace(render(vdom, parent)) : dom;\n  } else if (typeof vdom === 'object' && dom instanceof Text) {\n    return replace(render(vdom, parent));\n  } else if (typeof vdom === 'object' && dom.nodeName !== vdom.type.toUpperCase()) {\n    return replace(render(vdom, parent));\n  } else if (typeof vdom === 'object' && dom.nodeName === vdom.type.toUpperCase()) {\n    const pool = {};\n    const active = document.activeElement;\n    [].concat(...dom.childNodes).filter(n => !n.__radiRemoved).forEach((child, index) => {\n      const key = child.__radiKey || `__index_${index}`;\n      pool[key] = child;\n    });\n    [].concat(...vdom.children).forEach((child, index) => {\n      const key = child.props && (child.props.key || `__index_${index}`);\n      if (pool[key]) {\n        fireEvent('update', patch(pool[key], child));\n        delete pool[key];\n      } else {\n        const temp = pool[key] ? patch(pool[key], child) : render(child, dom);\n        if (temp) {\n          dom.appendChild(temp);\n          delete pool[key];\n        }\n      }\n    });\n    for (const key in pool) {\n      pool[key].__radiRemoved = true;\n      beforeDestroy(pool[key], () => {\n        // This is for async node removals\n        destroyTree(pool[key]);\n        pool[key].remove();\n      });\n    }\n    for (const attr of dom.attributes) dom.removeAttribute(attr.name);\n    for (const prop in vdom.props) setAttribute(dom, prop, vdom.props[prop]);\n    active.focus();\n    return dom;\n  }\n  return null;\n}\n","import { componentStore } from '../component';\n\nfunction anchored(anchor, to) {\n  return (newState, oldState) => {\n    if (anchor[0] === newState) return false;\n    if (newState !== oldState) {\n      anchor[0] = newState;\n      to.dispatch(() => newState);\n    }\n    return true;\n  };\n}\n\nfunction extractState(state, path = []) {\n  if (!state) return state;\n\n  if (this && state && typeof state.subscribe === 'function') {\n    const anchor = [];\n    if (path.length > 0) {\n      state.subscribe((newState, oldState) => {\n        if (anchor[0] === newState) return false;\n        if (newState !== oldState) {\n          this.dispatch(() => this.setPartial(path, newState));\n          anchor[0] = newState;\n        }\n        return true;\n      });\n    } else {\n      this.subscribe(anchored(anchor, state));\n      state.subscribe(anchored(anchor, this));\n    }\n    return state.get();\n  }\n\n  if (typeof state === 'object') {\n    const tempState = Array.isArray(state) ? new Array(state.length) : {};\n    for (const key in state) {\n      if (state.hasOwnProperty(key)) {\n        tempState[key] = extractState.call(this, state[key], path.concat(key));\n      }\n    }\n    return tempState;\n  }\n\n  return state;\n}\n\nfunction clone(target, source) {\n  const out = Array.isArray(target) ? [] : {};\n\n  for (const i in target) out[i] = target[i];\n  for (const i in source) out[i] = source[i];\n\n  return out;\n}\n\nfunction proxied(state, fn, path = []) {\n  return new Proxy(state, {\n    get(_, prop) {\n      const newPath = path.concat(prop);\n\n      if (typeof state[prop] === 'object') {\n        return proxied(state[prop], fn, newPath);\n      }\n\n      if (typeof fn === 'function') fn(newPath);\n      return state[prop];\n    },\n  });\n}\n\nfunction Dependencies() {\n  this.dependencies = {};\n  this.add = (path, component) => {\n    const key = path[0];\n    if (typeof this.dependencies[key] === 'undefined') this.dependencies[key] = [];\n\n    if (this.dependencies[key].indexOf(component) < 0) {\n      // console.log('addDependency', key, component)\n      this.dependencies[key].push(component);\n    }\n  };\n  this.remove = (path, component) => {\n    const key = path[0];\n    const index = (this.dependencies[key] || []).indexOf(component);\n    if (index >= 0) {\n      // console.log('removeDependency', key, component)\n      this.dependencies[key].splice(index, 1);\n    }\n  };\n  this.fn = fn => (path) => {\n    const current = componentStore.currentComponent;\n    if (current) {\n      this.add(path, current);\n\n      current.__onDestroy = () => {\n        this.remove(path, current);\n      };\n    }\n    return fn(path);\n  };\n  this.trigger = (key, newStore, oldState) => {\n    if (this.dependencies[key]) {\n      this.dependencies[key].forEach(fn => (\n        (fn.update ? fn.update : fn)(newStore, oldState)\n      ));\n    }\n  };\n}\n\nexport function Store(state = {}, fn = () => {}) {\n  let currentState = { ...state };\n  const StoreHold = function () {\n    return proxied(StoreHold.get(), dependencies.fn(fn));\n  };\n\n  const dependencies = new Dependencies();\n  let remap = e => e;\n\n  StoreHold.getInitial = () => initialSate;\n  StoreHold.get = () => remap(currentState);\n  StoreHold.setPartial = (path, value) => {\n    const target = Array.isArray(currentState) ? [] : {};\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? this.setPartial(path.slice(1), value, currentState[path[0]])\n          : value;\n      return clone(currentState, target);\n    }\n    return value;\n  };\n  StoreHold.update = (chunkState/* , noStrictSubs */) => {\n    const keys = Object.keys(chunkState);\n    const oldState = currentState;\n    const newState = {\n      ...currentState,\n      ...chunkState,\n    };\n    currentState = newState;\n    dependencies.trigger('*', StoreHold.get(), oldState);\n    keys.forEach(key => dependencies.trigger(key, StoreHold.get(), oldState));\n\n    return currentState;\n  };\n  StoreHold.dispatch = (action, ...args) => {\n    const payload = action(currentState, ...args);\n    // console.log('dispatch', {\n    //   action: action.name,\n    //   args: args,\n    //   payload,\n    // });\n    // console.log('dispatch', action.name, payload);\n    return StoreHold.update(payload);\n  };\n  StoreHold.willDispatch = (action, ...args) => (...args2) =>\n    StoreHold.dispatch(action, ...args, ...args2);\n  StoreHold.subscribe = (callback/* , strict */) => {\n    dependencies.add('*', callback);\n    callback(StoreHold.get(), null);\n    return StoreHold;\n  };\n  StoreHold.unsubscribe = (subscriber) => {\n    dependencies.remove('*', subscriber);\n  };\n  StoreHold.map = (fnMap) => {\n    const tempFn = remap;\n    remap = (...args) => fnMap(tempFn(...args));\n    return StoreHold;\n  };\n\n  const initialSate = extractState.call(StoreHold, state);\n\n  return StoreHold;\n}\n","import { Store } from '../store';\n\n/**\n * @param       {EventTarget} [target=document] [description]\n * @constructor\n */\nexport function Subscribe(target = document) {\n  return {\n    on: (eventHolder, transformer = e => e) => {\n      const events = eventHolder.trim().split(' ');\n      let eventSubscription = null;\n      let staticDefaults = null;\n      let staticStore = null;\n      let state = false;\n\n      if (typeof transformer !== 'function') {\n        throw new Error(`[Radi.js] Subscription \\`${eventHolder}\\` must be transformed by function`);\n      }\n\n      function updater(defaults, newStore) {\n        const store = newStore || new Store(defaults || {});\n\n        state = true;\n        staticDefaults = defaults;\n        staticStore = store;\n        events.map(event => target.addEventListener(event,\n          eventSubscription = (...args) =>\n            store.dispatch((oldStore) => ({ ...oldStore, ...transformer(...args, event) }))\n        ));\n\n        return store;\n      }\n\n      updater.stop = () => {\n        if (state) {\n          events.map(event => target.removeEventListener(event, eventSubscription));\n        }\n        return state = !state;\n      };\n      updater.start = () => !state && updater(staticDefaults, staticStore);\n\n      return updater;\n    },\n  };\n}\n","import { customAttribute } from '../../html/customAttribute';\n\nexport const animate = (target, type, opts, done) => {\n  const direct = opts[type];\n  if (typeof direct !== 'function') {\n    console.warn(`[Radi.js] Animation \\`${type}\\` for node \\`${target.nodeName.toLowerCase}\\` should be function`);\n    return;\n  }\n\n  return direct(target, done);\n};\n\ncustomAttribute('animation', (el, value) => {\n  animate(el, 'in', value, () => {});\n  el.beforedestroy = done => animate(el, 'out', value, done);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('html', (el, value) => {\n  const insert = () => {\n    if (el.escape) {\n      el.textContent = value;\n    } else {\n      el.innerHTML = value;\n    }\n  };\n  el.addEventListener('mount', insert);\n  el.addEventListener('update', insert);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('loadfocus', (el) => {\n  el.addEventListener('mount', () => el.focus());\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('onsubmit', (el, fn) => {\n  return function(e) {\n    if (el.prevent) e.preventDefault();\n    fn(e, formToJSON(el.elements || {}));\n  }\n}, {\n  allowedTags: [\n    'form',\n  ],\n  addToElement: true,\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\nimport { Store } from '../../store';\n\nexport const errorsStore = new Store({}, 'errorStore');\nconst setErrors = (state, name, errors) => ({\n  ...state,\n  [name]: errors,\n});\n\nfunction fullValidate(elements, rules, update) {\n  let values = formToJSON(elements, ({touched}, value) => ({touched, value}));\n  let plainValues = Object.keys(values)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: values[key].value,\n    }), {});\n  let errors = [];\n\n  for (let name in values) {\n    const value = values[name];\n\n    if (typeof rules[name] === 'function') {\n      const result = rules[name](value.value, plainValues);\n      const valid = (\n          result\n          && typeof result.check === 'function'\n          && result.check()\n        )\n        || result\n        || name + ' field is invalid';\n\n      if (valid !== true) errors.push({\n        field: name,\n        touched: Boolean(value.touched),\n        error: valid,\n      });\n    }\n  }\n\n  update(errors);\n}\n\nlet formCount = 0;\n\ncustomAttribute('onvalidate', (el, rules) => {\n  const formName = el.name || 'defaultForm' + (formCount++);\n  let submit;\n\n  function update(errors) {\n    errorsStore.dispatch(setErrors, formName, errors);\n  }\n\n  errorsStore.subscribe(state => {\n    if (submit) {\n      submit.disabled = state[formName].length > 0;\n    }\n  });\n\n  el.addEventListener('mount', e => {\n    const validate = rules(e);\n    const elements = e.target.elements;\n    if (validate && typeof validate === 'object'\n      && elements) {\n\n      for (let element of elements) {\n        const name = element.name;\n\n        if (!element.__radiValidate\n          && typeof name === 'string'\n          && typeof validate[name] === 'function') {\n\n          element.addEventListener('input', () => {\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          })\n          element.__radiValidate = true;\n\n          element.touched = false;\n          const setTouched = ({target}) => {\n            target.touched = true;\n            target.removeEventListener('change', setTouched);\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          };\n          element.addEventListener('change', setTouched);\n        }\n\n        if (element.type === 'submit' && element.disabled === true) {\n          submit = element;\n        }\n      }\n\n      fullValidate(\n        elements,\n        validate,\n        update\n      );\n    }\n  }, false);\n}, {\n  allowedTags: [\n    'form',\n  ],\n});\n","// export * from './await';\n// export * from './errors';\n// export * from './modal';\n// export * from './portal';\n","const validValue = (value) => (\n  typeof value === 'string'\n    || typeof value === 'number'\n    || value\n);\n\nexport class Validator {\n  constructor(value) {\n    this.value = value;\n    this.rules = [];\n  }\n\n  register({type, validate, error}) {\n    let nn = this.rules.push({\n      type: type,\n      validate: value => (validValue(value) && validate(value)),\n      error: error || 'Invalid field',\n    });\n\n    this.error = text => {\n      this.rules[nn - 1].error = text || error;\n      return this;\n    }\n\n    return this;\n  }\n\n  check(newValue) {\n    if (typeof newValue !== 'undefined') {\n      this.value = newValue;\n    }\n\n    return this.rules.reduce((acc, value) => (\n      typeof acc === 'string' ? acc : (!value.validate(this.value) && value.error) || acc\n    ), true)\n  }\n\n  required() {\n    return this.register({\n      type: 'required',\n      validate: value => value !== '',\n      error: 'Field is required',\n    })\n  }\n\n  test(regexp) {\n    return this.register({\n      type: 'test',\n      validate: value => value === '' || regexp.test(value),\n      error: 'Field must be valid',\n    })\n  }\n\n  equal(equal) {\n    return this.register({\n      type: 'equal',\n      validate: value => value === '' || value === equal,\n      error: 'Field must be equal to ' + equal,\n    })\n  }\n\n  notEqual(equal) {\n    return this.register({\n      type: 'notEqual',\n      validate: value => value === '' || value !== equal,\n      error: 'Field must not be equal to ' + equal,\n    })\n  }\n\n  min(num) {\n    return this.register({\n      type: 'min',\n      validate: value => value.length >= num,\n      error: 'Min char length is ' + num,\n    })\n  }\n\n  max(num) {\n    return this.register({\n      type: 'max',\n      validate: value => value.length < num,\n      error: 'Max char length is ' + num,\n    })\n  }\n\n  email() {\n    return this.register({\n      type: 'email',\n      validate: value => value === '' || /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n      error: 'Email is not valid',\n    })\n  }\n}\n","import GLOBALS from './consts/GLOBALS';\nimport { service } from './service';\nimport {\n  customAttribute,\n  customTag,\n  html,\n  patch,\n  render,\n} from './html';\nimport { Store } from './store';\nimport { Subscribe } from './subscribe';\nimport { Validator } from './custom';\n\nconst Radi = {\n  v: GLOBALS.VERSION,\n  version: GLOBALS.VERSION,\n  h: html,\n  html,\n  Store,\n  customTag,\n  customAttribute,\n  patch,\n  mount: render,\n  service,\n  Subscribe,\n  Validator,\n};\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (window) window.Radi = Radi;\nexport default Radi;\n"],"names":["const","let","this","i","equal"],"mappings":"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"}