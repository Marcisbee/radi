{"version":3,"file":"radi.js","sources":["../src/consts/GLOBALS.js","../src/utils/capitalise.js","../src/utils/flatten.js","../src/utils/ensureArray.js","../src/utils/formToJSON.js","../src/component/Component.js","../src/service.js","../src/html/customAttribute.js","../src/html/customTag.js","../src/html/destroyTree.js","../src/consts/types.js","../src/html/insertAfter.js","../src/html/fireEvent.js","../src/mount.js","../src/html/render.js","../src/destroy.js","../src/html/props.js","../src/html/patch.js","../src/html/renderComponent.js","../src/html/evaluate.js","../src/html/html.js","../src/store/Store.js","../src/store/Subscribe.js","../src/store/Event.js","../src/store/Fetcher.js","../src/custom/attributes/animation.js","../src/custom/attributes/html.js","../src/custom/attributes/loadfocus.js","../src/custom/attributes/onsubmit.js","../src/custom/attributes/onvalidate.js","../src/custom/tags/await.js","../src/custom/tags/errors.js","../src/custom/tags/modal.js","../src/custom/tags/portal.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  VERSION: '0.5.0',\n  CURRENT_COMPONENT: null,\n  CUSTOM_ATTRIBUTES: {},\n  CUSTOM_TAGS: {},\n  IS_UPDATE: false,\n  SERVICES: {},\n};\n\nexport default GLOBALS;\n","\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function capitalise(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function flatten(list) {\n  return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n","import { flatten } from './flatten';\n\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function ensureArray(list) {\n  return flatten([list]);\n}\n","/**\n * Checks that an element has a non-empty `name` and `value` property.\n * @param  {Element} element  the element to check\n * @return {Bool}             true if the element is an input, false if not\n */\nconst isValidElement = element => element.name && (element.value || element.value === '');\n\n/**\n * Checks if an elementâ€™s value can be saved (e.g. not an unselected checkbox).\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the value should be added, false if not\n */\nconst isValidValue = element =>\n  (!['checkbox', 'radio'].includes(element.type) || element.checked);\n\n/**\n * Checks if an input is a checkbox, because checkboxes allow multiple values.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a checkbox, false if not\n */\nconst isCheckbox = element => element.type === 'checkbox';\n\n/**\n * Checks if an input is a `select` with the `multiple` attribute.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a multiselect, false if not\n */\nconst isMultiSelect = element => element.options && element.multiple;\n\n/**\n * Retrieves the selected options from a multi-select as an array.\n * @param  {HTMLOptionsCollection} options  the options for the select\n * @return {Array}                          an array of selected option values\n */\nconst getSelectValues = options =>\n  [].reduce.call(options, (values, option) =>\n    option.selected\n      ? values.concat(option.value)\n      : values, []);\n\n/**\n * Retrieves input data from a form and returns it as a JSON object.\n * @param  {HTMLFormControlsCollection} elements  the form elements\n * @return {Object}                               form data as an object literal\n */\nexport const formToJSON = (elements, transform = (e, v) => v) =>\n  [].reduce.call(elements, (data, element) => {\n  // Make sure the element has the required properties and should be added.\n    if (isValidElement(element)) {\n    /*\n     * Some fields allow for more than one value, so we need to check if this\n     * is one of those fields and, if so, store the values as an array.\n     */\n      if (isCheckbox(element)) {\n        if (typeof data[element.name] === 'undefined') data[element.name] = [];\n        if (isValidValue(element)) {\n          data[element.name] = data[element.name]\n            .concat(transform(element, element.value));\n        }\n      } else\n      if (isValidValue(element)) {\n        if (isMultiSelect(element)) {\n          data[element.name] = transform(element, getSelectValues(element));\n        } else {\n          data[element.name] = transform(element, element.value);\n        }\n      }\n    }\n\n    return data;\n  }, {});\n","import { capitalise } from '../utils';\n\nexport class Component {\n  /**\n   * @param {Function} fn\n   */\n  constructor(node) {\n    this.type = node.type;\n    this.name = node.type.name;\n    this.pointer = node.pointer;\n    this.update = node.update;\n    this.__$events = {};\n  }\n\n  /**\n   * @param  {string}   event\n   * @param  {Function} fn\n   * @return {Function}\n   */\n  on(event, fn) {\n    const e = this.__$events;\n    const name = `on${capitalise(event)}`;\n    if (!e[name]) e[name] = [];\n    e[name].push(fn);\n    return fn;\n  }\n\n  /**\n   * @param  {string} event\n   * @param  {*[]} args\n   */\n  trigger(event, ...args) {\n    const name = `on${capitalise(event)}`;\n\n    (this.__$events[name] || [])\n      .map(e => e(...args));\n\n    if (typeof this[name] === 'function') {\n      this[name](...args);\n    }\n  }\n}\n","import GLOBALS from './consts/GLOBALS';\nimport { Component } from './component';\n\nclass Service {\n  /**\n   * @param  {string}   name\n   * @param  {Function} fn\n   * @param  {*[]}   args\n   * @return {Function}\n   */\n  add(name, fn, ...args) {\n    if (typeof name !== 'string') {\n      throw new Error('[Radi.js] Service first argument has to be string');\n    }\n\n    if (typeof this[name] !== 'undefined' || typeof Component.prototype[name] !== 'undefined') {\n      throw new Error('[Radi.js] Service \"' + name + '\" is already in use');\n    }\n\n    if (typeof fn !== 'function') {\n      throw new Error('[Radi.js] Service second argument has to be function');\n    }\n\n    const mounted = fn(...args);\n\n    Component.prototype[name] = this[name] = mounted;\n\n    return GLOBALS.SERVICES[name] = mounted;\n  }\n}\n\nexport const service = new Service();\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} attributeName\n * @param {function} caller\n * @param {Object} object\n * @returns {Object}\n */\nexport function customAttribute(attributeName, caller, {\n  allowedTags,\n  addToElement,\n} = {}) {\n  return GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n    name: attributeName,\n    caller,\n    allowedTags: allowedTags || null,\n    addToElement,\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} tagName\n * @param {function} onmount\n * @returns {object}\n */\nexport function customTag(tagName, render) {\n  return GLOBALS.CUSTOM_TAGS[tagName] = {\n    name: tagName,\n    render: render || (() => {}),\n  };\n}\n","import { fireEvent } from './index';\n\n/**\n * @param  {HTMLElement} node\n */\nexport function destroyTree(node) {\n  fireEvent('destroy', node);\n  node.__radiRef = undefined;\n\n  if (node.nodeType === 1) {\n    let curChild = node.firstChild;\n    while (curChild) {\n      destroyTree(curChild);\n      curChild = curChild.nextSibling;\n    }\n  }\n}\n","export default {\n  NODE: 0,\n  TEXT: 1,\n  COMPONENT: 2,\n}\n","\n/**\n * @param  {HTMLElement} newNode\n * @param  {HTMLElement} $reference\n * @param  {HTMLElement} $parent\n * @return {HTMLElement}\n */\nexport function insertAfter(newNode, $reference, $parent) {\n  if (!$parent) $parent = $reference.parentNode;\n\n  if (newNode instanceof Node) {\n    if ($reference === null || $reference === undefined) {\n      return $parent.insertBefore(newNode, $reference);\n    }\n\n    if ($reference instanceof Node) {\n      return $parent.insertBefore(newNode, $reference.nextSibling);\n    }\n  }\n\n  return newNode;\n}\n","\n/**\n * @param  {string} type\n * @param  {HTMLElement} $node\n * @return {HTMLElement}\n */\nexport function fireEvent(type, $node, $element = $node) {\n  const onEvent = document.createEvent('Event');\n  onEvent.initEvent(type, false, true);\n\n  if (typeof $node.dispatchEvent === 'function') {\n    $node._eventFired = true;\n    $node.dispatchEvent(onEvent, $element);\n  }\n\n  return $node;\n}\n","import {\n  fireEvent,\n  render,\n  evaluate,\n} from './html';\nimport { flatten } from './utils';\n\n/**\n * @param  {*} node\n * @param  {HTMLElement} container\n * @returns {{nodes: Structure[], dom: HTMLElement[]}}\n */\nexport function mount(node, container) {\n  const nodes = flatten([evaluate(node)]);\n  const dom = render(nodes, container);\n\n  dom.forEach((item) => {\n    container.appendChild(item);\n    fireEvent('mount', item);\n  });\n\n  return {\n    nodes,\n    dom,\n  };\n}\n","// TODO: use Component class\nimport { Component } from '../component';\nimport GLOBALS from '../consts/GLOBALS';\nimport TYPE from '../consts/types';\nimport { mount } from '../mount';\nimport { setProps } from '../html';\n\nexport function render(node, parent) {\n  if (Array.isArray(node)) {\n    return node.map((item) => render(item, parent));\n  }\n\n  if (node.type === TYPE.TEXT) {\n    return document.createTextNode(node.query);\n  }\n\n  if (node.type === TYPE.NODE) {\n    let element;\n    if (node.query === 'svg' || parent instanceof SVGElement) {\n      element = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        node.query\n      );\n    } else {\n      element = document.createElement(node.query);\n    }\n\n    mount(node.children, element);\n\n    // set attributes\n    setProps(element, node.props);\n\n    return element;\n  }\n\n  if (node.type === TYPE.COMPONENT) {\n    if (!node.pointer) {\n      node.pointer = document.createTextNode('');\n      node.pointer.__radiPoint = node;\n    }\n\n    node.source = new Component(node);\n\n    let $styleRef;\n\n    node.pointer.addEventListener('mount', (e) => {\n      if (typeof node.style === 'string') {\n        $styleRef = document.createElement('style');\n        $styleRef.innerHTML = node.style;\n        document.head.appendChild($styleRef);\n      }\n      node.update();\n      node.source.trigger('mount', e);\n      node.mounted = true;\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n\n    node.pointer.addEventListener('destroy', (e) => {\n      node.source.trigger('destroy', e);\n      if ($styleRef instanceof Node) {\n        document.head.removeChild($styleRef);\n      }\n      node.mounted = false;\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n\n    return node.pointer;\n  }\n\n  return document.createTextNode(node.toString());\n}\n","import { destroyTree } from './html';\nimport { ensureArray } from './utils';\n\n/**\n * @param  {HTMLElement} node\n * @param  {function} next\n */\nexport function beforeDestroy(node, next) {\n  if (typeof node.beforedestroy === 'function') {\n    return node.beforedestroy(next);\n  }\n\n  return next();\n}\n\n/**\n * @param  {*|*[]} data\n */\nexport function destroy(data) {\n  const nodes = ensureArray(data);\n\n  nodes.forEach(node => {\n    if (!(node instanceof Node)) return;\n\n    if (node.__radiPoint && node.__radiPoint.dom && node.__radiPoint.dom.length > 0) {\n      node.__radiPoint.dom.forEach(destroy);\n    }\n\n    const parent = node.parentNode;\n    if (node instanceof Node && parent instanceof Node) {\n      beforeDestroy(node, () => {\n        // This is for async node removals\n        destroyTree(node);\n        parent.removeChild(node);\n      });\n    }\n  });\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {*} value\n * @param {Function} fn\n * @returns {*}\n */\nfunction autoUpdate(value, fn) {\n  return fn(value);\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nfunction setBooleanProp($target, name, value) {\n  if (value) {\n    $target.setAttribute(name, value);\n    $target[name] = true;\n  } else {\n    $target[name] = false;\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n */\nfunction removeBooleanProp($target, name) {\n  $target.removeAttribute(name);\n  $target[name] = false;\n}\n\n/**\n * @param {string} name\n * @returns {boolean}\n */\nfunction isEventProp(name) {\n  return /^on/.test(name);\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction extractEventName(name) {\n  return name.replace(/^on/, '').toLowerCase();\n}\n\n/**\n * @param {string} name\n * @returns {boolean}\n */\nfunction isCustomProp(name) {\n  return isEventProp(name);\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function setProp($target, name, value) {\n  if (name === 'style' && typeof value !== 'string') {\n    setStyles($target, value);\n  } else if (isCustomProp(name)) {\n    addEventListener($target, name, value);\n  } else if (name === 'className') {\n    $target.setAttribute('class', value);\n  } else if (typeof value === 'boolean') {\n    setBooleanProp($target, name, value);\n  } else {\n    if (name === 'value' && document.activeElement !== $target) {\n      $target[name] = value;\n    }\n    $target.setAttribute(name, value);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function removeProp($target, name, value) {\n  if (isCustomProp(name)) {\n\n  } else if (name === 'className') {\n    $target.removeAttribute('class');\n  } else if (typeof value === 'boolean') {\n    removeBooleanProp($target, name);\n  } else {\n    $target.removeAttribute(name);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} styles\n */\nexport function setStyles($target, styles) {\n  Object.keys(styles).forEach(name => {\n    autoUpdate(styles[name], value => {\n      $target.style[name] = value;\n    });\n  });\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} props\n */\nexport function setProps($target, props) {\n  (Object.keys(props || {})).forEach(name => {\n    if (typeof GLOBALS.CUSTOM_ATTRIBUTES[name] !== 'undefined') {\n      const { allowedTags, addToElement, caller } = GLOBALS.CUSTOM_ATTRIBUTES[name];\n\n      if (!allowedTags || (\n        allowedTags\n        && allowedTags.length > 0\n        && allowedTags.indexOf($target.localName) >= 0\n      )) {\n        if (typeof caller === 'function') {\n          props[name] = caller($target, props[name]);\n        }\n        if (!addToElement) return;\n      }\n    }\n\n    autoUpdate(props[name], value => {\n      if (name === 'model') {\n        name = 'value';\n      } else\n      if (name === 'class' || name === 'className') {\n        if (Array.isArray(value)) {\n          value = value.filter(v => v && typeof v !== 'function').join(' ');\n        }\n      }\n      setProp($target, name, value);\n    });\n  });\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isRemovableProp(value) {\n  return typeof value === 'undefined' || value === false || value === null;\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} newVal\n * @param {*} oldVal\n */\nexport function updateProp($target, name, newVal, oldVal) {\n  if (isRemovableProp(newVal)) {\n    removeProp($target, name, oldVal);\n  } else if (!oldVal || newVal !== oldVal) {\n    setProp($target, name, newVal);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} newProps\n * @param {{}} oldProps = {}\n */\nexport function updateProps($target, newProps, oldProps = {}) {\n  const props = Object.assign({}, newProps, oldProps);\n\n  if (typeof $target.__radiHandlers !== 'undefined') {\n    $target.__radiHandlers.forEach((event) => {\n      $target.removeEventListener(...event);\n    });\n\n    $target.__radiHandlers = [];\n  }\n\n  Object.keys(props).forEach(name => {\n    autoUpdate(newProps[name], value => {\n      if (name === 'model') {\n        name = 'value';\n      }\n      updateProp($target, name, value, oldProps[name]);\n    });\n  });\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function addEventListener($target, name, value) {\n  const exceptions = ['mount', 'destroy'];\n  if (isEventProp(name)) {\n    if (typeof $target.__radiHandlers === 'undefined') {\n      $target.__radiHandlers = [];\n    }\n    const event = [\n      extractEventName(name),\n      (e) => {\n        if (exceptions.indexOf(name) >= 0) {\n          if ($target === e.target) value(e);\n        } else\n        if (typeof value === 'function') {\n          value(e);\n        }\n      },\n    ];\n    $target.__radiHandlers.push(event);\n    $target.addEventListener(\n      event[0],\n      event[1],\n      false\n    );\n  }\n}\n","import { destroy } from '../destroy';\nimport { fireEvent } from './fireEvent';\nimport { render } from './render';\nimport { updateProps } from './props';\nimport TYPE from './../consts/types';\nimport { insertAfter } from './insertAfter';\n\n/**\n * @param {NamedNodeMap} value\n * @returns {{}}\n */\nfunction attributesToObject(value) {\n  return [].reduce.call(value, (acc, obj) => ({\n    ...acc,\n    [obj.name]: obj.value,\n  }), {});\n}\n\nfunction withoutInnerChilds(dom) {\n  const childrenOfComponents = Array.prototype.filter.call(\n    dom.childNodes,\n    d => typeof d.__radiPoint !== 'undefined'\n  )\n    .reduce((acc, d) => [...acc, ...d.__radiPoint.dom], []);\n\n  return Array.prototype.filter.call(\n    dom.childNodes,\n    d => childrenOfComponents.indexOf(d) < 0\n  );\n}\n\n/**\n * @param  {Structure} structure\n * @param  {HTMLElement} dom\n * @param  {HTMLElement} parent\n * @param  {HTMLElement} last\n * @returns {{ newDom: HTMLElement, newStucture: Structure, last: HTMLElement }}\n */\nexport function patch(structure, dom, parent, last) {\n  let newStucture;\n  let newDom;\n  if (!dom) {\n    // add\n    last = newDom = fireEvent('mount', insertAfter(render(newStucture = structure), last, parent));\n  } else\n    if (!structure) {\n      // remove\n      destroy(dom);\n    } else {\n      // replace\n      if (structure.type === TYPE.NODE) {\n        const patchNewDom = structure;\n        const patchOldDom = dom;\n        const patchOldDomChildren = withoutInnerChilds(dom);\n\n        if (patchOldDom.nodeName === patchNewDom.query.toUpperCase()) {\n          const oldAttrs = attributesToObject(patchOldDom.attributes);\n\n          if (patchOldDomChildren || patchNewDom.children) {\n            const length = Math.max(patchOldDomChildren.length, patchNewDom.children.length);\n\n            /* We should always run patch childnodes in reverse from last to first\n            because if node is removed, it removes whole element in array */\n            for (let ii = length - 1; ii >= 0; ii--) {\n              patch(\n                patchNewDom.children[ii],\n                patchOldDomChildren[ii],\n                patchOldDom\n              );\n            }\n          }\n\n          updateProps(patchOldDom, patchNewDom.props, oldAttrs);\n\n          newStucture = structure;\n          newDom = dom;\n          return { newDom, newStucture, last };\n        }\n      }\n\n      if (structure.type === TYPE.TEXT && dom.nodeType === 3 && !dom.__radiPoint) {\n\n        if (dom.textContent != structure.query) {\n          dom.textContent = structure.query;\n        }\n\n        newStucture = structure;\n        newDom = dom;\n        return { newDom, newStucture, last };\n      }\n\n      if (structure.type === TYPE.COMPONENT) {\n\n        if (dom.__radiPoint && dom.__radiPoint.query === structure.query) {\n          dom.__radiPoint.update(structure.props, structure.children);\n\n          newStucture = dom.__radiPoint;\n          newDom = dom;\n          return { newDom, newStucture, last };\n        }\n      }\n\n      last = newDom = fireEvent('mount', insertAfter(render(newStucture = structure), dom, parent));\n      if (last.__radiPoint && last.__radiPoint && last.__radiPoint.dom) {\n        last = last.__radiPoint.dom[last.__radiPoint.dom.length - 1];\n      }\n      destroy(dom);\n    }\n\n  return { newDom, newStucture, last };\n}","import { flatten } from '../utils';\nimport { evaluate } from './evaluate';\nimport { insertAfter } from './insertAfter';\nimport { fireEvent } from './fireEvent';\nimport { render } from './render';\nimport { patch } from './patch';\n\n/**\n * @param {{}} props\n * @param {[]} children\n * @returns {HTMLElement}\n */\nexport function renderComponent(props = this.props, children = this.children) {\n  if (props) this.props = props;\n  if (children) this.children = children;\n  const component = flatten([evaluate(\n    this.query.call(this.source, {\n      ...this.props,\n      children: this.children,\n    })\n  )]);\n\n  if (!this.dom) {\n    const rendered = render(this.domStructure = component);\n\n    return this.dom = rendered\n      .reverse()\n      .map((item) => fireEvent('mount', insertAfter(item, this.pointer)))\n      .reverse();\n  }\n\n  const active = document.activeElement;\n\n  if (this.pointer.parentNode === null) return this.dom;\n\n  const length = Math.max(this.dom.length, component.length);\n  let last = this.pointer;\n  let newDom = [];\n  let newStucture = [];\n  for (let i = 0; i <= length - 1; i++) {\n    const output = patch(component[i], this.dom[i], this.pointer.parentNode, last);\n    if (output.last) last = output.last;\n    if (output.newDom) newDom[i] = output.newDom;\n    if (output.newStucture) newStucture[i] = output.newStucture;\n  }\n\n  active.focus();\n\n  this.domStructure = newStucture;\n  return this.dom = newDom;\n}\n","import { flatten } from '../utils';\nimport TYPE from '../consts/types';\nimport { renderComponent } from './renderComponent';\nimport GLOBALS from '../consts/GLOBALS';\n\nexport function isNode(value) {\n  return value && typeof value === 'object'\n    && typeof value.query !== 'undefined'\n    && typeof value.props !== 'undefined'\n    && typeof value.children !== 'undefined';\n}\n\nfunction updater(comp) {\n  return (...args) => {\n    const tempComponent = GLOBALS.CURRENT_COMPONENT;\n    GLOBALS.CURRENT_COMPONENT = comp;\n    const output = renderComponent.call(comp, ...args);\n\n    GLOBALS.CURRENT_COMPONENT = tempComponent;\n    return output\n  }\n}\n\nexport function evaluate(node) {\n  if (Array.isArray(node)) {\n    return flatten(node).map(evaluate);\n  }\n\n  if (typeof node === 'function') {\n    return evaluate(node());\n  }\n\n  if (node instanceof Promise || (node && node.constructor.name === 'LazyPromise')) {\n    return evaluate({\n      query: 'await',\n      props: {\n        src: node,\n      },\n      children: [],\n    });\n  }\n\n  if (node && typeof node.type === 'number') return node;\n  if (isNode(node)) {\n\n    if (typeof node.query === 'function') {\n      const comp = {\n        ...node,\n        type: TYPE.COMPONENT,\n        pointer: null,\n        dom: null,\n      };\n      comp.update = updater(comp);\n      return comp;\n    }\n\n    if (typeof GLOBALS.CUSTOM_TAGS[node.query] !== 'undefined') {\n      const comp = {\n        ...node,\n        query: GLOBALS.CUSTOM_TAGS[node.query].render,\n        type: TYPE.COMPONENT,\n        pointer: null,\n        dom: null,\n      };\n      comp.update = updater(comp);\n      return comp;\n    }\n\n    return {\n      ...node,\n      type: TYPE.NODE,\n      children: evaluate(flatten(node.children)),\n    }\n  }\n\n  if (!node && typeof node !== 'string' && typeof node !== 'number') {\n    return {\n      // query: node,\n      query: '',\n      type: TYPE.TEXT,\n    }\n  }\n\n  return {\n    query: node.toString(),\n    type: TYPE.TEXT,\n  }\n}\n","import { flatten } from '../utils';\n\n/**\n * @typedef {Object} Node\n * @property {string|function} query\n * @property {{}} props\n * @property {*[]} children\n */\n\n/**\n * @param  {*} preQuery\n * @param  {{}} preProps\n * @param  {*[]} preChildren\n * @return {Node}\n */\nexport function html(preQuery, preProps, ...preChildren) {\n  let query = (typeof preQuery === 'number') ? `${preQuery}` : preQuery;\n  let props = preProps || {};\n  const children = flatten(preChildren);\n\n  if (query instanceof Promise || (query && query.constructor.name === 'LazyPromise')) {\n    query = 'await';\n    props = {\n      src: preQuery,\n    };\n  }\n\n  return {\n    query,\n    props,\n    children,\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\n\nlet renderQueue = [];\n\n/**\n * @param {Function} data\n * @returns {Function}\n */\nfunction addToRenderQueue(data) {\n  const fn = (data.update && (() => data.update())) || data;\n  if (renderQueue.indexOf(fn) < 0) {\n    renderQueue.push(fn);\n  }\n  return fn;\n}\n\nfunction clearRenderQueue() {\n  renderQueue = [];\n}\n\nclass Dependencies {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.dependencies = {};\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {Function} component\n   */\n  add(path, component) {\n    const key = path[0];\n    if (typeof this.dependencies[key] === 'undefined') this.dependencies[key] = [];\n\n    this.dependencies[key] = this.dependencies[key].filter(c => {\n      if (c === GLOBALS.CURRENT_COMPONENT.query || c.query === GLOBALS.CURRENT_COMPONENT.query) return true;\n      if (c.pointer instanceof Node) {\n        if (c.mounted) return true;\n        return c.pointer.isConnected;\n      }\n      return true;\n    });\n\n    if (this.dependencies[key].indexOf(component) < 0) {\n      // console.log('addDependency', key, component, this.dependencies[key])\n      this.dependencies[key].push(component);\n    }\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {Function} component\n   */\n  remove(path, component) {\n    const key = path[0];\n    const index = (this.dependencies[key] || []).indexOf(component);\n    if (index >= 0) {\n      // console.log('removeDependency', key, component)\n      this.dependencies[key].splice(index, 1);\n    }\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {Function} component\n   */\n  component(path, component) {\n    if (component) {\n      this.add(path, component);\n\n      component.__onDestroy = () => {\n        this.remove(path, component);\n      };\n    }\n    return component;\n  }\n\n  /**\n   * @param {string} key\n   * @param {*} newStore\n   * @param {*} oldState\n   */\n  trigger(key, newStore, oldState) {\n    if (this.dependencies[key]) {\n      this.dependencies[key].forEach(fn => (\n        addToRenderQueue(fn)(newStore, oldState)\n      ));\n    }\n  }\n}\n\n/**\n * @param {*} key\n * @returns {Function}\n */\nconst noop = e => e;\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isObject(value) {\n  return value && (\n    value.constructor === Object\n    || value.constructor === Array\n  );\n}\n\n/**\n * @param {Store} store\n * @param {Store} state\n * @param {string[]} path\n * @returns {*} New state\n */\nfunction evalState(store, state, path = []) {\n  if (state) {\n    if (isObject(state)) {\n      const newState = Array.isArray(state) ? [] : {};\n      for (const key in state) {\n        newState[key] = evalState(store, state[key], path.concat(key));\n      }\n      return newState;\n    }\n\n    if (state instanceof Store) {\n      state.subscribe.call(state, (newValue) => {\n        store.update(store.setPartial(path, newValue));\n      });\n      return state.get();\n    }\n  }\n\n  return state;\n}\n\n/**\n * @param {Store} state\n * @param {string|number} key\n * @param {*} value\n * @returns {*} New state\n */\nfunction mapState(state, key, value) {\n  if (state && isObject(state)) {\n    const output = Array.isArray(state)\n      ? [...state]\n      : { ...state };\n    output[key] = value;\n    return output;\n  }\n\n  return state;\n}\n\nexport class Store {\n  /**\n   * @param {*} state\n   * @constructor\n   */\n  constructor(state) {\n    this.dependencies = new Dependencies();\n    this.transform = noop;\n    this.willDispatch = this.willDispatch.bind(this);\n    this.dispatch = this.dispatch.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.update = this.update.bind(this);\n    this.get = this.get.bind(this);\n    this.storedState = evalState(this, state);\n  }\n\n  /**\n   * @returns {*} Stored state\n   */\n  get state() {\n    if (GLOBALS.CURRENT_COMPONENT) {\n      this.dependencies.component('*', GLOBALS.CURRENT_COMPONENT);\n    }\n\n    return this.get();\n  }\n\n  /**\n   * @returns {*} Transformed state\n   */\n  get bind() {\n    return {\n      value: this.get(),\n      onInput: (e) => this.update(e.target.value),\n    };\n  }\n\n  /**\n   * @returns {*} Transformed state\n   */\n  get() {\n    return this.transform(this.storedState);\n  }\n\n  /**\n   * @param {Function} transform\n   * @returns {Store}\n   */\n  map(transform) {\n    const last = this.transform;\n    this.transform = (data) => transform(last(data));\n    return this;\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {*} newValue\n   * @param {*} source Stored state\n   * @returns {*} Mapped state\n   */\n  setPartial(path, newValue, source = this.storedState) {\n    if (source && path && path.length) {\n      const [current, ...nextPath] = path;\n      return mapState(source, current, this.setPartial(nextPath, newValue, source[current]));\n    }\n\n    return newValue;\n  }\n\n  /**\n   * @param {*} newState\n   * @returns {*} Mapped state\n   */\n  update(newState) {\n    const parsedState = evalState(this, newState);\n    const oldStore = this.get();\n    this.storedState = parsedState;\n    this.dependencies.trigger('*', this.get(), oldStore);\n    clearRenderQueue();\n    return this.get();\n  }\n\n  /**\n   * @param {Function} callback\n   * @returns {Store}\n   */\n  subscribe(callback) {\n    this.dependencies.add('*', callback);\n    callback(this.get(), null);\n    return this;\n  }\n\n  /**\n   * @param {Function} subscriber\n   */\n  unsubscribe(subscriber) {\n    this.dependencies.remove('*', subscriber);\n  }\n\n  /**\n   * @param {Function} action\n   * @param {*[]} args\n   * @returns {*} Mapped state\n   */\n  dispatch(action, ...args) {\n    const payload = action(this.storedState, ...args);\n    // console.log('dispatch', {\n    //   action: action.name,\n    //   args: args,\n    //   payload,\n    // });\n    // console.log('dispatch', action.name, payload);\n    return this.update(payload);\n  }\n\n  /**\n   * @param {Function} action\n   * @param {*[]} args\n   * @returns {Function} Store.dispatch\n   */\n  willDispatch(action, ...args) {\n    return (...args2) => this.dispatch(action, ...args, ...args2);\n  }\n}\n","import { Store } from './Store';\n\n/**\n * @param {Function} subscriber\n * @returns {Store}\n */\nexport function Subscribe(subscriber) {\n  const subStore = new Store(null);\n\n  function caller(value) {\n    subStore.update(value);\n    subscriber(value, caller);\n    return subStore;\n  }\n\n  return caller;\n}\n","import { Subscribe } from './Subscribe';\n\n/**\n * @param {EventTarget} [target=document]\n * @param {string} name\n * @param {Function} transformer\n * @returns {Store}\n */\nexport function Event(target = document, name, transformer = e => e) {\n  const events = name.trim().split(' ');\n  let updater = () => {};\n  let status = true;\n  let eventSubscription = [];\n\n  if (typeof transformer !== 'function') {\n    throw new Error(`[Radi.js] Subscription \\`${name}\\` must be transformed by function`);\n  }\n\n  function startListener() {\n    events.forEach((event) => {\n      function listen(...args) {\n        updater(transformer(...args, event))\n      }\n      eventSubscription.push([event, listen]);\n      target.addEventListener(event, listen);\n    });\n  }\n\n  startListener();\n\n  function eventSubscriber(value, next) {\n    updater = next;\n  }\n\n  function CustomSubscribe(defaultValue) {\n    return Subscribe(eventSubscriber)(defaultValue);\n  }\n\n  CustomSubscribe.on = function on() {\n    if (status) return;\n\n    eventSubscription = [];\n    startListener();\n    status = true;\n  }\n\n  CustomSubscribe.off = function off() {\n    if (!status) return;\n\n    eventSubscription.forEach(([n, e]) => target.removeEventListener(n, e));\n    status = false;\n  }\n\n  return CustomSubscribe;\n}\n","import { Subscribe } from './Subscribe';\n\n/**\n * @param {Promise} resolver\n * @param {Function} success\n * @param {Function} error\n * @param {boolean} instant\n * @returns {Store}\n */\nexport function Fetcher(resolver, success, error, instant = false) {\n  let init = false;\n  let trigger = () => {};\n  let data = null;\n\n  if (typeof resolver !== 'function') {\n    throw new Error(`[Radi.js] Fetcher first parameter must be function that returns promise`);\n  }\n\n  function promiseSubscriber(value, next) {\n    trigger = next;\n    if (instant && !init) {\n      init = true;\n      CustomSubscribe.fetch();\n    }\n  }\n\n  function CustomSubscribe(defaultValue) {\n    return Subscribe(promiseSubscriber)(defaultValue);\n  }\n\n  CustomSubscribe.fetch = function fetch(...args) {\n    if (data !== null) return;\n\n    trigger({loading: true});\n\n    resolver(...args)\n      .then(success || ((output) => {\n        data = output;\n        trigger(output);\n      }))\n      .catch(error || ((error) => {\n        trigger({ error });\n        console.error(error);\n      }));\n  }\n\n  return CustomSubscribe;\n}\n","import { customAttribute } from '../../html/customAttribute';\n\nexport const animate = (target, type, opts, done) => {\n  const direct = opts[type];\n  if (typeof direct !== 'function') {\n    console.warn(`[Radi.js] Animation \\`${type}\\` for node \\`${target.nodeName.toLowerCase}\\` should be function`);\n    return;\n  }\n\n  return direct(target, done);\n};\n\ncustomAttribute('animation', (el, value) => {\n  animate(el, 'in', value, () => {});\n  el.beforedestroy = done => animate(el, 'out', value, done);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('html', (el, value) => {\n  el.addEventListener('mount', () => {\n    if (el.escape) {\n      el.textContent = value;\n    } else {\n      el.innerHTML = value;\n    }\n  });\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('loadfocus', (el) => {\n  el.addEventListener('mount', () =>\n    setTimeout(() => el.focus(), 0)\n  );\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('onsubmit', (el, fn) => {\n  return function(e) {\n    if (el.prevent) e.preventDefault();\n    fn(e, formToJSON(el.elements || {}));\n  }\n}, {\n  allowedTags: [\n    'form',\n  ],\n  addToElement: true,\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\nimport { Store } from '../../store';\n\nexport const errorsStore = new Store({});\nconst setErrors = (state, name, errors) => ({\n  ...state,\n  [name]: errors,\n});\n\nfunction extractValue(value) {\n  return Array.isArray(value)\n    ? value.map((arr) => arr.value)\n    : value.value;\n}\n\nfunction extractTouched(value, elements) {\n  return Array.isArray(value)\n    ? [].reduce.call(elements, (acc, val) => (val.touched && true) || acc, false)\n    : value.touched;\n}\n\nfunction fullValidate(elements, rules, update) {\n  let values = formToJSON(elements, ({touched}, value) => ({touched, value}));\n  let plainValues = Object.keys(values)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: extractValue(values[key]),\n    }), {});\n  let errors = [];\n\n  for (let name in values) {\n    const value = values[name];\n\n    if (typeof rules[name] === 'function') {\n      const result = rules[name](extractValue(value), plainValues);\n      const valid = (\n          result\n          && typeof result.check === 'function'\n          && result.check()\n        )\n        || result\n        || name + ' field is invalid';\n\n      if (valid !== true) errors.push({\n        field: name,\n        touched: Boolean(extractTouched(value, elements[name])),\n        error: valid,\n      });\n    }\n  }\n\n  update(errors);\n}\n\nlet formCount = 0;\n\ncustomAttribute('onvalidate', (el, rules) => {\n  const formName = el.name || 'defaultForm' + (formCount++);\n  let submit;\n\n  function update(errors) {\n    errorsStore.dispatch(setErrors, formName, errors);\n  }\n\n  errorsStore.subscribe(state => {\n    if (submit) {\n      submit.disabled = state[formName].length > 0;\n    }\n  });\n\n  el.addEventListener('mount', e => {\n    const validate = rules(e);\n    const elements = el.elements;\n    if (validate && typeof validate === 'object'\n      && elements) {\n\n      for (let element of elements) {\n        const name = element.name;\n\n        if (!element.__radiValidate\n          && typeof name === 'string'\n          && typeof validate[name] === 'function') {\n\n          element.addEventListener('input', () => {\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          })\n          element.__radiValidate = true;\n\n          element.touched = false;\n          const setTouched = ({target}) => {\n            target.touched = true;\n            target.removeEventListener('change', setTouched);\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          };\n          element.addEventListener('change', setTouched);\n        }\n\n        if (element.type === 'submit' && element.disabled === true) {\n          submit = element;\n        }\n      }\n\n      fullValidate(\n        elements,\n        validate,\n        update\n      );\n    }\n  }, false);\n}, {\n  allowedTags: [\n    'form',\n  ],\n});\n","import { customTag, html } from '../../html';\n\nfunction ensureFn(maybeFn) {\n  if (typeof maybeFn === 'function') return maybeFn;\n  return (e) => maybeFn || e;\n}\n\nexport function Await(props) {\n  let placeholderTimeout;\n  let {\n    src,\n    waitMs,\n    transform = e => e,\n    error = e => e,\n    placeholder = 'Loading..',\n    value = null,\n    loaded = false\n  } = props;\n\n  if (!(src &&\n    (src instanceof Promise || src.constructor.name === 'LazyPromise')\n  )) {\n    console.warn('[Radi] <await/> must have `src` as a Promise');\n    return null;\n  }\n\n  if (!loaded) {\n    if (placeholder !== value) {\n      if (waitMs) {\n        placeholderTimeout = setTimeout(() => {\n          this.update({ ...props, value: placeholder });\n        }, waitMs);\n      } else {\n        value = placeholder;\n      }\n    }\n\n    src\n      .then((value) => {\n        if (value && typeof value === 'object' && typeof value.default === 'function') {\n          value = html(value.default);\n        }\n\n        clearTimeout(placeholderTimeout);\n        this.update({ ...props, value: ensureFn(transform)(value), loaded: true });\n      })\n      .catch((err) => {\n        console.error(err);\n        clearTimeout(placeholderTimeout);\n        this.update({ ...props, value: ensureFn(error)(err), loaded: true });\n      })\n  }\n\n  return value;\n}\n\ncustomTag('await', Await);\n","import { errorsStore } from '../attributes';\n\nexport function Errors({ name, onrender = (e) => (e) }) {\n  const state = errorsStore.state;\n\n  if (typeof name === 'undefined') {\n    console.warn('[Radi.js] Warn: Every <errors> tag needs to have `name` attribute!');\n  }\n  if (typeof onrender !== 'function') {\n    console.warn('[Radi.js] Warn: Every <errors> tag needs to have `onrender` attribute!');\n  }\n\n  if (!state[name]) {\n    return null;\n  }\n\n  return onrender(state[name]);\n}\n","import { service } from '../../service';\nimport { html, customTag } from '../../html';\nimport { Store } from '../../store';\n\nconst h = html;\n\nexport const ModalStore = new Store({});\n\nconst registerModal = (store, name) => ({\n  ...store,\n  [name]: false,\n});\n\nconst switchModal = (store, name, type) => ({\n  ...store,\n  [name]: type,\n});\n\nexport const ModalService = service.add('modal', () => {\n  return {\n    open: (name) => ModalStore.dispatch(switchModal, name, true),\n    close: (name) => ModalStore.dispatch(switchModal, name, false),\n    onOpen: (name, fn) =>\n      ModalStore.subscribe((n, p) => n[name] === true && n[name] !== p[name] && fn()),\n    onClose: (name, fn) =>\n      ModalStore.subscribe((n, p) => n[name] === false && n[name] !== p[name] && fn()),\n  };\n});\n\nexport function Modal({ name = 'default', children }) {\n  const modal = ModalStore.state;\n\n  if (typeof name === 'undefined') {\n    console.warn('[Radi.js] Warn: Every <modal> tag needs to have `name` attribute!');\n  }\n\n  this.onMount = el => {\n    if (!modal[name])\n      ModalStore.dispatch(registerModal, name);\n  }\n\n  return h('portal', {},\n    modal[name] && h('div',\n      { class: 'radi-modal', name },\n      h('div', {\n        class: 'radi-modal-backdrop',\n        onclick: () => service.modal.close(name),\n      }),\n      h('div',\n        { class: 'radi-modal-content' },\n        ...(children.slice())\n      )\n    )\n  );\n}\n\n// TODO: Figure out a different approach to modal\ncustomTag('modal', Modal);\n","import { destroy } from '../../destroy';\nimport { mount } from '../../mount';\nimport { customTag, html } from '../../html';\n\nexport function Portal(data) {\n  const {\n    children,\n    parent = data.on || document.body,\n  } = data;\n  if (this.pointer && this.pointer.__radiUpdateChild) {\n    this.pointer.__radiUpdateChild(undefined, children);\n  }\n  this.onMount = (e) => {\n    mount(html(function (props) {\n      this.onMount = (ev) => {\n        e.target.__radiUpdateChild = this.update;\n        e.target.__radiPoint.dom[0].__radiRef = ev.target.__radiPoint;\n      }\n      return props.children.length > 0 ? props.children : children;\n    }), parent);\n  };\n\n  this.onDestroy = (e) => {\n    destroy(e.target.__radiPoint.dom[0].__radiRef.dom);\n  };\n\n  return null;\n}\n\ncustomTag('portal', Portal);\n","import GLOBALS from './consts/GLOBALS';\nimport { service } from './service';\nimport {\n  customAttribute,\n  customTag,\n  html,\n  patch,\n} from './html';\nimport {\n  Event,\n  Fetcher,\n  Store,\n  Subscribe,\n} from './store';\nimport { mount } from './mount';\nimport { destroy } from './destroy';\nimport {\n  Await,\n  Errors,\n  Modal,\n  Portal,\n} from './custom';\n\nconst Radi = {\n  v: GLOBALS.VERSION,\n  version: GLOBALS.VERSION,\n  h: html,\n  html,\n  customTag,\n  customAttribute,\n  destroy,\n  patch,\n  mount,\n  service,\n  Service: service,\n  Event,\n  Fetcher,\n  Store,\n  Subscribe,\n  Await,\n  Errors,\n  Modal,\n  Portal,\n};\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (window) window.Radi = Radi;\nexport default Radi;\n"],"names":["const","destroyTree","let","render","this","comp","component"],"mappings":"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"}