{"version":3,"file":"radi.es.js","sources":["../src/consts/GLOBALS.js","../src/utils/capitalise.js","../src/utils/flatten.js","../src/utils/ensureArray.js","../src/utils/formToJSON.js","../src/component/Component.js","../src/service.js","../src/html/customAttribute.js","../src/html/destroyTree.js","../src/custom/tags/Await.js","../src/custom/attributes/animation.js","../src/custom/attributes/html.js","../src/custom/attributes/loadfocus.js","../src/custom/attributes/onsubmit.js","../src/store/Store.js","../src/store/Effect.js","../src/store/Action.js","../src/store/Event.js","../src/store/Listen.js","../src/store/Watch.js","../src/custom/attributes/onvalidate.js","../src/custom/tags/Errors.js","../src/custom/tags/Loading.js","../src/custom/tags/Modal.js","../src/mount.js","../src/custom/tags/Portal.js","../src/consts/types.js","../src/html/fireEvent.js","../src/html/insertAfter.js","../src/html/render.js","../src/html/props.js","../src/html/patch.js","../src/html/renderComponent.js","../src/html/evaluate.js","../src/html/html.js","../src/html/onDestroy.js","../src/html/onMount.js","../src/html/shouldUpdate.js","../src/destroy.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  VERSION: '0.5.0',\n  CURRENT_COMPONENT: null,\n  CURRENT_ACTION: 0,\n  CUSTOM_ATTRIBUTES: {},\n  SERVICES: {},\n  USE_CACHE: false,\n};\n\nexport default GLOBALS;\n","\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function capitalise(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function flatten(list) {\n  return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n","import { flatten } from './flatten';\n\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function ensureArray(list) {\n  return flatten([list]);\n}\n","/**\n * Checks that an element has a non-empty `name` and `value` property.\n * @param  {Element} element  the element to check\n * @return {Bool}             true if the element is an input, false if not\n */\nconst isValidElement = element => element.name && (element.value || element.value === '');\n\n/**\n * Checks if an elementâ€™s value can be saved (e.g. not an unselected checkbox).\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the value should be added, false if not\n */\nconst isValidValue = element => (!['checkbox', 'radio'].includes(element.type) || element.checked);\n\n/**\n * Checks if an input is a checkbox, because checkboxes allow multiple values.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a checkbox, false if not\n */\nconst isCheckbox = element => element.type === 'checkbox';\n\n/**\n * Checks if an input is a `select` with the `multiple` attribute.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a multiselect, false if not\n */\nconst isMultiSelect = element => element.options && element.multiple;\n\n/**\n * Retrieves the selected options from a multi-select as an array.\n * @param  {HTMLOptionsCollection} options  the options for the select\n * @return {Array}                          an array of selected option values\n */\nconst getSelectValues = options => [].reduce.call(options, (values, option) => option.selected\n  ? values.concat(option.value)\n  : values, []);\n\n/**\n * Retrieves input data from a form and returns it as a JSON object.\n * @param  {HTMLFormControlsCollection} elements  the form elements\n * @return {Object}                               form data as an object literal\n */\nexport const formToJSON = (\n  elements,\n  transform = (e, v) => v\n) => [].reduce.call(elements, (data, element) => {\n  // Make sure the element has the required properties and should be added.\n  if (isValidElement(element)) {\n    /*\n     * Some fields allow for more than one value, so we need to check if this\n     * is one of those fields and, if so, store the values as an array.\n     */\n    if (isCheckbox(element)) {\n      if (typeof data[element.name] === 'undefined') data[element.name] = [];\n      if (isValidValue(element)) {\n        data[element.name] = data[element.name]\n          .concat(transform(element, element.value));\n      }\n    } else\n    if (isValidValue(element)) {\n      if (isMultiSelect(element)) {\n        data[element.name] = transform(element, getSelectValues(element));\n      } else {\n        data[element.name] = transform(element, element.value);\n      }\n    }\n  }\n\n  return data;\n}, {});\n","import { capitalise } from '../utils';\n\nexport class Component {\n  /**\n   * @param {Function} fn\n   */\n  constructor(node) {\n    this.type = node.type;\n    this.name = node.type.name;\n    this.pointer = node.pointer;\n    this.update = node.update;\n    this.__$events = {};\n  }\n\n  /**\n   * @param  {string}   event\n   * @param  {Function} fn\n   * @return {Function}\n   */\n  on(event, fn) {\n    const e = this.__$events;\n    const name = `on${capitalise(event)}`;\n    if (!e[name]) e[name] = [];\n    e[name].push(fn);\n    return fn;\n  }\n\n  /**\n   * @param  {string} event\n   * @param  {*[]} args\n   */\n  trigger(event, ...args) {\n    const name = `on${capitalise(event)}`;\n\n    (this.__$events[name] || [])\n      .map(e => e(...args));\n\n    if (typeof this[name] === 'function') {\n      this[name](...args);\n    }\n  }\n}\n","import { Component } from './component';\nimport GLOBALS from './consts/GLOBALS';\n\nclass RadiService {\n  /**\n   * @param  {string}   name\n   * @param  {Function} fn\n   * @param  {*[]}   args\n   * @return {Function}\n   */\n  add(name, fn, ...args) {\n    if (typeof name !== 'string') {\n      throw new Error('[Radi.js] Service first argument has to be string');\n    }\n\n    if (typeof this[name] !== 'undefined' || typeof Component.prototype[name] !== 'undefined') {\n      throw new Error(`[Radi.js] Service \"${name}\" is already in use`);\n    }\n\n    if (typeof fn !== 'function') {\n      throw new Error('[Radi.js] Service second argument has to be function');\n    }\n\n    const mounted = fn(...args);\n\n    this[name] = mounted;\n    Component.prototype[name] = mounted;\n\n    return GLOBALS.SERVICES[name] = mounted;\n  }\n}\n\nexport const Service = new RadiService();\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} attributeName\n * @param {function} caller\n * @param {Object} object\n * @returns {Object}\n */\nexport function customAttribute(attributeName, caller, {\n  allowedTags,\n  addToElement,\n} = {}) {\n  return GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n    name: attributeName,\n    caller,\n    allowedTags: allowedTags || null,\n    addToElement,\n  };\n}\n","import { fireEvent } from './index';\n\n/**\n * @param  {HTMLElement} node\n */\nexport function destroyTree(node) {\n  fireEvent('destroy', node);\n  node.__radiRef = undefined;\n\n  if (node.nodeType === 1) {\n    let curChild = node.firstChild;\n    while (curChild) {\n      destroyTree(curChild);\n      curChild = curChild.nextSibling;\n    }\n  }\n}\n","import { html } from '../../html';\n\nfunction ensureFn(maybeFn) {\n  if (typeof maybeFn === 'function') return maybeFn;\n  return (e) => maybeFn || e;\n}\n\nlet sharedPlaceholder;\n\nexport function Await(props) {\n  let placeholderTimeout;\n  let { value = null } = props;\n  const {\n    src,\n    waitMs,\n    transform = e => e,\n    error = e => e,\n    placeholder = sharedPlaceholder,\n    loaded = false,\n  } = props;\n\n  this.cached = true;\n\n  if (!(src && (src instanceof Promise || src.constructor.name === 'LazyPromise'))) {\n    console.warn('[Radi] <Await/> must have `src` as a Promise');\n    return null;\n  }\n\n  if (!loaded) {\n    if (placeholder !== value) {\n      if (waitMs) {\n        placeholderTimeout = setTimeout(() => {\n          this.update({ ...props, value: placeholder });\n        }, waitMs);\n      } else {\n        value = placeholder;\n      }\n    }\n\n    src\n      .then((output) => {\n        if (output && typeof output === 'object' && typeof output.default === 'function') {\n          output = html(output.default);\n        }\n\n        clearTimeout(placeholderTimeout);\n\n        const tempPlaceholder = sharedPlaceholder;\n        sharedPlaceholder = placeholder;\n\n        this.update({ ...props, value: ensureFn(transform)(output), loaded: true });\n\n        sharedPlaceholder = tempPlaceholder;\n      })\n      .catch((err) => {\n        console.error(err);\n        clearTimeout(placeholderTimeout);\n        this.update({ ...props, value: ensureFn(error)(err), loaded: true });\n      });\n  }\n\n  return value;\n}\n","import { customAttribute } from '../../html/customAttribute';\n\n/** Example usage:\n  const fade = {\n    in: (el) => el.animate({\n      opacity: [0, 1],\n      transform: ['scale(0.5)', 'scale(1)'],\n    }, {\n      duration: 200,\n      iterations: 1\n    }),\n\n    out: (el, done) => el.animate({\n      opacity: [1, 0],\n      transform: ['scale(1)', 'scale(0.5)'],\n    }, {\n      duration: 200,\n      iterations: 1\n    }).onfinish = done,\n  };\n\n\n  <div animation={fade}></div>\n */\n\nexport const animate = (target, type, opts, done) => {\n  const direct = opts[type];\n  if (typeof direct !== 'function') {\n    console.warn(`[Radi.js] Animation \\`${type}\\` for node \\`${target.nodeName.toLowerCase}\\` should be function`);\n    return null;\n  }\n\n  return direct(target, done);\n};\n\ncustomAttribute('animation', (el, value) => {\n  el.addEventListener('mount', () => {\n    animate(el, 'in', value, () => {});\n  });\n  el.beforedestroy = done => animate(el, 'out', value, done);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('html', (el, value) => {\n  if (el.escape) {\n    el.textContent = value;\n  } else {\n    el.innerHTML = value;\n  }\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('loadfocus', (el) => {\n  el.addEventListener('mount', () => (\n    setTimeout(() => el.focus(), 0)\n  ));\n});\n","import { customAttribute } from '../../html/customAttribute';\nimport { formToJSON } from '../../utils';\n\ncustomAttribute('onsubmit', (el, fn) => (\n  (e) => {\n    if (el.prevent) e.preventDefault();\n    fn(e, formToJSON(el.elements || {}));\n  }\n), {\n  allowedTags: [\n    'form',\n  ],\n  addToElement: true,\n});\n","import GLOBALS from '../consts/GLOBALS';\n\nlet renderQueue = [];\n\n/**\n * @param {Function} data\n * @returns {Function}\n */\nfunction addToRenderQueue(data) {\n  const fn = (data.update && (() => data.update())) || data;\n  if (renderQueue.indexOf(fn) < 0) {\n    renderQueue.push(fn);\n  }\n  return fn;\n}\n\nfunction clearRenderQueue() {\n  renderQueue = [];\n}\n\nclass Dependencies {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.dependencies = [];\n  }\n\n  /**\n   * @param {Function} component\n   */\n  add(component) {\n    this.dependencies = this.dependencies.filter(c => {\n      if (GLOBALS.CURRENT_COMPONENT\n        && (\n          c === GLOBALS.CURRENT_COMPONENT.query\n          || c.query === GLOBALS.CURRENT_COMPONENT.query\n        )) return true;\n      if (c.pointer instanceof Node) {\n        if (c.mounted) return true;\n        return c.pointer.isConnected;\n      }\n      return true;\n    });\n\n    if (this.dependencies.indexOf(component) < 0) {\n      // console.log('addDependency', component, this.dependencies)\n      this.dependencies.push(component);\n    }\n  }\n\n  /**\n   * @param {Function} component\n   */\n  remove(component) {\n    const index = this.dependencies.indexOf(component);\n    if (index >= 0) {\n      // console.log('removeDependency', component)\n      this.dependencies.splice(index, 1);\n    }\n  }\n\n  /**\n   * @param {Function} component\n   */\n  component(component) {\n    if (component) {\n      this.add(component);\n\n      component.__onDestroy = () => {\n        this.remove(component);\n      };\n    }\n    return component;\n  }\n\n  /**\n   * @param {*} newState\n   * @param {*} oldState\n   */\n  trigger(newState, oldState) {\n    this.dependencies.forEach(fn => (\n      addToRenderQueue(fn)(newState, oldState)\n    ));\n  }\n}\n\n/**\n * @param {*} key\n * @returns {Function}\n */\nconst noop = e => e;\n\nexport class Listener {\n  /**\n   * @param {Function} map\n   * @param {Store} store\n   * @param {Dependencies} dep\n   * @constructor\n   */\n  constructor(map, store) {\n    this.map = map;\n    this.getValue = this.getValue.bind(this);\n    this.update = this.update.bind(this);\n    this.store = store;\n  }\n\n  /**\n   * @param {Function} updater\n   * @returns {*} Cached state\n   */\n  link(updater) {\n    if (!this.subbed) {\n      this.subbed = this.store.subscribe(updater);\n    }\n    return this.subbed;\n  }\n\n  /**\n   * @param {Function} updater\n   * @returns {*} Cached state\n   */\n  getValue(updater) {\n    const state = this.store.getRawState();\n\n    if (!this.subbed) {\n      this.subbed = this.store.subscribe(updater);\n    }\n\n    return this.cached = this.map(state);\n  }\n\n  /**\n   * @returns {*} Cached state\n   */\n  update() {\n    const state = this.store.getRawState();\n    return this.cached = this.map(state);\n  }\n}\n\nlet storeListMiddleware = noop;\nconst storeList = [];\n\nfunction addStoreToList(store) {\n  const index = storeList.push(store) - 1;\n  store.id = index;\n\n  storeListMiddleware(storeList);\n\n  return index;\n}\n\nexport const events = {};\n\n/**\n * @param {*} originalState\n * @param {String} name\n * @returns {Store} Store\n */\nexport function Store(originalState = null, name = 'unnamed') {\n  const isActionStore = (originalState && originalState.isRadiAction);\n  let state = isActionStore ? null : originalState;\n  const storeEvents = [];\n  const dependencies = new Dependencies();\n  let storeSchema = null;\n\n  const _store = {\n\n    /**\n     * @param {*} schema\n     * @returns {*} Stored state\n     */\n    schema(schema) {\n      storeSchema = schema;\n      _store.setState(state);\n      return _store;\n    },\n\n    /**\n     * @param {Action} action\n     * @param {Function} reducer\n     * @returns {*} Stored state\n     */\n    on(action, reducer = (s) => s) {\n      events[action.id].push((...args) => {\n        const newState = reducer(state, ...args);\n\n        return _store.setState(newState);\n      });\n      return _store;\n    },\n\n    /**\n     * @returns {*} Stored state\n     */\n    get state() {\n      return _store.getState();\n    },\n\n    /**\n     * @returns {*} Stored state\n     */\n    getState() {\n      if (GLOBALS.CURRENT_COMPONENT) {\n        dependencies.component(GLOBALS.CURRENT_COMPONENT);\n      }\n\n      return state;\n    },\n\n    /**\n     * @returns {*} Stored state\n     */\n    getRawState() {\n      return state;\n    },\n\n    /**\n     * @param {*} newState\n     * @returns {*} Stored state\n     */\n    setState(newStateRaw) {\n      const newState = transform(newStateRaw, storeSchema);\n\n      // Timeout render queue\n      setTimeout(() => {\n        dependencies.trigger(newState, state);\n        clearRenderQueue();\n      });\n\n      storeEvents.forEach((fn) => {\n        fn(newState, state);\n      });\n\n      return (state = newState);\n    },\n\n    /**\n     * @param {Function} fn\n     * @returns {Function} Unsubscribe\n     */\n    subscribe(fn) {\n      dependencies.add(fn);\n      fn(_store.getRawState(), null);\n      storeEvents.push(fn);\n      return () => {\n        const index = storeEvents.indexOf(fn);\n        if (index >= 0) {\n          dependencies.remove(fn);\n          storeEvents.splice(index, 1);\n        }\n      };\n    },\n\n    /**\n     * @param {Function} transformer\n     * @param {String} mappedName\n     * @returns {*} Mapped state\n     */\n    map(transformer = (e) => e, mappedName = `Mapped ${name}`) {\n      const mappedStore = Store(state, mappedName);\n      _store.subscribe(\n        (newState, oldState) => {\n          mappedStore.setState(transformer(newState, oldState));\n        }\n      );\n      return mappedStore;\n    },\n\n    /**\n     * @returns {*} Transformed state\n     */\n    get bind() {\n      return {\n        value: _store.listener(),\n        onInput: (e) => _store.setState(e.target.value),\n      };\n    },\n\n    /**\n     * @param {Function} listenerToRender\n     * @returns {Listener}\n     */\n    listener(listenerToRender = e => e) {\n      return new Listener(listenerToRender, _store);\n    },\n  };\n\n  if (name !== false) {\n    addStoreToList(_store);\n  }\n\n  if (isActionStore) {\n    _store.on(originalState, (_, newState) => newState);\n  }\n\n  return _store;\n}\n\nexport function transform(value, Instance) {\n  if (typeof Instance !== 'function') {\n    if (Instance && Instance.constructor === RegExp) {\n      // eslint-disable-next-line no-new-wrappers\n      return (new String(value).valueOf()).match(Instance);\n    }\n\n    if (Instance instanceof Array) {\n      const newValue = transform(value, Array);\n      const insideInstance = Instance[0];\n\n      if (!insideInstance) return newValue;\n\n      return newValue.map((v) => transform(v, insideInstance));\n    }\n\n    if (!!Instance && Instance instanceof Object) {\n      const tempValue = {};\n      const keys = Object.keys(Instance);\n\n      keys.forEach((key) => {\n        tempValue[key] = transform(\n          (value || {})[key] || null,\n          (Instance || {})[key] || null\n        );\n      });\n\n      return tempValue;\n    }\n\n    if (Number.isNaN(Instance) || Instance === undefined || Instance === null) {\n      return value;\n    }\n\n    return Instance;\n  }\n\n  if (value instanceof Instance) {\n    return value;\n  }\n\n  if (!value) {\n    return new Instance().valueOf();\n  }\n\n  return new Instance(value).valueOf();\n}\n\nexport function Merge(stores, name = 'Unnnamed Map') {\n  const storesList = [].concat(stores);\n  const states = storesList.map((store) => store.getRawState());\n  const mappedStore = Store(states, name);\n  storesList.forEach(\n    (store, ii) => store.subscribe(\n      (state) => {\n        states[ii] = state;\n        mappedStore.setState(states);\n      }\n    )\n  );\n  return mappedStore;\n}\n\nexport function StoreMiddleware(\n  stores = noop,\n  // dispatch = noop,\n  // freeze = noop,\n  // resume = noop,\n) {\n  // @TODO: Add middleware to:\n  // - freeze updates\n  // - resume updates\n  storeListMiddleware = stores;\n  // storeDispatchMiddleware = dispatch;\n  storeListMiddleware(storeList);\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport { events, Store } from './Store';\nimport { Action } from './Action';\n\n/**\n * @param {String} name\n * @param {Function} effect\n * @returns {Effect} Effect\n */\nexport function Effect(name) {\n  GLOBALS.CURRENT_ACTION += 1;\n  const effectEvents = [];\n  const id = GLOBALS.CURRENT_ACTION;\n  let status = 'idle';\n  const setStatus = (newStatus) => {\n    status = newStatus;\n  };\n  let effect = (e) => Promise.resolve(e);\n\n  events[id] = [];\n\n  const done = Action(`${name} done`);\n  const fail = Action(`${name} fail`);\n\n  const caller = (...args) => {\n    setStatus('loading');\n    // console.log(`Called effect ${name}`, args);\n    events[id].forEach((fn) => {\n      fn(...args);\n    });\n\n    effectEvents.forEach(fn => {\n      fn({ params: args });\n    });\n\n    effect(...args)\n      .then((result) => {\n        setStatus('done');\n        // console.log('DONE', result);\n        const output = { result, params: args };\n        done(output);\n        effectEvents.forEach((fn) => fn(output));\n      })\n      .catch((error) => {\n        setStatus('fail');\n        // console.log('FAIL', error);\n        const output = { error, params: args };\n        fail(output);\n        effectEvents.forEach((fn) => fn(output));\n      });\n  };\n\n  Object.defineProperties(caller, {\n    name: {\n      value: name,\n    },\n    id: {\n      value: id,\n    },\n    use: {\n      value(fn) {\n        effect = fn;\n        return caller;\n      },\n    },\n    done: {\n      value: done,\n    },\n    fail: {\n      value: fail,\n    },\n    status: {\n      get() {\n        return status;\n      },\n    },\n    statusChange: {\n      get() {\n        return Store(status)\n          .on(caller, () => status)\n          .on(done, () => status)\n          .on(fail, () => status);\n      },\n    },\n    subscribe: {\n      value(fn) {\n        effectEvents.push(fn);\n        return () => {\n          const index = effectEvents.indexOf(fn);\n          if (index >= 0) {\n            effectEvents.splice(index, 1);\n          }\n        };\n      },\n    },\n  });\n\n  return caller;\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport { events } from './Store';\nimport { Effect } from './Effect';\n\n/**\n * @param {String} name\n * @returns {Action} Action\n */\nexport function Action(name) {\n  GLOBALS.CURRENT_ACTION += 1;\n  const actionEvents = [];\n  const id = GLOBALS.CURRENT_ACTION;\n  events[id] = [];\n\n  const caller = (...args) => {\n    // console.log(`Called action ${name}`, args);\n    events[id].forEach((fn) => {\n      fn(...args);\n    });\n\n    actionEvents.forEach(fn => {\n      fn(...args);\n    });\n  };\n\n  Object.defineProperties(caller, {\n    isRadiAction: {\n      value: true,\n    },\n    name: {\n      value: name,\n    },\n    id: {\n      value: id,\n    },\n    effect: {\n      value(fn) {\n        return Effect(name)\n          .use(fn);\n      },\n    },\n    subscribe: {\n      value(fn) {\n        actionEvents.push(fn);\n        return () => {\n          const index = actionEvents.indexOf(fn);\n          if (index >= 0) {\n            actionEvents.splice(index, 1);\n          }\n        };\n      },\n    },\n  });\n\n  return caller;\n}\n","import { Action } from './Action';\n\n/**\n * @param {String} name\n * @param {EventDispatcher} target\n * @returns {Event} Event\n */\nexport function Event(name, target = window) {\n  const eventNames = [];\n  const action = Action(name);\n\n  function handler(...args) {\n    return action(...args);\n  }\n\n  Object.defineProperties(action, {\n    on: {\n      value(nameChunks) {\n        nameChunks\n          .split(' ')\n          .forEach((eventName) => {\n            target.addEventListener(eventName, handler, false);\n            eventNames.push(eventName);\n          });\n        return action;\n      },\n    },\n    off: {\n      value(nameChunks) {\n        nameChunks\n          .split(' ')\n          .forEach((eventName) => {\n            const index = eventNames.indexOf(eventName);\n            if (index >= 0) {\n              target.removeEventListener(eventName, handler, false);\n              eventNames.splice(eventName);\n            }\n          });\n        return action;\n      },\n    },\n  });\n\n  return action;\n}\n","\n/**\n * @param {Store} store\n * @param {Function} transformer\n * @returns {Listener} Function of Listener\n */\nexport function Listen(store, transformer = (e) => e) {\n  return (newTransformer = transformer) => (\n    store.listener((data) => (\n      newTransformer(transformer(data)))\n    )\n  );\n}\n","\n/**\n * @param {Store} store\n * @returns {*} state\n */\nexport function Watch(store) {\n  return store.state;\n}\n","import { Store, Action } from '../../store';\nimport { customAttribute } from '../../html/customAttribute';\nimport { formToJSON } from '../../utils';\n\nconst setErrors = Action('Set Errors');\n\nexport const errorsStore = Store({}, null)\n  .on(setErrors, (state, name, errors) => ({\n    ...state,\n    [name]: errors,\n  }));\n\nfunction extractValue(value) {\n  return Array.isArray(value)\n    ? value.map((arr) => arr.value)\n    : value.value;\n}\n\nfunction extractTouched(value, elements) {\n  return Array.isArray(value)\n    ? [].reduce.call(elements, (acc, val) => (val.touched && true) || acc, false)\n    : value.touched;\n}\n\nfunction fullValidate(elements, rules, update) {\n  const values = formToJSON(elements, ({ touched }, value) => ({ touched, value }));\n  const plainValues = Object.keys(values)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: extractValue(values[key]),\n    }), {});\n  const errors = [];\n\n  for (const name in values) {\n    const value = values[name];\n\n    if (typeof rules[name] === 'function') {\n      const result = rules[name](extractValue(value), plainValues);\n      const valid = (\n        result\n          && typeof result.check === 'function'\n          && result.check()\n      )\n        || result\n        || `${name} field is invalid`;\n\n      if (valid !== true) {\n        errors.push({\n          field: name,\n          touched: Boolean(extractTouched(value, elements[name])),\n          error: valid,\n        });\n      }\n    }\n  }\n\n  update(errors);\n}\n\nlet formCount = 0;\n\nconst ruleMemo = {};\n\ncustomAttribute('onvalidate', (el, rules) => {\n  const formName = el.getAttribute('name') || `defaultForm${formCount++}`;\n  let submit;\n\n  if (typeof rules === 'function') {\n    ruleMemo[formName] = rules;\n  }\n\n  function update(errors) {\n    const currentErrors = errorsStore.getRawState()[formName] || [];\n\n    if (JSON.stringify(errors) === JSON.stringify(currentErrors)) return;\n\n    setErrors(formName, errors);\n  }\n\n  errorsStore.subscribe(state => {\n    if (submit) {\n      submit.disabled = state[formName].length > 0;\n    }\n  });\n\n  const runValidation = e => {\n    const rule = ruleMemo[formName];\n    if (typeof rule !== 'function') return;\n    const validate = rule(e);\n    const { elements } = el;\n    if (validate && typeof validate === 'object' && elements) {\n      for (const element of elements) {\n        const { name } = element;\n\n        if (!element.__radiValidate\n          && typeof name === 'string'\n          && typeof validate[name] === 'function') {\n          element.addEventListener('input', () => {\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          });\n          element.__radiValidate = true;\n\n          element.touched = false;\n          const setTouched = ({ target }) => {\n            target.touched = true;\n            target.removeEventListener('change', setTouched);\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          };\n          element.addEventListener('change', setTouched);\n        }\n\n        if (element.type === 'submit' && element.disabled === true) {\n          submit = element;\n        }\n      }\n\n      fullValidate(\n        elements,\n        validate,\n        update\n      );\n    }\n  };\n\n  el.addEventListener('patch', runValidation);\n  el.addEventListener('mount', runValidation, false);\n}, {\n  allowedTags: [\n    'form',\n  ],\n});\n","import { errorsStore } from '../attributes';\n\nexport function Errors({ name, onrender = (e) => (e) }) {\n  const errors = errorsStore.state;\n\n  if (typeof name === 'undefined') {\n    console.warn('[Radi.js] Warn: Every <errors> tag needs to have `name` attribute!');\n  }\n  if (typeof onrender !== 'function') {\n    console.warn('[Radi.js] Warn: Every <errors> tag needs to have `onrender` attribute!');\n  }\n\n  if (!errors[name]) {\n    return null;\n  }\n\n  return onrender(errors[name]);\n}\n","function areAnyLoading(src) {\n  if (Array.isArray(src)) {\n    return src.reduce(\n      (acc, data) => areAnyLoading(data) || acc,\n      false\n    );\n  }\n\n  return src && src.loading && src.loading.state\n}\n\nexport function Loading({\n  src,\n  children,\n  placeholder = children,\n  isLoading = areAnyLoading(src),\n}) {\n  if (!src) return children;\n  if (isLoading) return placeholder;\n\n  return children;\n}\n","import { Service } from '../../service';\nimport { Store, Action } from '../../store';\nimport { html } from '../../html';\n\nconst h = html;\n\nconst registerModal = Action('Register Modal');\nconst switchModal = Action('Switch Modal');\n\nexport const ModalStore = Store({}, null)\n  .on(registerModal, (store, name) => ({\n    ...store,\n    [name]: false,\n  }))\n  .on(switchModal, (store, name, type) => ({\n    ...store,\n    [name]: type,\n  }));\n\nexport function Modal({ name = 'default', children }) {\n  const modal = ModalStore.state;\n\n  if (typeof name === 'undefined') {\n    console.warn('[Radi.js] Warn: Every <modal> tag needs to have `name` attribute!');\n  }\n\n  this.onMount = () => {\n    if (!modal[name]) {\n      registerModal(name);\n    }\n  };\n\n  return modal[name] && h('div',\n    { class: 'radi-modal', name },\n    h('div', {\n      class: 'radi-modal-backdrop',\n      onclick: () => ModalService.close(name),\n    }),\n    h('div',\n      { class: 'radi-modal-content' },\n      ...(children.slice())\n    )\n  );\n}\n\nexport const ModalService = Service.add('Modal', () => (\n  {\n    open: (name) => switchModal(name, true),\n    close: (name) => switchModal(name, false),\n    onOpen: (name, fn) => (\n      ModalStore.subscribe((n, p) => n[name] === true && n[name] !== p[name] && fn())\n    ),\n    onClose: (name, fn) => (\n      ModalStore.subscribe((n, p) => n[name] === false && n[name] !== p[name] && fn())\n    ),\n  }\n));\n","import { flatten } from './utils';\nimport {\n  evaluate,\n  fireEvent,\n  render,\n} from './html';\n\n/**\n * @param  {*} node\n * @param  {HTMLElement} container\n * @returns {{nodes: Structure[], dom: HTMLElement[]}}\n */\nexport function mount(node, container) {\n  const nodes = flatten([evaluate(node)]);\n  const dom = render(nodes, container);\n\n  dom.forEach((item) => {\n    container.appendChild(item);\n    fireEvent('mount', item);\n  });\n\n  return {\n    nodes,\n    dom,\n  };\n}\n","import { destroy } from '../../destroy';\nimport { html } from '../../html';\nimport { mount } from '../../mount';\n\nexport function Portal(data) {\n  const {\n    children,\n    parent = data.on || document.body,\n  } = data;\n  if (this.pointer && this.pointer.__radiUpdateChild) {\n    this.pointer.__radiUpdateChild(undefined, children);\n  }\n  this.onMount = (e) => {\n    mount(html(function (props) {\n      this.onMount = (ev) => {\n        e.target.__radiUpdateChild = this.update;\n        e.target.__radiPoint.dom[0].__radiRef = ev.target.__radiPoint;\n      };\n      return props.children.length > 0 ? props.children : children;\n    }), parent);\n  };\n\n  this.onDestroy = (e) => {\n    destroy(e.target.__radiPoint.dom[0].__radiRef.dom);\n  };\n\n  return null;\n}\n","export default {\n  NODE: 0,\n  TEXT: 1,\n  COMPONENT: 2,\n};\n","\n/**\n * @param  {string} type\n * @param  {HTMLElement} $node\n * @return {HTMLElement}\n */\nexport function fireEvent(type, $node, $element = $node) {\n  const onEvent = document.createEvent('Event');\n  onEvent.initEvent(type, false, true);\n\n  if (typeof $element.dispatchEvent === 'function') {\n    $element.dispatchEvent(onEvent);\n  }\n\n  return $node;\n}\n","\n/**\n * @param  {HTMLElement} newNode\n * @param  {HTMLElement} $reference\n * @param  {HTMLElement} $parent\n * @return {HTMLElement}\n */\nexport function insertAfter(newNode, $reference, $parent) {\n  if (!$parent) $parent = $reference.parentNode;\n\n  if (newNode instanceof Node) {\n    if ($reference === null || $reference === undefined) {\n      return $parent.insertBefore(newNode, $reference);\n    }\n\n    if ($reference instanceof Node) {\n      return $parent.insertBefore(newNode, $reference.nextSibling);\n    }\n  }\n\n  return newNode;\n}\n","import { Component } from '../component';\nimport TYPE from '../consts/types';\nimport { mount } from '../mount';\nimport { setProps } from '.';\n\nexport function render(node, parent) {\n  if (Array.isArray(node)) {\n    return node.map((item) => render(item, parent));\n  }\n\n  if (node.type === TYPE.TEXT) {\n    return document.createTextNode(node.query);\n  }\n\n  if (node.type === TYPE.NODE) {\n    let element;\n    if (node.query === 'svg' || parent instanceof SVGElement) {\n      element = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        node.query\n      );\n    } else {\n      element = document.createElement(node.query);\n    }\n\n    mount(node.children, element);\n\n    // set attributes\n    setProps(element, node.props);\n\n    return element;\n  }\n\n  if (node.type === TYPE.COMPONENT) {\n    if (!node.pointer) {\n      node.pointer = document.createTextNode('');\n      node.pointer.__radiPoint = node;\n    }\n\n    node.source = new Component(node);\n\n    let $styleRef;\n\n    node.pointer.addEventListener('mount', (e) => {\n      node.update();\n      if (typeof node.source.style === 'string') {\n        $styleRef = document.createElement('style');\n        $styleRef.innerHTML = node.source.style;\n        document.head.appendChild($styleRef);\n      }\n      node.source.trigger('mount', e);\n      node.mounted = true;\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n\n    node.pointer.addEventListener('destroy', (e) => {\n      node.source.trigger('destroy', e);\n      if ($styleRef instanceof Node) {\n        document.head.removeChild($styleRef);\n      }\n      node.mounted = false;\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n\n    return node.pointer;\n  }\n\n  return document.createTextNode(node.toString());\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport { Listener } from '../store/Store';\n\n/**\n * @param {*} value\n * @param {Function} fn\n * @returns {*}\n */\nfunction autoUpdate(value, fn) {\n  if (value instanceof Listener) {\n    return fn(value.getValue(e => fn(value.map(e))));\n  }\n\n  return fn(value);\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nfunction setBooleanProp($target, name, value) {\n  if (value) {\n    $target.setAttribute(name, value);\n    $target[name] = true;\n  } else {\n    $target[name] = false;\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n */\nfunction removeBooleanProp($target, name) {\n  $target.removeAttribute(name);\n  $target[name] = false;\n}\n\n/**\n * @param {string} name\n * @returns {boolean}\n */\nfunction isEventProp(name) {\n  return /^on/.test(name);\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction extractEventName(name) {\n  return name.replace(/^on/, '').toLowerCase();\n}\n\n/**\n * @param {string} name\n * @returns {boolean}\n */\nfunction isCustomProp(name) {\n  return isEventProp(name);\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function setProp($target, name, value) {\n  if (typeof GLOBALS.CUSTOM_ATTRIBUTES[name] !== 'undefined') {\n    const { allowedTags, addToElement, caller } = GLOBALS.CUSTOM_ATTRIBUTES[name];\n\n    if (!allowedTags || (\n      allowedTags\n      && allowedTags.length > 0\n      && allowedTags.indexOf($target.localName) >= 0\n    )) {\n      if (typeof caller === 'function') {\n        value = caller($target, value);\n      }\n      if (!addToElement) return;\n    }\n  }\n\n  if (name === 'model') {\n    name = 'value';\n  } else\n  if (name === 'class' || name === 'className') {\n    if (Array.isArray(value)) {\n      value = value.filter(v => v && typeof v !== 'function').join(' ');\n    }\n  }\n\n  if (name === 'style' && typeof value !== 'string') {\n    setStyles($target, value);\n  } else if (isCustomProp(name)) {\n    addEventListener($target, name, value);\n  } else if (name === 'className') {\n    $target.setAttribute('class', value);\n  } else if (typeof value === 'boolean') {\n    setBooleanProp($target, name, value);\n  } else {\n    if (name === 'value' && document.activeElement !== $target) {\n      $target[name] = value;\n    }\n    $target.setAttribute(name, value);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function removeProp($target, name, value) {\n  if (isCustomProp(name)) {\n    return;\n  }\n\n  if (name === 'className') {\n    $target.removeAttribute('class');\n  } else if (typeof value === 'boolean') {\n    removeBooleanProp($target, name);\n  } else {\n    $target.removeAttribute(name);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} styles\n */\nexport function setStyles($target, styles) {\n  Object.keys(styles).forEach(name => {\n    autoUpdate(styles[name], value => {\n      $target.style[name] = value;\n    });\n  });\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} props\n */\nexport function setProps($target, props) {\n  (Object.keys(props || {})).forEach(name => {\n    autoUpdate(props[name], value => {\n      setProp($target, name, value);\n    });\n  });\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isRemovableProp(value) {\n  return typeof value === 'undefined' || value === false || value === null;\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} newVal\n * @param {*} oldVal\n */\nexport function updateProp($target, name, newVal, oldVal) {\n  if (isRemovableProp(newVal)) {\n    removeProp($target, name, oldVal);\n  } else if (!oldVal || newVal !== oldVal) {\n    setProp($target, name, newVal);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} newProps\n * @param {{}} oldProps = {}\n */\nexport function updateProps($target, newProps, oldProps = {}) {\n  const props = Object.assign({}, newProps, oldProps);\n\n  if (typeof $target.__radiHandlers !== 'undefined') {\n    $target.__radiHandlers.forEach((event) => {\n      $target.removeEventListener(...event);\n    });\n\n    $target.__radiHandlers = [];\n  }\n\n  Object.keys(props).forEach(name => {\n    autoUpdate(newProps[name], value => {\n      if (name === 'model') {\n        name = 'value';\n      }\n      updateProp($target, name, value, oldProps[name]);\n    });\n  });\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function addEventListener($target, name, value) {\n  const exceptions = ['mount', 'destroy'];\n  if (isEventProp(name)) {\n    if (typeof $target.__radiHandlers === 'undefined') {\n      $target.__radiHandlers = [];\n    }\n    const event = [\n      extractEventName(name),\n      (e) => {\n        if (exceptions.indexOf(name) >= 0) {\n          if ($target === e.target) value(e);\n        } else\n        if (typeof value === 'function') {\n          value(e);\n        }\n      },\n    ];\n    $target.__radiHandlers.push(event);\n    $target.addEventListener(\n      event[0],\n      event[1],\n      false\n    );\n  }\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport TYPE from '../consts/types';\nimport { destroy } from '../destroy';\nimport { fireEvent } from './fireEvent';\nimport { insertAfter } from './insertAfter';\nimport { render } from './render';\nimport { updateProps } from './props';\n\n/**\n * @param {NamedNodeMap} value\n * @returns {{}}\n */\nfunction attributesToObject(value) {\n  return [].reduce.call(value, (acc, obj) => ({\n    ...acc,\n    [obj.name]: obj.value,\n  }), {});\n}\n\nfunction withoutInnerChilds(dom) {\n  const childrenOfComponents = Array.prototype.filter.call(\n    dom.childNodes,\n    d => typeof d.__radiPoint !== 'undefined'\n  )\n    .reduce((acc, d) => [...acc, ...d.__radiPoint.dom], []);\n\n  return Array.prototype.filter.call(\n    dom.childNodes,\n    d => childrenOfComponents.indexOf(d) < 0\n  );\n}\n\n/**\n * @param  {Structure} structure\n * @param  {HTMLElement} dom\n * @param  {HTMLElement} parent\n * @param  {HTMLElement} last\n * @returns {{ newDom: HTMLElement, newStucture: Structure, last: HTMLElement }}\n */\nexport function patch(structure, dom, parent, last) {\n  let newStucture;\n  let newDom;\n  if (!dom) {\n    // add\n    newDom = fireEvent('mount', insertAfter(render(newStucture = structure), last, parent));\n    last = newDom;\n  } else\n  if (!structure) {\n    // remove\n    destroy(dom);\n  } else {\n    // replace\n    if (structure.type === TYPE.NODE) {\n      const patchNewDom = structure;\n      const patchOldDom = dom;\n      const patchOldDomChildren = withoutInnerChilds(dom);\n\n      if (patchOldDom.nodeName === patchNewDom.query.toUpperCase()) {\n        const oldAttrs = attributesToObject(patchOldDom.attributes);\n\n        if (patchOldDomChildren || patchNewDom.children) {\n          const length = Math.max(patchOldDomChildren.length, patchNewDom.children.length);\n\n          /* We should always run patch childnodes in reverse from last to first\n            because if node is removed, it removes whole element in array */\n          for (let ii = length - 1; ii >= 0; ii--) {\n            patch(\n              patchNewDom.children[ii],\n              patchOldDomChildren[ii],\n              patchOldDom\n            );\n          }\n        }\n\n        updateProps(patchOldDom, patchNewDom.props, oldAttrs);\n\n        newStucture = structure;\n        newDom = fireEvent('patch', dom);\n        return { newDom, newStucture, last };\n      }\n    }\n\n    if (structure.type === TYPE.TEXT && dom.nodeType === 3 && !dom.__radiPoint) {\n      if (dom.textContent !== structure.query) {\n        dom.textContent = structure.query;\n      }\n\n      newStucture = structure;\n      newDom = dom;\n      return { newDom, newStucture, last };\n    }\n\n    if (structure.type === TYPE.COMPONENT) {\n      if (dom && dom.__radiPoint\n          && structure.query.name === dom.__radiPoint.query.name\n          && dom.__radiPoint.source.cached === true) {\n        GLOBALS.USE_CACHE = true;\n\n        structure.pointer = dom.__radiPoint.pointer;\n        structure.dom = dom.__radiPoint.dom;\n      }\n\n      if (dom.__radiPoint && dom.__radiPoint.query === structure.query) {\n        dom.__radiPoint.update(structure.props, structure.children);\n\n        newStucture = dom.__radiPoint;\n        newDom = dom;\n        return { newDom, newStucture, last };\n      }\n    }\n\n    newDom = fireEvent('mount', insertAfter(render(newStucture = structure), dom, parent));\n    last = newDom;\n    if (last.__radiPoint && last.__radiPoint && last.__radiPoint.dom) {\n      last = last.__radiPoint.dom[last.__radiPoint.dom.length - 1];\n    }\n    destroy(dom);\n  }\n\n  return { newDom, newStucture, last };\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport { evaluate } from './evaluate';\nimport { fireEvent } from './fireEvent';\nimport { flatten } from '../utils';\nimport { insertAfter } from './insertAfter';\nimport { patch } from './patch';\nimport { render } from './render';\n\n/**\n * @param {{}} props\n * @param {[]} children\n * @returns {HTMLElement}\n */\nexport function renderComponent(props = this.props, children = this.children) {\n  const oldProps = { ...this.props };\n  // const oldChildren = [...this.children];\n  if (props) this.props = props;\n  if (children) this.children = children;\n\n  if (this.source && typeof this.source.shouldUpdate === 'function'\n    && !this.source.shouldUpdate(props, oldProps)) {\n    return this.dom;\n  }\n  const component = flatten([evaluate(\n    this.query.call(this.source, {\n      ...this.props,\n      children: this.children,\n    })\n  )]);\n\n  if (!this.dom) {\n    const rendered = render(this.domStructure = component);\n\n    return this.dom = rendered\n      .reverse()\n      .map((item) => fireEvent('mount', insertAfter(item, this.pointer)))\n      .reverse();\n  }\n\n  if (GLOBALS.USE_CACHE) {\n    GLOBALS.USE_CACHE = false;\n\n    return this.dom;\n  }\n\n  const active = document.activeElement;\n  const scrollPosition = window.scrollY;\n\n  if (this.pointer.parentNode === null) return this.dom;\n\n  const length = Math.max(this.dom.length, component.length);\n  let lastEl = this.pointer;\n  const newDom = [];\n  const newStucture = [];\n  for (let i = 0; i <= length - 1; i++) {\n    const output = patch(component[i], this.dom[i], this.pointer.parentNode, lastEl);\n    if (output.last) lastEl = output.last;\n    if (output.newDom) newDom[i] = output.newDom;\n    if (output.newStucture) newStucture[i] = output.newStucture;\n  }\n\n  active.focus();\n  window.scrollTo(0, scrollPosition);\n\n  this.domStructure = newStucture;\n  return this.dom = newDom;\n}\n","import { Await } from '../custom/tags';\nimport GLOBALS from '../consts/GLOBALS';\nimport { Listener } from '../store/Store';\nimport TYPE from '../consts/types';\nimport { flatten } from '../utils';\nimport { renderComponent } from './renderComponent';\n\nexport function isNode(value) {\n  return value && typeof value === 'object'\n    && typeof value.query !== 'undefined'\n    && typeof value.props !== 'undefined'\n    && typeof value.children !== 'undefined';\n}\n\nfunction updater(comp) {\n  return (...args) => {\n    const tempComponent = GLOBALS.CURRENT_COMPONENT;\n    GLOBALS.CURRENT_COMPONENT = comp;\n    const output = renderComponent.call(comp, ...args);\n\n    GLOBALS.CURRENT_COMPONENT = tempComponent;\n    return output;\n  };\n}\n\nexport function evaluate(node) {\n  if (Array.isArray(node)) {\n    return flatten(node).map(evaluate);\n  }\n\n  if (typeof node === 'function') {\n    return evaluate(node());\n  }\n\n  if (node instanceof Promise || (node && node.constructor.name === 'LazyPromise')) {\n    return evaluate({\n      query: Await,\n      props: {\n        src: node,\n      },\n      children: [],\n    });\n  }\n\n  if (node instanceof Listener) {\n    const comp = {\n      query: node.update,\n      type: TYPE.COMPONENT,\n      props: {},\n      children: [],\n      pointer: null,\n      dom: null,\n    };\n    comp.update = updater(comp);\n\n    node.link(() => (\n      comp.dom !== null && comp.update()\n    ));\n\n    return comp;\n  }\n\n  if (node && typeof node.type === 'number') return node;\n  if (isNode(node)) {\n    if (typeof node.query === 'function') {\n      const comp = {\n        ...node,\n        type: TYPE.COMPONENT,\n        pointer: null,\n        dom: null,\n      };\n      comp.update = updater(comp);\n      return comp;\n    }\n\n    return {\n      ...node,\n      type: TYPE.NODE,\n      children: evaluate(flatten(node.children)),\n    };\n  }\n\n  if (!node && typeof node !== 'string' && typeof node !== 'number') {\n    return {\n      // query: node,\n      query: '',\n      type: TYPE.TEXT,\n    };\n  }\n\n  return {\n    query: node.toString(),\n    type: TYPE.TEXT,\n  };\n}\n","import { Await } from '../custom/tags';\nimport { flatten } from '../utils';\n\n/**\n * @typedef {Object} Node\n * @property {string|function} query\n * @property {{}} props\n * @property {*[]} children\n */\n\n/**\n * @param  {*} preQuery\n * @param  {{}} preProps\n * @param  {*[]} preChildren\n * @return {Node}\n */\nexport function html(preQuery, preProps, ...preChildren) {\n  let query = (typeof preQuery === 'number') ? `${preQuery}` : preQuery;\n  let props = preProps || {};\n  const children = flatten(preChildren);\n\n  if (query instanceof Promise || (query && query.constructor.name === 'LazyPromise')) {\n    query = Await;\n    props = {\n      src: preQuery,\n    };\n  }\n\n  return {\n    query,\n    props,\n    children,\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param  {Function} fn\n * @return {Function}\n */\nexport function onDestroy(fn) {\n  const component = GLOBALS.CURRENT_COMPONENT;\n\n  if (component && component.source) {\n    component.source.onDestroy = fn;\n  }\n\n  return fn;\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param  {Function} fn\n * @return {Function}\n */\nexport function onMount(fn) {\n  const component = GLOBALS.CURRENT_COMPONENT;\n\n  if (component && component.source) {\n    component.source.onMount = fn;\n  }\n\n  return fn;\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param  {Function} fn\n * @return {Function}\n */\nexport function shouldUpdate(fn) {\n  const component = GLOBALS.CURRENT_COMPONENT;\n\n  if (component && component.source) {\n    component.source.shouldUpdate = fn;\n  }\n\n  return fn;\n}\n","import { destroyTree } from './html';\nimport { ensureArray } from './utils';\n\n/**\n * @param  {HTMLElement} node\n * @param  {function} next\n */\nexport function beforeDestroy(node, next) {\n  if (typeof node.beforedestroy === 'function') {\n    return node.beforedestroy(next);\n  }\n\n  return next();\n}\n\n/**\n * @param  {*|*[]} data\n */\nexport function destroy(data) {\n  const nodes = ensureArray(data);\n\n  nodes.forEach(node => {\n    if (!(node instanceof Node)) return;\n\n    if (node.__radiPoint && node.__radiPoint.dom && node.__radiPoint.dom.length > 0) {\n      node.__radiPoint.dom.forEach(destroy);\n    }\n\n    const parent = node.parentNode;\n    if (node instanceof Node && parent instanceof Node) {\n      beforeDestroy(node, () => {\n        // This is for async node removals\n        destroyTree(node);\n        parent.removeChild(node);\n      });\n    }\n  });\n}\n","import GLOBALS from './consts/GLOBALS';\nimport { Service } from './service';\nimport { destroy } from './destroy';\nimport { mount } from './mount';\nimport {\n  Await,\n  Errors,\n  Loading,\n  Modal,\n  Portal,\n} from './custom';\nimport {\n  Action,\n  Effect,\n  Event,\n  Listen,\n  Merge,\n  Store,\n  Watch,\n} from './store';\nimport {\n  customAttribute,\n  html,\n  patch,\n  onDestroy,\n  onMount,\n  shouldUpdate,\n} from './html';\n\nconst Radi = {\n  v: GLOBALS.VERSION,\n  version: GLOBALS.VERSION,\n  h: html,\n  html,\n  customAttribute,\n  destroy,\n  patch,\n  mount,\n  Service,\n\n  onDestroy,\n  onMount,\n  shouldUpdate,\n\n  Action,\n  action: Action,\n  Effect,\n  effect: Effect,\n  Event,\n  event: Event,\n  Listen,\n  listen: Listen,\n  Merge,\n  merge: Merge,\n  Store,\n  store: Store,\n  Watch,\n  watch: Watch,\n\n  Await,\n  Errors,\n  Modal,\n  Portal,\n  Loading,\n};\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (typeof window !== 'undefined') window.Radi = Radi;\nexport default Radi;\n"],"names":["const","destroyTree","let","this","component","schema","render","comp"],"mappings":"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"}