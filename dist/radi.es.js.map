{"version":3,"file":"radi.es.js","sources":["../src/consts/GLOBALS.js","../src/utils/flatten.js","../src/utils/generateId.js","../src/component/utils/PrivateStore.js","../src/utils/clone.js","../src/utils/skipInProductionAndTest.js","../src/listen/Listener.js","../src/r/utils/append.js","../src/r/mountChildren.js","../src/r/utils/textNode.js","../src/mount.js","../src/r/utils/getElementFromQuery.js","../src/r/utils/explode.js","../src/r/utils/parseValue.js","../src/r/setStyles.js","../src/r/utils/parseClass.js","../src/r/setAttributes.js","../src/r/Structure.js","../src/r/patch.js","../src/component/Component.js","../src/component/utils/isComponent.js","../src/r/utils/filterNode.js","../src/r/index.js","../src/listen/index.js","../src/component/headless.js","../src/action/index.js","../src/action/worker.js","../src/action/subscribe.js","../src/r/customTag.js","../src/r/customAttribute.js","../src/utils/remountActiveComponents.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  HEADLESS_COMPONENTS: {},\n  FROZEN_STATE: false,\n  VERSION: '0.3.27',\n  // TODO: Collect active components\n  ACTIVE_COMPONENTS: {},\n  CUSTOM_ATTRIBUTES: {},\n  CUSTOM_TAGS: {},\n};\n\nexport default GLOBALS;\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nconst flatten = function flatten(list) {\n  return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n};\n\nexport default flatten;\n","/**\n * UUID v4 generator\n * https://gist.github.com/jcxplorer/823878\n * @returns {string}\n */\nconst generateId = () => {\n  let uuid = '';\n  for (let i = 0; i < 32; i++) {\n    const random = (Math.random() * 16) | 0; // eslint-disable-line\n\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      uuid += '-';\n    }\n    uuid += (i === 12 ? 4 : i === 16 ? (random & 3) | 8 : random).toString(16); // eslint-disable-line\n  }\n  return uuid;\n};\n\nexport default generateId;\n","export default class PrivateStore {\n  constructor() {\n    this.store = {};\n  }\n\n  /**\n   * @param {string} key\n   * @param {Listener} listener\n   * @param {number} depth\n   */\n  addListener(key, listener, depth) {\n    if (typeof this.store[key] === 'undefined') {\n      this.createItemWrapper(key);\n    }\n    this.store[key].listeners[depth] = (this.store[key].listeners[depth] || []).filter(item => (\n      item.attached\n    ));\n    this.store[key].listeners[depth].push(listener);\n\n    return listener;\n  }\n\n  /**\n   * Removes all listeners for all keys\n   */\n  removeListeners() {\n    let o = Object.keys(this.store);\n    for (var i = 0; i < o.length; i++) {\n      this.store[o[i]].listeners = {};\n      this.store[o[i]].value = null;\n    }\n  }\n\n  /**\n   * setState\n   * @param {*} newState\n   * @returns {*}\n   */\n  setState(newState) {\n    // Find and trigger changes for listeners\n    for (const key of Object.keys(newState)) {\n      if (typeof this.store[key] === 'undefined') {\n        this.createItemWrapper(key);\n      }\n      this.store[key].value = newState[key];\n\n      this.triggerListeners(key);\n    }\n    return newState;\n  }\n\n  /**\n   * createItemWrapper\n   * @private\n   * @param {string} key\n   * @returns {object}\n   */\n  createItemWrapper(key) {\n    return this.store[key] = {\n      listeners: {},\n      value: null,\n    };\n  }\n\n  /**\n   * triggerListeners\n   * @private\n   * @param {string} key\n   */\n  triggerListeners(key) {\n    const item = this.store[key];\n    if (item) {\n      let clone = Object.keys(item.listeners)\n        .sort()\n        .map(key => (\n          item.listeners[key].map(listener => listener)\n        ));\n\n      for (var i = 0; i < clone.length; i++) {\n        for (var n = clone[i].length - 1; n >= 0; n--) {\n          if (clone[i][n].attached) clone[i][n].handleUpdate(item.value)\n        }\n      }\n    }\n  }\n}\n","/**\n * @param {*} obj\n * @returns {*}\n */\nconst clone = obj => {\n  if (typeof obj !== 'object') return obj;\n  if (obj === null) return obj;\n  if (Array.isArray(obj)) return obj.map(clone);\n\n  /*eslint-disable*/\n  // Reverted as currently throws some errors\n  const cloned = {};\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      cloned[key] = clone(obj[key]);\n    }\n  }\n  /* eslint-enable */\n\n  return cloned;\n};\n\nexport default clone;\n","const skipInProductionAndTest = fn => {\n  if (typeof process === 'undefined'\n    || (process.env.NODE_ENV === 'production'\n    || process.env.NODE_ENV === 'test')) {\n    return false;\n  }\n  return fn && fn();\n};\n\nexport default skipInProductionAndTest;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-shadow */\n/* eslint-disable guard-for-in */\n/* eslint-disable no-restricted-syntax */\n// import fuseDom from '../r/utils/fuseDom';\n\nexport default class Listener {\n  /**\n   * @param {Component} component\n   * @param {...string} path\n   */\n  constructor(component, ...path) {\n    this.component = component;\n    [this.key] = path;\n    this.path = path.slice(1, path.length);\n    this.depth = 0;\n    this.attached = true;\n    this.processValue = value => value;\n    this.changeListener = () => {};\n    this.addedListeners = [];\n  }\n\n  /**\n   * Applies values and events to listener\n   */\n  init() {\n    this.value = this.getValue(this.component.state[this.key]);\n    this.component.addListener(this.key, this, this.depth);\n    this.handleUpdate(this.component.state[this.key]);\n    return this;\n  }\n\n  /**\n   * Removes last active value with destroying listeners and\n   * @param {*} value\n   */\n  unlink() {\n    if (this.value instanceof Node) {\n      // Destroy this Node\n      // fuseDom.destroy(this.value);\n    } else\n    if (this.value instanceof Listener) {\n      // Deattach this Listener\n      this.value.deattach();\n    }\n  }\n\n\n  clone(target, source) {\n    const out = {};\n\n    for (const i in target) {\n      out[i] = target[i];\n    }\n    for (const i in source) {\n      out[i] = source[i];\n    }\n\n    return out;\n  }\n\n  setPartialState(path, value, source) {\n    const target = {};\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? this.setPartialState(path.slice(1), value, source[path[0]])\n          : value;\n      return this.clone(source, target);\n    }\n    return value;\n  }\n\n  /**\n   * Updates state value\n   * @param {*} value\n   */\n  updateValue(value) {\n    const source = this.component.state[this.key];\n    return this.component.setState({\n      [this.key]: this.setPartialState(this.path, value, source),\n    });\n  }\n\n  extractListeners(value) {\n    // if (this.value instanceof Listener && value instanceof Listener) {\n    //   console.log('middle')\n    // } else\n    if (value instanceof Listener) {\n      // if (this.value instanceof Listener) {\n      //   this.value.processValue = value.processValue;\n      //   // this.value = value;\n      // this.handleUpdate(value.getValue(value.component.state[value.key]));\n      // console.log(value, value.getValue(value.component.state[value.key]));\n      // value.deattach();\n      // }\n      // value.component.addListener(value.key, value, value.depth);\n      // value.handleUpdate = () => {\n      //   console.log('inner handler')\n      // }\n      const tempListener = {\n        depth: value.depth,\n        attached: true,\n        processValue: value => value,\n        handleUpdate: () => {\n          if (this.component) {\n            this.handleUpdate(this.getValue(this.component.state[this.key]));\n          }\n          tempListener.attached = false;\n        },\n        changeListener: () => {},\n      };\n      this.addedListeners.push(tempListener);\n      value.component.addListener(value.key, tempListener, value.depth);\n      // value.init()\n      // value.handleUpdate = () => {\n      //   console.log('inner handler')\n      // }\n      // value.onValueChange((v) => {\n      //   this.handleUpdate(this.getValue(this.component.state[this.key]));\n      //   console.log('me got changed', v)\n      // });\n      const newValue = value.processValue(\n        value.getValue(value.component.state[value.key])\n      );\n      value.deattach();\n      return this.extractListeners(newValue);\n    }\n    return value;\n\n    // return this.processValue(this.getValue(value));\n  }\n\n  /**\n   * @param {*} value\n   */\n  handleUpdate(value) {\n    const newValue = this.processValue(this.getValue(value));\n    // if (this.value instanceof Listener && newValue instanceof Listener) {\n    //   this.value.processValue = newValue.processValue;\n    //   // this.value = newValue;\n    //   this.value.handleUpdate(newValue.component.state[newValue.key]);\n    //   console.log(newValue, newValue.getValue(newValue.component.state[newValue.key]));\n    //   newValue.deattach();\n    // } else\n    if (newValue instanceof Listener) {\n      // if (this.value instanceof Listener) {\n      //   this.value.processValue = newValue.processValue;\n      //   // this.value = newValue;\n      //   this.value.handleUpdate(newValue.component.state[newValue.key]);\n      //   console.log(newValue, newValue.getValue(newValue.component.state[newValue.key]));\n      //   newValue.deattach();\n      // } else {\n      for (let i = 0; i < this.addedListeners.length; i++) {\n        this.addedListeners[i].attached = false;\n      }\n      this.addedListeners = [];\n      this.value = this.extractListeners(newValue);\n      this.changeListener(this.value);\n      // }\n      // // console.log(this.value.processValue('P'), newValue.processValue('A'));\n      // // console.log(this.extractListeners(newValue));\n      // // newValue.handleUpdate(newValue.component.state[newValue.key]);\n      // // this.value = newValue;\n      // // this.value.processValue = newValue.processValue;\n      // this.value = this.extractListeners(newValue);\n      // this.changeListener(this.value);\n      // // this.value.processValue = newValue.processValue;\n      // // // this.value = newValue;\n      // // this.value.handleUpdate(newValue.component.state[newValue.key]);\n      // // console.log(newValue, newValue.getValue(newValue.component.state[newValue.key]));\n      // // newValue.deattach();\n    } else {\n      this.unlink();\n      this.value = newValue;\n      this.changeListener(this.value);\n    }\n  }\n\n  /**\n   * @param {*} source\n   * @returns {*}\n   */\n  getValue(source) {\n    let i = 0;\n    while (i < this.path.length) {\n      if (source === null\n        || (!source[this.path[i]]\n        && typeof source[this.path[i]] !== 'number')) {\n        source = null;\n      } else {\n        source = source[this.path[i]];\n      }\n      i += 1;\n    }\n    return source;\n  }\n\n  /**\n   * @param {number} depth\n   * @returns {Listener}\n   */\n  applyDepth(depth) {\n    this.depth = depth;\n    return this;\n  }\n\n  /**\n   * @param {function(*)} changeListener\n   */\n  onValueChange(changeListener) {\n    this.changeListener = changeListener;\n    this.changeListener(this.value);\n  }\n\n  /**\n   * @param {function(*): *} processValue\n   * @returns {function(*): *}\n   */\n  process(processValue) {\n    this.processValue = processValue;\n    return this;\n  }\n\n  deattach() {\n    this.component = null;\n    this.attached = false;\n    this.key = null;\n    this.childPath = null;\n    this.path = null;\n    this.unlink();\n    this.value = null;\n    this.changeListener = () => {};\n    this.processValue = () => {};\n  }\n}\n","\n/**\n * Append dom node to dom tree (after - (true) should append after 'to' element\n * or (false) inside it)\n * @param {HTMLElement} node\n * @param {HTMLElement} to\n * @param {Boolean} after\n * @returns {HTMLElement}\n */\nconst append = (node, to, after) => {\n  if (after && to) {\n    if (to.parentNode) {\n      to.parentNode.insertBefore(node, to);\n      // if (!to.nextSibling) {\n      //   to.parentNode.appendChild(node);\n      // } else {\n      //   to.parentNode.insertBefore(node, to.nextSibling || to);\n      // }\n    }\n    return node;\n  }\n\n  return to.appendChild(node);\n};\n\nexport default append;\n","import mount from '../mount';\n\nconst getLast = (child) => {\n  if (child.$redirect && child.$redirect[child.$redirect.length - 1]) {\n    return getLast(child.$redirect[child.$redirect.length - 1]);\n  }\n\n  // if (child.children && child.children.length > 0) {\n  //   return child.children;\n  // }\n\n  return child;\n};\n\n/**\n * @param {Structure} child\n */\nconst mountChildren = (child, isSvg, depth = 0) => {\n  if (!child) return;\n\n  if (child.$redirect && child.$redirect.length > 0) {\n    mountChildren(getLast(child), isSvg, depth + 1);\n  } else if (child.children && child.children.length > 0) {\n    if (child.html && child.html.length === 1) {\n      mount(child.children,\n        child.html[0],\n        child.html[0].nodeType !== 1,\n        child.$isSvg,\n        child.$depth);\n    } else {\n      mount(child.children,\n        child.$pointer,\n        true,\n        child.$isSvg,\n        child.$depth);\n    }\n  }\n};\n\nexport default mountChildren;\n","\n/**\n * @param {string} value\n * @returns {HTMLElement}\n */\nconst textNode = value => (\n  document.createTextNode(\n    (typeof value === 'object'\n    ? JSON.stringify(value)\n    : value)\n  )\n);\n\nexport default textNode;\n","// import Component from './component/Component';\nimport Listener from './listen/Listener';\nimport flatten from './utils/flatten';\nimport filterNode from './r/utils/filterNode';\nimport append from './r/utils/append';\nimport mountChildren from './r/mountChildren';\nimport textNode from './r/utils/textNode';\nimport patch from './r/patch';\n\n/**\n * Appends structure[] to dom node\n * @param {*} component\n * @param {string} id\n * @param {boolean} isSvg\n * @param {number} depth\n * @returns {HTMLElement|Node}\n */\nconst mount = (raw, parent, after = false, isSvg = false, depth = 0) => {\n  parent = typeof parent === 'string' ? document.getElementById(parent) : parent;\n  let nodes = flatten([raw]).map(filterNode);\n\n  // console.log(1, 'MOUNT')\n\n  for (var i = 0; i < nodes.length; i++) {\n    const ni = i;\n    const nn = nodes[i];\n\n    // console.log(2, nodes[i])\n    if (nn instanceof Node) {\n      append(nn, parent, after);\n    } else\n    if (nn && typeof nn.render === 'function') {\n      // nn.$pointer = text('[pointer]');\n      nn.$pointer = textNode('');\n      append(nn.$pointer, parent, after);\n\n      nodes[i].render(rendered => {\n        // console.log(3, rendered)\n\n        // Abort! Pointer was destroyed\n        if (nn.$pointer === false) return false;\n\n        for (var n = 0; n < rendered.length; n++) {\n          if (nn.$pointer) {\n            append(rendered[n], nn.$pointer, true);\n          } else {\n            append(rendered[n], parent, after);\n          }\n        }\n\n        mountChildren(nn, nn.$isSvg, depth + 1);\n      }, nn, depth, isSvg);\n    }\n\n    // if (!nn.html) {\n    //   nn.$pointer = text('[pointer]');\n    //   append(nn.$pointer, parent, after);\n    // }\n  }\n\n  return nodes;\n}\n\nexport default mount;\n","/**\n * @param {*} query\n * @returns {Node}\n */\nconst getElementFromQuery = (query, isSvg) => {\n  if (typeof query === 'string' || typeof query === 'number')\n    return query !== 'template'\n      ? isSvg || query === 'svg'\n        ? document.createElementNS(\n            \"http://www.w3.org/2000/svg\",\n            query\n          )\n        : document.createElement(query)\n      : document.createDocumentFragment();\n  console.warn(\n    '[Radi.js] Warn: Creating a JSX element whose query is not of type string, automatically converting query to string.'\n  );\n  return document.createElement(query.toString());\n};\n\nexport default getElementFromQuery;\n","import filterNode from './filterNode';\nimport Structure from '../Structure';\nimport flatten from '../../utils/flatten';\n\n/**\n * @param {*[]} raw\n * @param {HTMLElement} parent\n * @param {string} raw\n * @returns {HTMLElement}\n */\nconst explode = (raw, parent, next, depth = 0, isSvg) => {\n  let nodes = flatten([raw]).map(filterNode);\n  // console.log('EXPLODE', nodes)\n\n  // console.log('explode', {parent, nodes})\n\n  for (var i = 0; i < nodes.length; i++) {\n    if ((nodes[i] instanceof Structure || nodes[i].isStructure) && !nodes[i].html) {\n      // let pp = depth === 0 ? parent : nodes[i];\n      // let pp = parent;\n      // console.log('EXPLODE 1', parent.$depth, depth, parent.$redirect, nodes[i].$redirect)\n      if (parent.children.length <= 0) {\n        if (!parent.$redirect) {\n          parent.$redirect = [nodes[i]];\n        } else {\n          parent.$redirect.push(nodes[i]);\n        }\n      }\n\n      if (!parent.$redirect && nodes[i].children) {\n        parent.children = parent.children.concat(nodes[i].children);\n      }\n\n      if (typeof nodes[i].render === 'function') {\n        const n = i;\n        nodes[i].render(v => {\n          // if (parent.children.length <= 0) {\n          //   if (!parent.$redirect) {\n          //     parent.$redirect = [nodes[n]];\n          //   } else {\n          //     parent.$redirect.push(nodes[n]);\n          //   }\n          // }\n          // console.log('EXPLODE 2', nodes[n], v, parent.$depth, nodes[n].$depth)\n          next(v);\n          // nodes[n].mount();\n        }, nodes[i], depth + 1, isSvg);\n      }\n    }\n  }\n\n  return;\n}\n\nexport default explode;\n","/**\n * @param {*} value\n * @return {*}\n */\nconst parseValue = value =>\n  typeof value === 'number' && !Number.isNaN(value) ? `${value}px` : value;\n\nexport default parseValue;\n","/* eslint-disable no-continue */\n/* eslint-disable no-prototype-builtins */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-multi-assign */\n\nimport Listener from '../listen/Listener';\nimport parseValue from './utils/parseValue';\n\n/**\n * @param {Structure} structure\n * @param {object} styles\n * @param {object} oldStyles\n * @returns {object}\n */\nconst setStyles = (structure, styles = {}, oldStyles = {}) => {\n  if (!structure.html || !structure.html[0]) return styles;\n  const element = structure.html[0];\n\n  // Handle Listeners\n  if (styles instanceof Listener) {\n    if (typeof structure.$styleListeners.general !== 'undefined') {\n      return element.style;\n    }\n    structure.$styleListeners.general = styles;\n    structure.$styleListeners.general.applyDepth(structure.depth).init();\n\n    structure.$styleListeners.general.onValueChange(value => {\n      setStyles(structure, value, {});\n    });\n\n    return element.style;\n  }\n\n  if (typeof styles === 'string') {\n    element.style = styles;\n    return element.style;\n  }\n\n  const toRemove = Object.keys(oldStyles)\n    .filter(key => typeof styles[key] === 'undefined');\n\n  for (const style in styles) {\n    if (styles.hasOwnProperty(style)) {\n      // Skip if styles are the same\n      if (typeof oldStyles !== 'undefined' && oldStyles[style] === styles[style]) continue;\n\n      // Need to remove falsy style\n      if (!styles[style] && typeof styles[style] !== 'number') {\n        element.style[style] = null;\n        continue;\n      }\n\n      // Handle Listeners\n      if (styles[style] instanceof Listener) {\n        if (typeof structure.$styleListeners[style] !== 'undefined') continue;\n        structure.$styleListeners[style] = styles[style];\n        structure.$styleListeners[style].applyDepth(structure.depth).init();\n\n        structure.$styleListeners[style].onValueChange(value => {\n          setStyles(structure, {\n            [style]: value,\n          }, {});\n        });\n\n        styles[style] = structure.$styleListeners[style].value;\n        continue;\n      }\n\n      element.style[style] = parseValue(styles[style]);\n    }\n  }\n\n  for (let i = 0; i < toRemove.length; i++) {\n    element.style[toRemove[i]] = null;\n  }\n\n  return element.style;\n};\n\nexport default setStyles;\n","/**\n * @param {*} value\n * @return {*}\n */\nconst parseClass = value => {\n  if (Array.isArray(value)) {\n    return value.filter(item => item).join(' ')\n  }\n  return value;\n}\n\nexport default parseClass;\n","/* eslint-disable no-continue */\n/* eslint-disable no-prototype-builtins */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-param-reassign */\n\nimport setStyles from './setStyles';\nimport Listener from '../listen/Listener';\nimport parseClass from './utils/parseClass';\nimport GLOBALS from '../consts/GLOBALS';\n// import AttributeListener from './utils/AttributeListener';\n\n/**\n * @param {Structure} structure\n * @param {object} propsSource\n * @param {object} oldPropsSource\n */\nconst setAttributes = (structure, propsSource = {}, oldPropsSource = {}) => {\n  const props = propsSource || {};\n  const oldProps = oldPropsSource || {};\n\n  if (!structure.html || !structure.html[0]) return structure;\n  const element = structure.html[0];\n\n  if (!(element instanceof Node && element.nodeType !== 3)) return structure;\n\n  const toRemove = Object.keys(oldProps)\n    .filter(key => typeof props[key] === 'undefined');\n\n  for (const prop in props) {\n    if (props.hasOwnProperty(prop)) {\n      // Skip if proprs are the same\n      if (typeof oldProps !== 'undefined' && oldProps[prop] === props[prop]) continue;\n\n      // Need to remove falsy attribute\n      if (!props[prop] && typeof props[prop] !== 'number') {\n        element.removeAttribute(prop);\n        continue;\n      }\n\n      if ((prop === 'value' || prop === 'model') && !(props[prop] instanceof Listener)) {\n        if (/(checkbox|radio)/.test(element.getAttribute('type'))) {\n          element.checked = props[prop];\n        } else {\n          element.value = props[prop];\n        }\n      }\n\n      // Handle Listeners\n      if (props[prop] instanceof Listener) {\n        if (typeof structure.$attrListeners[prop] !== 'undefined') continue;\n        structure.$attrListeners[prop] = props[prop];\n        props[prop].applyDepth(structure.depth).init();\n\n        if (prop.toLowerCase() === 'model') {\n          if (/(checkbox|radio)/.test(element.getAttribute('type'))) {\n            element.addEventListener('change', (e) => {\n              structure.$attrListeners[prop].updateValue(e.target.checked);\n            });\n          } else {\n            element.addEventListener('input', (e) => {\n              structure.$attrListeners[prop].updateValue(e.target.value);\n            });\n          }\n        }\n\n        structure.$attrListeners[prop].onValueChange(value => {\n          setAttributes(structure, {\n            [prop]: value,\n          }, {});\n          // props[prop] = value;\n        });\n\n        // structure.setProps(Object.assign(structure.data.props, {\n        //   [prop]: props[prop].value,\n        // }));\n        props[prop] = structure.$attrListeners[prop].value;\n        continue;\n      }\n\n      if (typeof GLOBALS.CUSTOM_ATTRIBUTES[prop] !== 'undefined') {\n        const { allowedTags } = GLOBALS.CUSTOM_ATTRIBUTES[prop];\n\n        if (!allowedTags || (\n          allowedTags\n            && allowedTags.length > 0\n            && allowedTags.indexOf(element.localName) >= 0\n        )) {\n          if (typeof GLOBALS.CUSTOM_ATTRIBUTES[prop].caller === 'function') {\n            GLOBALS.CUSTOM_ATTRIBUTES[prop].caller(element, props[prop]);\n          }\n          if (!GLOBALS.CUSTOM_ATTRIBUTES[prop].addToElement) continue;\n        }\n      }\n\n\n      if (prop.toLowerCase() === 'style') {\n        if (typeof props[prop] === 'object') {\n          setStyles(structure, props[prop], (oldProps && oldProps.style) || {});\n          // props[prop] = structure.setStyles(props[prop], (oldProps && oldProps.style) || {});\n        } else {\n          element.style = props[prop];\n        }\n        continue;\n      }\n\n      if (prop.toLowerCase() === 'class' || prop.toLowerCase() === 'classname') {\n        element.setAttribute('class', parseClass(props[prop]));\n        continue;\n      }\n\n      if (prop.toLowerCase() === 'loadfocus') {\n        element.onload = (el) => {\n          setTimeout(() => {\n            el.focus();\n          }, 10);\n        };\n        continue;\n      }\n\n      if (prop.toLowerCase() === 'html') {\n        element.innerHTML = props[prop];\n        continue;\n      }\n\n      // Handles events 'on<event>'\n      if (prop.substring(0, 2).toLowerCase() === 'on' && typeof props[prop] === 'function') {\n        const fn = props[prop];\n        if (prop.substring(0, 8).toLowerCase() === 'onsubmit') {\n          element[prop] = (e) => {\n            if (props.prevent) {\n              e.preventDefault();\n            }\n\n            const data = [];\n            const inputs = e.target.elements || [];\n            for (const input of inputs) {\n              if ((input.name !== ''\n                && (input.type !== 'radio' && input.type !== 'checkbox'))\n                || input.checked) {\n                const item = {\n                  name: input.name,\n                  el: input,\n                  type: input.type,\n                  default: input.defaultValue,\n                  value: input.value,\n                  set(val) {\n                    structure.el.value = val;\n                  },\n                  reset(val) {\n                    structure.el.value = val;\n                    structure.el.defaultValue = val;\n                  },\n                };\n                data.push(item);\n                if (!data[item.name]) {\n                  Object.defineProperty(data, item.name, {\n                    value: item,\n                  });\n                }\n              }\n            }\n\n            return fn(e, data);\n          };\n        } else {\n          element[prop] = (e, ...args) => fn(e, ...args);\n        }\n        continue;\n      }\n\n      element.setAttribute(prop, props[prop]);\n    }\n  }\n\n  for (let i = 0; i < toRemove.length; i++) {\n    element.removeAttribute(toRemove[i]);\n  }\n\n  structure.props = props;\n\n  return structure;\n};\n\nexport default setAttributes;\n","/* eslint-disable no-restricted-syntax */\n\n// import GLOBALS from '../consts/GLOBALS';\nimport Component from '../component/Component';\nimport flatten from '../utils/flatten';\nimport patch from './patch';\nimport getElementFromQuery from './utils/getElementFromQuery';\nimport textNode from './utils/textNode';\nimport explode from './utils/explode';\nimport filterNode from './utils/filterNode';\nimport isComponent from '../component/utils/isComponent';\nimport Listener from '../listen/Listener';\nimport setAttributes from './setAttributes';\n\n/**\n * @param {*} query\n * @param {object} props\n * @param {...*} children\n * @param {number} depth\n */\nclass Structure {\n  constructor(query, props = {}, children, depth = 0) {\n    // console.log('H', query, children)\n    this.query = query;\n    this.props = Boolean !== props ? props : {};\n    if (isComponent(query) || query instanceof Component) {\n      this.$compChildren = flatten(children || []).map(filterNode);\n      this.children = [];\n    } else {\n      this.children = flatten(children || []).map(filterNode);\n      this.$compChildren = [];\n    }\n    this.html = null;\n    this.$attrListeners = [];\n    this.$styleListeners = [];\n    this.$pointer = null;\n    this.$component = null;\n    this.$listener = null;\n    this.$redirect = null;\n    this.$destroyed = false;\n    this.$isSvg = query === 'svg';\n    this.$depth = depth;\n  }\n\n  mount() {\n    this.$destroyed = false;\n    // console.warn('[mounted]', this)\n\n    if (this.$component instanceof Component) {\n      this.$component.mount();\n    }\n  }\n\n  destroy(childrenToo = true) {\n    if (this.$destroyed) return false;\n    // console.warn('[destroyed]', this, this.html, this.$redirect)\n\n    for (const l in this.$styleListeners) {\n      if (this.$styleListeners[l]\n        && typeof this.$styleListeners[l].deattach === 'function') {\n        this.$styleListeners[l].deattach();\n      }\n    }\n\n    for (const l in this.$attrListeners) {\n      if (this.$attrListeners[l]\n        && typeof this.$attrListeners[l].deattach === 'function') {\n        this.$attrListeners[l].deattach();\n      }\n    }\n\n    if (this.$redirect) {\n      for (let i = 0; i < this.$redirect.length; i++) {\n        if (typeof this.$redirect[i].destroy === 'function') {\n          this.$redirect[i].destroy();\n        }\n      }\n    }\n\n    if (childrenToo && this.children) {\n      for (let i = 0; i < this.children.length; i++) {\n        if (typeof this.children[i].destroy === 'function') {\n          this.children[i].destroy();\n        }\n      }\n    }\n\n    if (this.html) {\n      for (let i = 0; i < this.html.length; i++) {\n        if (this.html[i].parentNode) {\n          this.html[i].parentNode.removeChild(this.html[i]);\n        }\n      }\n    }\n\n    if (this.$component instanceof Component) {\n      this.$component.destroy();\n    }\n\n    if (this.$listener instanceof Listener) {\n      this.$listener.deattach();\n    }\n\n    if (this.$pointer && this.$pointer.parentNode) {\n      this.$pointer.parentNode.removeChild(this.$pointer);\n    }\n    this.$pointer = null;\n    this.$redirect = null;\n    this.$component = null;\n    this.render = () => {};\n    this.html = null;\n    this.$destroyed = true;\n    return true;\n  }\n\n  render(next, parent, depth = 0, isSvg = false) {\n    // console.log('RENDER', isSvg, parent, parent && parent.$isSvg)\n    this.$depth = Math.max(this.$depth, depth);\n    this.$isSvg = isSvg || (parent && parent.$isSvg) || this.query === 'svg';\n\n    if (this.query === '#text') {\n      this.html = [textNode(this.props)];\n      return next(this.html);\n    }\n\n    if (typeof this.query === 'string' || typeof this.query === 'number') {\n      this.html = [getElementFromQuery(this.query, this.$isSvg)];\n\n      setAttributes(this, this.props, {});\n\n      return next(this.html);\n    }\n\n    if (this.query instanceof Listener) {\n      if (!this.$listener) {\n        this.$listener = this.query.applyDepth(this.$depth).init();\n        this.mount();\n      }\n      return this.query.onValueChange(v => {\n        if (this.html) {\n          const tempParent = this.html[0];\n\n          if (this.$pointer) {\n            this.$redirect = patch(this.$redirect, v, this.$pointer,\n              true, this.$isSvg, this.$depth + 1);\n          } else {\n            this.$redirect = patch(this.$redirect, v, tempParent,\n              true, this.$isSvg, this.$depth + 1);\n          }\n\n          // let a = {\n          //   $redirect: [],\n          //   children: [],\n          // };\n          //\n          // explode(v, a, output => {\n          //   // this.html = output;\n          //   if (this.$pointer) {\n          //     this.$redirect = patch(this.$redirect, a.$redirect,\n          // this.$pointer, true, this.$isSvg, this.$depth + 1);\n          //   } else {\n          //     this.$redirect = patch(this.$redirect, a.$redirect,\n          // tempParent, true, this.$isSvg, this.$depth + 1);\n          //   }\n          //   // next(output);\n          // }, this.$depth + 1, this.$isSvg);\n        } else {\n          explode(v, parent || this, output => {\n            // console.warn('change HTML', this.html)\n            this.html = output;\n            next(output);\n          }, this.$depth + 1, this.$isSvg);\n        }\n      });\n    }\n\n    if (this.query instanceof Promise\n      || this.query.constructor.name === 'LazyPromise') {\n      return this.query.then(v => {\n        const normalisedValue = v.default || v;\n        explode(normalisedValue, parent || this, output => {\n          this.html = output;\n          next(output);\n        }, this.$depth, this.$isSvg);\n      });\n    }\n\n    if (this.query instanceof Component\n      && typeof this.query.render === 'function') {\n      this.$component = this.query;\n      return explode(this.$component.render(), parent || this, v => {\n        this.html = v;\n        next(v);\n        this.mount();\n      }, this.$depth, this.$isSvg);\n    }\n\n    if (isComponent(this.query)) {\n      if (!this.$component) {\n        this.$component =\n          new this.query(this.$compChildren).setProps(this.props); // eslint-disable-line\n      }\n      if (typeof this.$component.render === 'function') {\n        explode(this.$component.render(), parent || this, v => {\n          this.html = v;\n          next(v);\n        }, this.$depth, this.$isSvg);\n        this.mount();\n      }\n      return null;\n    }\n\n    if (typeof this.query === 'function') {\n      return explode(this.query(this.props), parent || this, v => {\n        this.html = v;\n        next(v);\n      }, this.$depth, this.$isSvg);\n    }\n\n    return next(textNode(this.query));\n  }\n\n  isStructure() {\n    return true;\n  }\n}\n\nexport default Structure;\n","/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-continue */\n/* eslint-disable no-multi-assign */\n\nimport flatten from '../utils/flatten';\nimport filterNode from './utils/filterNode';\n// import Listener from '../listen/Listener';\n// import Component from '../component/Component';\nimport mount from '../mount';\nimport append from './utils/append';\n// import replaceWith from './utils/replaceWith';\nimport textNode from './utils/textNode';\nimport mountChildren from './mountChildren';\nimport Structure from './Structure';\nimport setAttributes from './setAttributes';\n\n// const hasRedirect = item => (\n//   item && item.$redirect\n// );\n\nconst patch = (rawfirst, rawsecond, parent,\n  after = false, isSvg = false, depth = 0) => {\n  const first = flatten([rawfirst]);\n  const second = flatten([rawsecond]).map(filterNode);\n\n  const length = Math.max(first.length, second.length);\n\n  for (let i = 0; i < length; i++) {\n    // debugger\n    // const nn = i;\n    // first[i] = first[i].$redirect || first[i];\n    if (typeof first[i] === 'undefined') {\n      // mount\n      mount(second[i], parent, after, isSvg, depth);\n      continue;\n    }\n\n    if (typeof second[i] === 'undefined') {\n      // remove\n      if (typeof first[i].destroy === 'function') {\n        first[i].destroy();\n      }\n      continue;\n    }\n\n    second[i].$depth = depth;\n\n    if ((first[i] instanceof Structure || first[i].isStructure)\n      && (second[i] instanceof Structure || second[i].isStructure)\n      && first[i] !== second[i]) {\n      // if (second[i].$redirect2) {\n      //   second[i] = patch(\n      //     // first[i].$redirect || first[i],\n      //     hasRedirect(first[i]) || first[i],\n      //     second[i].$redirect[second[i].$redirect.length - 1] || second[i],\n      //     parent,\n      //     after,\n      //     isSvg,\n      //     depth\n      //   );\n      //   continue;\n      // }\n\n      if (first[i].html\n        && first[i].query === '#text'\n        && second[i].query === '#text') {\n        for (let n = 0; n < first[i].html.length; n++) {\n          if (first[i].props !== second[i].props) {\n            first[i].html[n].textContent = first[i].props = second[i].props;\n          }\n        }\n\n        second[i].html = first[i].html;\n        first[i].html = null;\n\n        if (first[i].$pointer) {\n          if (second[i].$pointer && second[i].$pointer.parentNode) {\n            second[i].$pointer.parentNode.removeChild(second[i].$pointer);\n          }\n          second[i].$pointer = first[i].$pointer;\n          first[i].$pointer = null;\n        }\n\n        first[i].destroy();\n        continue;\n      }\n\n\n      if (first[i].html\n        && typeof first[i].query === 'string'\n        && typeof second[i].query === 'string'\n        && first[i].query === second[i].query) {\n        // for (var n = 0; n < first[i].html.length; n++) {\n        //   if (first[i].props !== second[i].props) {\n        //     // first[i].html[n].textContent = second[i].props;\n        //   }\n        // }\n\n        second[i].html = first[i].html;\n        first[i].html = null;\n\n        if (first[i].$pointer) {\n          if (second[i].$pointer && second[i].$pointer.parentNode) {\n            second[i].$pointer.parentNode.removeChild(second[i].$pointer);\n          }\n          second[i].$pointer = first[i].$pointer;\n          first[i].$pointer = null;\n        }\n\n        setAttributes(second[i], second[i].props, first[i].props);\n        // mountChildren(second[i], second[i].$isSvg, second[i].$depth + 1);\n\n        if (second[i].html[0]\n            && second[i].children\n            && second[i].children.length > 0) {\n          second[i].children = patch(first[i].children,\n            second[i].children,\n            second[i].html[0],\n            false,\n            second[i].$isSvg,\n            second[i].$depth + 1);\n        }\n        first[i].destroy();\n\n        continue;\n      }\n\n      // maybe merge\n      const n1 = first[i];\n      const n2 = second[i];\n\n      // n2.$pointer = textNode('[pointer2]');\n      n2.$pointer = textNode('');\n      append(n2.$pointer, parent, after);\n\n      n2.render(rendered => {\n        if (n1.$pointer) {\n          if (n2.$pointer && n2.$pointer.parentNode) {\n            n2.$pointer.parentNode.removeChild(n2.$pointer);\n          }\n          n2.$pointer = n1.$pointer;\n          n1.$pointer = null;\n        }\n\n        for (let n = 0; n < rendered.length; n++) {\n          if ((n1.html && !n1.html[i]) || !n1.html) {\n            append(rendered[n], n2.$pointer, true);\n          } else {\n            append(rendered[n], n1.html[i], true);\n          }\n        }\n\n        mountChildren(n2, isSvg, depth + 1);\n\n        n1.destroy(false);\n      }, n2, depth, isSvg);\n    }\n  }\n\n  return second;\n};\n\nexport default patch;\n","/* eslint-disable guard-for-in */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-continue */\n/* eslint-disable no-param-reassign */\n// -- we need those for..in loops for now!\n\nimport GLOBALS from '../consts/GLOBALS';\nimport generateId from '../utils/generateId';\nimport PrivateStore from './utils/PrivateStore';\n// import fuseDom from '../r/utils/fuseDom';\nimport clone from '../utils/clone';\nimport skipInProductionAndTest from '../utils/skipInProductionAndTest';\nimport Listener from '../listen/Listener';\n// import mount from '../mount';\nimport patch from '../r/patch';\n\nexport default class Component {\n  /**\n   * @param {Node[]|*[]} [children]\n   * @param {object} [o.props]\n   */\n  constructor(children, props) {\n    this.addNonEnumerableProperties({\n      $id: generateId(),\n      $name: this.constructor.name,\n      $config: (typeof this.config === 'function') ? this.config() : {\n        listen: true,\n      },\n      $events: {},\n      $privateStore: new PrivateStore(),\n    });\n\n    this.on = (typeof this.on === 'function') ? this.on() : {};\n    this.children = [];\n\n    // Links headless components\n    for (const key in GLOBALS.HEADLESS_COMPONENTS) {\n      if (this[key] && typeof this[key].when === 'function') {\n        this[key].when('update', () => this.setState());\n      }\n    }\n\n    this.state = typeof this.state === 'function'\n      ? this.state()\n      : (this.state || {});\n\n    skipInProductionAndTest(() => Object.freeze(this.state));\n\n    if (children) this.setChildren(children);\n    if (props) this.setProps(props);\n  }\n\n  /**\n   * @returns {HTMLElement}\n   */\n  render() {\n    if (typeof this.view !== 'function') return null;\n    return this.html = this.view();\n  }\n\n  /**\n   * @param {object} props\n   * @returns {Component}\n   */\n  setProps(props) {\n    const newState = {};\n    // Self is needed cause of compilation\n    const self = this;\n\n    for (const key in props) {\n      if (typeof props[key] === 'function' && key.substr(0, 2) === 'on') {\n        self.when(key.substring(2, key.length), props[key]);\n      } else\n      if (props[key] instanceof Listener) {\n        newState[key] = props[key].init().value;\n        props[key].changeListener = (value => {\n          self.setState({\n            [key]: value,\n          });\n        });\n      } else {\n        newState[key] = props[key];\n      }\n    }\n    this.setState(newState);\n    return this;\n  }\n\n  /**\n   * @param {Node[]|*[]} children\n   */\n  setChildren(children) {\n    this.children = children;\n    this.setState();\n    for (let i = 0; i < this.children.length; i++) {\n      if (typeof this.children[i].when === 'function') {\n        this.children[i].when('update', () => this.setState());\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {object} obj\n   */\n  addNonEnumerableProperties(obj) {\n    for (const key in obj) {\n      if (typeof this[key] !== 'undefined') continue;\n      Object.defineProperty(this, key, {\n        value: obj[key],\n      });\n    }\n  }\n\n  /**\n   * @param {string} key\n   * @param {Listener} listener\n   * @param {number} depth\n   */\n  addListener(key, listener, depth) {\n    this.$privateStore.addListener(key, listener, depth);\n  }\n\n  mount() {\n    this.trigger('mount');\n  }\n\n  destroy() {\n    // if (this.html) {\n    //   for (var i = 0; i < this.html.length; i++) {\n    //     if (this.html[i].parentNode) {\n    //       this.html[i].parentNode.removeChild(this.html[i]);\n    //     }\n    //   }\n    // }\n    this.html = null;\n    this.trigger('destroy');\n    this.$privateStore.removeListeners();\n  }\n\n  /**\n   * @param {string} key\n   * @param {function} fn\n   */\n  when(key, fn) {\n    if (typeof this.$events[key] === 'undefined') this.$events[key] = [];\n    this.$events[key].push(fn);\n  }\n\n  /**\n   * @param {string} key\n   * @param {*} value\n   */\n  trigger(key, ...args) {\n    if (typeof this.on[key] === 'function') {\n      this.on[key].call(this, ...args);\n    }\n\n    if (typeof this.$events[key] !== 'undefined') {\n      for (const i in this.$events[key]) {\n        this.$events[key][i].call(this, ...args);\n      }\n    }\n  }\n\n  /**\n   * @param {object} newState\n   */\n  setState(newState) {\n    if (typeof newState === 'object') {\n      let oldstate = this.state;\n\n      skipInProductionAndTest(() => oldstate = clone(this.state));\n\n      this.state = Object.assign(oldstate, newState);\n\n      skipInProductionAndTest(() => Object.freeze(this.state));\n\n      if (this.$config.listen) {\n        this.$privateStore.setState(newState);\n      }\n    }\n\n    if (!this.$config.listen && typeof this.view === 'function' && this.html) {\n      this.html = patch(this.html, this.view());\n    }\n\n    // if (typeof newState === 'object') {\n    //   let oldstate = this.state;\n    //\n    //   skipInProductionAndTest(() => oldstate = clone(this.state));\n    //\n    //   this.state = Object.assign(oldstate, newState);\n    //\n    //   skipInProductionAndTest(() => Object.freeze(this.state));\n    //\n    //   if (this.$config.listen) {\n    //     this.$privateStore.setState(newState);\n    //   }\n    // }\n    //\n    // if (!this.$config.listen && typeof this.view === 'function' && this.html) {\n    //   fuseDom.fuse(this.html, this.view());\n    // }\n    this.trigger('update');\n\n    return newState;\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  static isComponent() {\n    return true;\n  }\n}\n","import Component from '../Component';\n\n/**\n * @param {*} value\n * @returns {Boolean}\n */\nconst isComponent = value => {\n  if (value) {\n    if (value.prototype instanceof Component) {\n      return true;\n    }\n\n    if (value.isComponent) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport default isComponent;\n","import flatten from '../../utils/flatten';\nimport isComponent from '../../component/utils/isComponent';\nimport Component from '../../component/Component';\nimport r from '../index.js';\nimport Listener from '../../listen/Listener';\n\n/**\n * @param {function} value\n * @returns {object}\n */\nconst filterNode = value => {\n\n  if (Array.isArray(value)) {\n    return value.map(filterNode);\n  }\n\n  if (typeof value === 'string' || typeof value === 'number') {\n    return r('#text', value);\n  }\n\n  if (!value || typeof value === 'boolean') {\n    return r('#text', '');\n  }\n\n  if (value instanceof Listener) {\n    return r(value);\n  }\n\n  if (isComponent(value) || value instanceof Component) {\n    return r(value);\n  }\n\n  if (typeof value === 'function') {\n    return r(value);\n  }\n\n  if (value instanceof Promise || value.constructor.name === 'LazyPromise') {\n    return r(value);\n  }\n\n  return value;\n}\n\nexport default filterNode;\n","// import Component from '../component/Component';\nimport GLOBALS from '../consts/GLOBALS';\nimport flatten from '../utils/flatten';\nimport filterNode from './utils/filterNode';\nimport Structure from './Structure';\nimport patch from './patch';\n\n/**\n * @param {*} query\n * @param {object} props\n * @param {...*} children\n * @returns {object}\n */\nconst r = (query, props, ...children) => {\n  if (typeof GLOBALS.CUSTOM_TAGS[query] !== 'undefined') {\n    return GLOBALS.CUSTOM_TAGS[query].onmount(\n      props || {},\n      (children && flatten([children]).map(filterNode)) || [],\n      filterNode,\n      v => (GLOBALS.CUSTOM_TAGS[query].saved = v),\n    ) || null;\n  }\n\n  if (query === 'await') {\n    let output = null;\n\n    if (props.src && props.src instanceof Promise) {\n      props.src.then(v => {\n        const nomalizedData = filterNode(\n          typeof props.transform === 'function'\n            ? props.transform(v)\n            : v\n        );\n\n        if (output) {\n          output = patch(output, nomalizedData, output.html[0].parentNode);\n        } else {\n          output = nomalizedData;\n        }\n      }).catch(error => {\n        const placerror = filterNode(\n          typeof props.error === 'function'\n            ? props.error(error)\n            : props.error\n        );\n\n        if (output) {\n          output = patch(output, placerror, output.html[0].parentNode);\n        } else {\n          output = placerror;\n        }\n      });\n    }\n\n    if (!output) {\n      output = filterNode(props.placeholder);\n    }\n\n    return output;\n  }\n\n  if (query === 'template') {\n    // return flatten([children]).map(filterNode);\n    return new Structure('section', props, flatten([children]).map(filterNode));\n  }\n\n  return new Structure(query, props, flatten([children]).map(filterNode));\n};\n\nexport default r;\n","import Listener from './Listener';\n\n/**\n * The listen function is used for dynamically binding a component property\n * to the DOM. Also commonly imported as 'l'.\n * @param {Component} component\n * @param {...string} path\n * @returns {Listener}\n */\nconst listen = (component, ...path) =>\n  new Listener(component, ...path);\n\nexport default listen;\n","import Component from './Component';\nimport GLOBALS from '../consts/GLOBALS';\n\nconst headless = (key, Comp) => {\n  // TODO: Validate component and key\n  const name = '$'.concat(key);\n  const mountedComponent = new Comp();\n  mountedComponent.mount();\n  Component.prototype[name] = mountedComponent;\n  return GLOBALS.HEADLESS_COMPONENTS[name] = mountedComponent;\n};\n\nexport default headless;\n","/* eslint-disable func-names */\n\nconst action = (target, key, descriptor) => {\n  const act = descriptor.value;\n  descriptor.value = function (...args) {\n    return this.setState.call(this, act.call(this, ...args));\n  };\n  return descriptor;\n};\n\nexport default action;\n","/* eslint-disable func-names */\n\nconst createWorker = fn => {\n  let fire = () => {};\n\n  const blob = new window.Blob([`self.onmessage = function(e) {\n    self.postMessage((${fn.toString()})(e.data));\n  }`], { type: 'text/javascript' });\n\n  const url = window.URL.createObjectURL(blob);\n  const myWorker = new window.Worker(url);\n\n  myWorker.onmessage = e => { fire(e.data, null); };\n  myWorker.onerror = e => { fire(null, e.data); };\n\n  return arg => new Promise((resolve, reject) => {\n    fire = (data, err) => !err ? resolve(data) : reject(data);\n    myWorker.postMessage(arg);\n  });\n};\n\n// Descriptor for worker\nconst worker = (target, key, descriptor) => {\n  const act = descriptor.value;\n\n  const promisedWorker = createWorker(act);\n\n  descriptor.value = function (...args) {\n    promisedWorker(...args).then(newState => {\n      this.setState.call(this, newState);\n    });\n  };\n  return descriptor;\n};\n\nexport default worker;\n","/* eslint-disable func-names */\n\n// Descriptor for subscriptions\nconst subscribe = (container, eventName/* , triggerMount */) =>\n  // TODO: Remove event after no longer needed / Currently overrides existing\n  // TODO: Do not override existing event - use EventListener\n  // TODO: triggerMount should trigger this event on mount too\n  function (target, key, descriptor) {\n    const name = `on${eventName || key}`;\n    const fn = function (...args) {\n      return descriptor.value.call(this, ...args);\n    };\n\n    container[name] = fn;\n    // if (container && container.addEventListener) {\n    //   container.addEventListener(name, fn);\n    //   self.when('destroy', () => {\n    //     container.removeEventListener(name, fn);\n    //   });\n    // }\n    // console.log(target, key, descriptor, container[name], name, fn, fn.radiGlobalEvent);\n    return descriptor;\n  };\nexport default subscribe;\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} tagName\n * @param {function} onmount\n * @param {function} ondestroy\n * @returns {object}\n */\nconst customTag = (tagName, onmount, ondestroy) => GLOBALS.CUSTOM_TAGS[tagName] = {\n  name: tagName,\n  onmount: onmount || (() => {}),\n  ondestroy: ondestroy || (() => {}),\n  saved: null,\n};\n\nexport default customTag;\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} attributeName\n * @param {function} caller\n * @param {object} object\n * @returns {object}\n */\nconst customAttribute = (attributeName, caller, {\n  allowedTags,\n  addToElement,\n} = {}) => GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n  name: attributeName,\n  caller,\n  allowedTags: allowedTags || null,\n  addToElement,\n};\n\nexport default customAttribute;\n","import GLOBALS from '../consts/GLOBALS';\n\nconst remountActiveComponents = () => {\n  Object.values(GLOBALS.ACTIVE_COMPONENTS).forEach(component => {\n    if (typeof component.onMount === 'function') {\n      component.onMount(component);\n    }\n  });\n};\n\nexport default remountActiveComponents;\n","import GLOBALS from './consts/GLOBALS';\nimport r from './r';\nimport listen from './listen';\nimport Component from './component';\nimport headless from './component/headless';\nimport generateId from './utils/generateId';\nimport mount from './mount';\nimport patch from './r/patch';\nimport action from './action';\nimport worker from './action/worker';\nimport subscribe from './action/subscribe';\nimport customTag from './r/customTag';\nimport customAttribute from './r/customAttribute';\nimport remountActiveComponents from './utils/remountActiveComponents';\n\nconst Radi = {\n  version: GLOBALS.VERSION,\n  activeComponents: GLOBALS.ACTIVE_COMPONENTS,\n  r,\n  listen,\n  l: listen,\n  worker,\n  Component,\n  component: Component,\n  action,\n  subscribe,\n  customTag,\n  customAttribute,\n  headless,\n  update: patch,\n  patch,\n  mount,\n  freeze: () => {\n    GLOBALS.FROZEN_STATE = true;\n  },\n  unfreeze: () => {\n    GLOBALS.FROZEN_STATE = false;\n    remountActiveComponents();\n  },\n};\n\nclass Modal extends Radi.Component {\n  state() {\n    return {\n      registry: {},\n    };\n  }\n\n  register(name, element) {\n    if (typeof this.state.registry[name] !== 'undefined') {\n      console.warn('[Radi.js] Warn: Modal with name \"' + name + '\" is already registerd!');\n      return;\n    }\n\n    return this.setState({\n      registry: Object.assign({}, this.state.registry, {\n        [name]: {\n          status: false,\n          element,\n        },\n      }),\n    });\n  }\n\n  exists(name) {\n    if (typeof this.state.registry[name] === 'undefined') {\n      console.warn('[Radi.js] Warn: Modal with name \"' + name + '\" is not registerd!');\n      return false;\n    }\n\n    return true;\n  }\n\n  open(name) {\n    if (!this.exists(name) || this.state.registry[name].status) return;\n\n    return this.setState({\n      registry: Object.assign({}, this.state.registry, {\n        [name]: {\n          status: true,\n          element: this.state.registry[name].element,\n        },\n      }),\n    });\n  }\n\n  close(name) {\n    if (!this.exists(name) || !this.state.registry[name].status) return;\n\n    return this.setState({\n      registry: Object.assign({}, this.state.registry, {\n        [name]: {\n          status: false,\n          element: this.state.registry[name].element,\n        },\n      }),\n    });\n  }\n\n  closeAll() {\n    let keys = Object.keys(this.state.registry);\n    let registry = keys.reduce((acc, name) => Object.assign(acc, {\n      [name]: {\n        status: false,\n        element: this.state.registry[name].element,\n      },\n    }), {});\n\n    return this.setState({\n      registry,\n    });\n  }\n}\n\nlet $modal = headless('modal', Modal);\n\nRadi.customTag('modal',\n  (props, children, buildNode, save) => {\n    let name = props.name || 'default';\n\n    $modal.register(name, null);\n\n    if (typeof props.name === 'undefined') {\n      console.warn('[Radi.js] Warn: Every <modal> tag needs to have `name` attribute!');\n    }\n\n    Radi.mount(listen($modal, 'registry', name)\n      .process(v => (\n        v.status && r('div',\n          { class: 'radi-modal', name },\n          r('div', {\n            class: 'radi-modal-backdrop',\n            onclick: () => $modal.close(name),\n          }),\n          r('div',\n            { class: 'radi-modal-content' },\n            ...(children.slice())\n          )\n        )\n      )), document.body);\n\n    return buildNode(null);\n  }, (element) => {\n    // Destroyed element\n  }\n);\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (window) window.Radi = Radi;\n// export default Radi;\nmodule.exports = Radi;\n"],"names":["const","let","i","l"],"mappings":"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"}