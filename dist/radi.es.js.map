{"version":3,"file":"radi.es.js","sources":["../src/consts/GLOBALS.js","../src/html/customAttribute.js","../src/html/customTag.js","../src/html/destroyTree.js","../src/html/fireEvent.js","../src/utils/capitalise.js","../src/utils/flatten.js","../src/utils/ensureArray.js","../src/utils/formToJSON.js","../src/html/html.js","../src/html/insertAfter.js","../src/destroy.js","../src/mount.js","../src/store/Store.js","../src/store/Fetcher.js","../src/store/Subscribe.js","../src/html/render.js","../src/html/props.js","../src/html/patch.js","../src/component/Component.js","../src/service.js","../src/custom/attributes/animation.js","../src/custom/attributes/html.js","../src/custom/attributes/loadfocus.js","../src/custom/attributes/onsubmit.js","../src/custom/attributes/onvalidate.js","../src/custom/tags/await.js","../src/custom/tags/errors.js","../src/custom/tags/modal.js","../src/custom/tags/portal.js","../src/custom/validation/Validator.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  VERSION: '0.5.0',\n  CURRENT_COMPONENT: null,\n  CUSTOM_ATTRIBUTES: {},\n  CUSTOM_TAGS: {},\n  IS_UPDATE: false,\n  SERVICES: {},\n};\n\nexport default GLOBALS;\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} attributeName\n * @param {function} caller\n * @param {Object} object\n * @returns {Object}\n */\nexport function customAttribute(attributeName, caller, {\n  allowedTags,\n  addToElement,\n} = {}) {\n  return GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n    name: attributeName,\n    caller,\n    allowedTags: allowedTags || null,\n    addToElement,\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} tagName\n * @param {function} onmount\n * @returns {object}\n */\nexport function customTag(tagName, render) {\n  return GLOBALS.CUSTOM_TAGS[tagName] = {\n    name: tagName,\n    render: render || (() => {}),\n  };\n}\n","import { fireEvent } from './index';\n\n/**\n * @param  {HTMLElement} node\n */\nexport function destroyTree(node) {\n  fireEvent('destroy', node);\n  node.__radiRef = undefined;\n\n  if (node.nodeType === 1) {\n    let curChild = node.firstChild;\n    while (curChild) {\n      destroyTree(curChild);\n      curChild = curChild.nextSibling;\n    }\n  }\n}\n","\n/**\n * @param  {string} type\n * @param  {HTMLElement} $node\n * @return {HTMLElement}\n */\nexport function fireEvent(type, $node, $element = $node) {\n  const onEvent = document.createEvent('Event');\n  onEvent.initEvent(type, false, true);\n\n  if (typeof $node.dispatchEvent === 'function') {\n    $node._eventFired = true;\n    $node.dispatchEvent(onEvent, $element);\n  }\n\n  return $node;\n}\n","\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function capitalise(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function flatten(list) {\n  return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n","import { flatten } from './flatten';\n\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function ensureArray(list) {\n  return flatten([list]);\n}\n","/**\n * Checks that an element has a non-empty `name` and `value` property.\n * @param  {Element} element  the element to check\n * @return {Bool}             true if the element is an input, false if not\n */\nconst isValidElement = element => element.name && (element.value || element.value === '');\n\n/**\n * Checks if an elementâ€™s value can be saved (e.g. not an unselected checkbox).\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the value should be added, false if not\n */\nconst isValidValue = element =>\n  (!['checkbox', 'radio'].includes(element.type) || element.checked);\n\n/**\n * Checks if an input is a checkbox, because checkboxes allow multiple values.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a checkbox, false if not\n */\nconst isCheckbox = element => element.type === 'checkbox';\n\n/**\n * Checks if an input is a `select` with the `multiple` attribute.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a multiselect, false if not\n */\nconst isMultiSelect = element => element.options && element.multiple;\n\n/**\n * Retrieves the selected options from a multi-select as an array.\n * @param  {HTMLOptionsCollection} options  the options for the select\n * @return {Array}                          an array of selected option values\n */\nconst getSelectValues = options =>\n  [].reduce.call(options, (values, option) =>\n    option.selected\n      ? values.concat(option.value)\n      : values, []);\n\n/**\n * Retrieves input data from a form and returns it as a JSON object.\n * @param  {HTMLFormControlsCollection} elements  the form elements\n * @return {Object}                               form data as an object literal\n */\nexport const formToJSON = (elements, transform = (e, v) => v) =>\n  [].reduce.call(elements, (data, element) => {\n  // Make sure the element has the required properties and should be added.\n    if (isValidElement(element)) {\n    /*\n     * Some fields allow for more than one value, so we need to check if this\n     * is one of those fields and, if so, store the values as an array.\n     */\n      if (isCheckbox(element)) {\n        if (typeof data[element.name] === 'undefined') data[element.name] = [];\n        if (isValidValue(element)) {\n          data[element.name] = data[element.name]\n            .concat(transform(element, element.value));\n        }\n      } else\n      if (isValidValue(element)) {\n        if (isMultiSelect(element)) {\n          data[element.name] = transform(element, getSelectValues(element));\n        } else {\n          data[element.name] = transform(element, element.value);\n        }\n      }\n    }\n\n    return data;\n  }, {});\n","import { flatten } from '../utils';\n\n/**\n * @typedef {Object} Node\n * @property {string|function} type\n * @property {{}} props\n * @property {*[]} children\n */\n\n/**\n * @param  {*} preType\n * @param  {{}} preProps\n * @param  {*[]} preChildren\n * @return {Node}\n */\nexport function html(preType, preProps, ...preChildren) {\n  let type = (typeof preType === 'number') ? `${preType}` : preType;\n  let props = preProps || {};\n  const children = flatten(preChildren);\n\n  if (type instanceof Promise || (type && type.constructor.name === 'LazyPromise')) {\n    type = 'await';\n    props = {\n      src: preType,\n    };\n  }\n\n  return {\n    type,\n    props,\n    children,\n  };\n}\n","\n/**\n * @param  {HTMLElement} newNode\n * @param  {HTMLElement} $reference\n * @param  {HTMLElement} $parent\n * @return {HTMLElement}\n */\nexport function insertAfter(newNode, $reference, $parent) {\n  if (!$parent) $parent = $reference.parentNode;\n\n  if (newNode instanceof Node) {\n    if ($reference === null || $reference === undefined) {\n      return $parent.insertBefore(newNode, $reference);\n    }\n\n    if ($reference instanceof Node) {\n      return $parent.insertBefore(newNode, $reference.nextSibling);\n    }\n  }\n\n  return newNode;\n}\n","import { destroyTree } from './html';\nimport { ensureArray } from './utils';\n\n/**\n * @param  {HTMLElement} node\n * @param  {function} next\n */\nexport function beforeDestroy(node, next) {\n  if (typeof node.beforedestroy === 'function') {\n    return node.beforedestroy(next);\n  }\n\n  return next();\n}\n\n/**\n * @param  {*|*[]} data\n */\nexport function destroy(data) {\n  const nodes = ensureArray(data);\n\n  nodes.map(node => {\n    if (!(node instanceof Node)) return;\n\n    const parent = node.parentNode;\n    if (node instanceof Node && parent instanceof Node) {\n      beforeDestroy(node, () => {\n        // This is for async node removals\n        parent.removeChild(node);\n        destroyTree(node);\n      });\n    }\n  });\n}\n","import {\n  fireEvent,\n  insertAfter,\n  render,\n} from './html';\nimport { ensureArray } from './utils';\n\n/**\n * @typedef {Object} Mount\n * @property {Object} component\n * @property {Object} node\n * @property {function} destroy\n */\n\n/**\n * @param  {*|*[]} data\n * @param  {HTMLElement} container\n * @param  {HTMLElement} after\n * @return {HTMLElement[]}\n */\nexport function mount(data, container, after) {\n  const nodes = ensureArray(data);\n\n  return nodes.map(node => {\n    const renderedNode = render(node, container);\n\n    if (Array.isArray(renderedNode)) {\n      return mount(renderedNode, container, after);\n    }\n    \n    if (after && after.parentNode) {\n      after = insertAfter(renderedNode, after, after.parentNode);\n      fireEvent('mount', renderedNode);\n      return after;\n    }\n\n    if (!container) {\n      console.log('[Radi] Mount canceled');\n      return nodes;\n    }\n\n    const mountedEl = container.appendChild(renderedNode);\n    fireEvent('mount', renderedNode);\n    return mountedEl;\n  });\n}\n","import GLOBALS from '../consts/GLOBALS';\n\nlet renderQueue = [];\n\n/**\n * @param {Function} data\n * @returns {Function}\n */\nfunction addToRenderQueue(data) {\n  const fn = data.update || data;\n  if (renderQueue.indexOf(fn) < 0) {\n    renderQueue.push(fn);\n  }\n  return fn;\n}\n\nfunction clearRenderQueue() {\n  renderQueue = [];\n}\n\nclass Dependencies {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.dependencies = {};\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {Function} component\n   */\n  add(path, component) {\n    const key = path[0];\n    if (typeof this.dependencies[key] === 'undefined') this.dependencies[key] = [];\n\n    if (this.dependencies[key].indexOf(component) < 0) {\n      // console.log('addDependency', key, component, this.dependencies[key])\n      this.dependencies[key].push(component);\n    }\n\n    this.dependencies[key] = this.dependencies[key].filter(c => {\n      if (c.dom instanceof Node) {\n        return c.dom.isConnected;\n      }\n\n      return true;\n    });\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {Function} component\n   */\n  remove(path, component) {\n    const key = path[0];\n    const index = (this.dependencies[key] || []).indexOf(component);\n    if (index >= 0) {\n      // console.log('removeDependency', key, component)\n      this.dependencies[key].splice(index, 1);\n    }\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {Function} component\n   */\n  component(path, component) {\n    if (component) {\n      this.add(path, component);\n\n      component.__onDestroy = () => {\n        this.remove(path, component);\n      };\n    }\n    return component;\n  }\n\n  /**\n   * @param {string} key\n   * @param {*} newStore\n   * @param {*} oldState\n   */\n  trigger(key, newStore, oldState) {\n    if (this.dependencies[key]) {\n      this.dependencies[key].forEach(fn => (\n        addToRenderQueue(fn)(newStore, oldState)\n      ));\n    }\n  }\n}\n\n/**\n * @param {*} key\n * @returns {Function}\n */\nconst noop = e => e;\n\nexport class Listener {\n  /**\n   * @param {Function} map\n   * @param {Store} store\n   * @param {Dependencies} dep\n   * @constructor\n   */\n  constructor(map, store) {\n    this.map = map;\n    this.getValue = this.getValue.bind(this);\n    this.render = this.render.bind(this);\n    this.store = store;\n    this.dep = store.event;\n  }\n\n  /**\n   * @param {Function} updater\n   * @returns {*} Cached state\n   */\n  getValue(updater) {\n    const state = this.store.get();\n\n    if (!this.subbed) {\n      this.subbed = this.dep.add('*', updater);\n    }\n\n    return this.cached = this.map(state);\n  }\n\n  /**\n   * @returns {Function} That returns mapped state\n   */\n  render() {\n    const self = this;\n\n    return (function () {\n      const mappedState = self.getValue(this);\n      return mappedState;\n    });\n  }\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isObject(value) {\n  return value && (\n    value.constructor === Object\n    || value.constructor === Array\n  );\n}\n\n/**\n * @param {Store} store\n * @param {Store} state\n * @param {string[]} path\n * @returns {*} New state\n */\nfunction evalState(store, state, path = []) {\n  if (state) {\n    if (isObject(state)) {\n      const newState = Array.isArray(state) ? [] : {};\n      for (const key in state) {\n        newState[key] = evalState(store, state[key], path.concat(key));\n      }\n      return newState;\n    }\n\n    if (state instanceof Store) {\n      state.subscribe.call(state, (newValue) => {\n        store.update(store.setPartial(path, newValue));\n      });\n      return state.get();\n    }\n  }\n\n  return state;\n}\n\n/**\n * @param {Store} state\n * @param {string|number} key\n * @param {*} value\n * @returns {*} New state\n */\nfunction mapState(state, key, value) {\n  if (state && isObject(state)) {\n    const output = Array.isArray(state)\n      ? [...state]\n      : { ...state };\n    output[key] = value;\n    return output;\n  }\n\n  return state;\n}\n\nexport class Store {\n  /**\n   * @param {*} state\n   * @constructor\n   */\n  constructor(state) {\n    this.dependencies = new Dependencies();\n    this.transform = noop;\n    this.willDispatch = this.willDispatch.bind(this);\n    this.dispatch = this.dispatch.bind(this);\n    this.subscribe = this.subscribe.bind(this);\n    this.update = this.update.bind(this);\n    this.get = this.get.bind(this);\n    this.storedState = evalState(this, state);\n  }\n\n  /**\n   * @returns {*} Stored state\n   */\n  get state() {\n    if (GLOBALS.CURRENT_COMPONENT) {\n      this.dependencies.component('*', GLOBALS.CURRENT_COMPONENT);\n    }\n\n    return this.get();\n  }\n\n  /**\n   * @returns {*} Transformed state\n   */\n  get() {\n    return this.transform(this.storedState);\n  }\n\n  /**\n   * @param {Function} transform\n   * @returns {Store}\n   */\n  map(transform) {\n    const last = this.transform;\n    this.transform = (data) => transform(last(data));\n    return this;\n  }\n\n  /**\n   * @param {string[]} path\n   * @param {*} newValue\n   * @param {*} source Stored state\n   * @returns {*} Mapped state\n   */\n  setPartial(path, newValue, source = this.storedState) {\n    if (source && path && path.length) {\n      const [current, ...nextPath] = path;\n      return mapState(source, current, this.setPartial(nextPath, newValue, source[current]));\n    }\n\n    return newValue;\n  }\n\n  /**\n   * @param {*} newState\n   * @returns {*} Mapped state\n   */\n  update(newState) {\n    const parsedState = evalState(this, newState);\n    const oldStore = this.get();\n    this.storedState = parsedState;\n    this.dependencies.trigger('*', this.get(), oldStore);\n    clearRenderQueue();\n    return this.get();\n  }\n\n  /**\n   * @param {Function} callback\n   * @returns {Store}\n   */\n  subscribe(callback) {\n    this.dependencies.add('*', callback);\n    callback(this.get(), null);\n    return this;\n  }\n\n  /**\n   * @param {Function} subscriber\n   */\n  unsubscribe(subscriber) {\n    this.dependencies.remove('*', subscriber);\n  }\n\n  /**\n   * @param {Function} action\n   * @param {*[]} args\n   * @returns {*} Mapped state\n   */\n  dispatch(action, ...args) {\n    const payload = action(this.storedState, ...args);\n    // console.log('dispatch', {\n    //   action: action.name,\n    //   args: args,\n    //   payload,\n    // });\n    // console.log('dispatch', action.name, payload);\n    return this.update(payload);\n  }\n\n  /**\n   * @param {Function} action\n   * @param {*[]} args\n   * @returns {Function} Store.dispatch\n   */\n  willDispatch(action, ...args) {\n    return (...args2) => this.dispatch(action, ...args, ...args2);\n  }\n\n  /**\n   * @param {Function} listenerToRender\n   * @returns {Listener}\n   */\n  listener(listenerToRender = e => e) {\n    return new Listener(listenerToRender, this);\n  }\n}\n","import { Store } from './Store';\n\nexport function Fetcher(resolver, success, error) {\n  return (defaults) => {\n    const fetcherStore = new Store(defaults);\n\n    if (typeof resolver === 'function') {\n      resolver()\n        .then(success || ((returned) => {\n          fetcherStore.dispatch(() => returned);\n        }))\n        .catch(error || ((err) => {\n          console.error(err);\n        }));\n    }\n\n    return fetcherStore;\n  };\n}\n","import { Store } from './Store';\n\n/**\n * @param       {EventTarget} [target=document]\n * @constructor\n */\nexport function Subscribe(target = document) {\n  return {\n    /**\n     * @param {string} eventHolder\n     * @param {Function} transformer\n     * @returns {Store}\n     */\n    on: (eventHolder, transformer = e => e) => {\n      const events = eventHolder.trim().split(' ');\n      let eventSubscription = null;\n      let staticDefaults = null;\n      let staticStore = null;\n      let state = false;\n\n      if (typeof transformer !== 'function') {\n        throw new Error(`[Radi.js] Subscription \\`${eventHolder}\\` must be transformed by function`);\n      }\n\n      function updater(defaults, newStore) {\n        const store = typeof newStore !== 'undefined' ? newStore : new Store(defaults);\n\n        state = true;\n        staticDefaults = defaults;\n        staticStore = store;\n        events.forEach(event => target.addEventListener(event,\n          eventSubscription = (...args) =>\n            store.dispatch(() => transformer(...args, event))\n        ));\n\n        return store;\n      }\n\n      updater.stop = () => {\n        if (state) {\n          events.forEach(event => target.removeEventListener(event, eventSubscription));\n        }\n        return state = !state;\n      };\n      updater.start = () => !state && updater(staticDefaults, staticStore);\n\n      return updater;\n    },\n  };\n}\n","import { Component } from '../component';\nimport GLOBALS from '../consts/GLOBALS';\nimport { Listener } from '../store';\nimport { flatten } from '../utils';\nimport { mount } from '../mount';\nimport { setProps } from '../html';\n\n/**\n * @param {Component} compNode\n * @returns {Function<HTMLElement|HTMLElement[]>}\n */\nfunction refFactory(compNode) {\n  return (data, ii) => {\n    if (ii && Array.isArray(compNode.dom)) {\n      return compNode.dom[ii] = data;\n    }\n    return compNode.dom = data;\n  };\n}\n\n/**\n * @param {HTMLElement|HTMLElement[]} node\n * @param {HTMLElement} $parent\n * @returns {HTMLElement|HTMLElement[]}\n */\nexport function render(node, $parent) {\n  if (Array.isArray(node)) {\n    const output = flatten(node).map(n => render(n, $parent));\n\n    // Always must render some element\n    // In case of empty array we simulate empty element as null\n    if (output.length === 0) return render([null], $parent);\n\n    return output;\n  }\n\n  if (node && node.__esModule && node.default) {\n    return render(node.default, $parent);\n  }\n\n  if ((node && typeof node.type === 'function') || typeof node === 'function') {\n    const componentFn = node.type || node;\n    const compNode = new Component(componentFn, node.props, node.children);\n    const tempComponent = GLOBALS.CURRENT_COMPONENT;\n    GLOBALS.CURRENT_COMPONENT = compNode;\n    const renderedComponent = compNode.render(node.props, node.children, $parent);\n\n    let $styleRef;\n\n    if (renderedComponent && typeof renderedComponent.addEventListener === 'function') {\n      renderedComponent.addEventListener('mount', () => {\n        if (typeof compNode.style === 'string') {\n          $styleRef = document.createElement('style');\n          $styleRef.innerHTML = compNode.style;\n          document.head.appendChild($styleRef);\n        }\n        compNode.trigger('mount', renderedComponent);\n      }, {\n        passive: true,\n        once: true,\n      }, false);\n\n      renderedComponent.addEventListener('destroy', () => {\n        compNode.trigger('destroy', renderedComponent);\n        if ($styleRef instanceof Node) {\n          document.head.removeChild($styleRef);\n        }\n      }, {\n        passive: true,\n        once: true,\n      }, false);\n    }\n\n    if (Array.isArray(renderedComponent)) {\n      renderedComponent.forEach((compItem) => {\n        if (compItem && typeof compItem.addEventListener === 'function') {\n          compItem.addEventListener('mount', () => {\n            if (typeof compNode.style === 'string') {\n              $styleRef = document.createElement('style');\n              $styleRef.innerHTML = compNode.style;\n              document.head.appendChild($styleRef);\n            }\n            compNode.trigger('mount', compItem);\n          }, {\n            passive: true,\n            once: true,\n          }, false);\n\n          compItem.addEventListener('destroy', () => {\n            compNode.trigger('destroy', compItem);\n            if ($styleRef instanceof Node) {\n              document.head.removeChild($styleRef);\n            }\n          }, {\n            passive: true,\n            once: true,\n          }, false);\n        }\n      });\n    }\n\n    if (Array.isArray(renderedComponent)) {\n      renderedComponent[0].__radiRef = refFactory(compNode);\n    } else {\n      renderedComponent.__radiRef = refFactory(compNode);\n    }\n    GLOBALS.CURRENT_COMPONENT = tempComponent;\n\n    return renderedComponent;\n  }\n\n  if (node instanceof Node) {\n    return node;\n  }\n\n  if (node instanceof Listener) {\n    return node.render();\n  }\n\n  if (node instanceof Promise) {\n    return render({ type: 'await', props: { src: node }, children: [] }, $parent);\n  }\n\n  // if the node is text, return text node\n  if (['string', 'number'].indexOf(typeof node) > -1) { return document.createTextNode(node); }\n\n  // We still have to render nodes that are hidden, to preserve\n  // node tree and ref to components\n  if (!node) {\n    return document.createComment('');\n  }\n\n  if (!(\n    typeof node.type !== 'undefined'\n    && typeof node.props !== 'undefined'\n    && typeof node.children !== 'undefined'\n  )) {\n    return document.createTextNode(JSON.stringify(node));\n  }\n\n  if (typeof GLOBALS.CUSTOM_TAGS[node.type] !== 'undefined') {\n    return render({\n      ...node,\n      type: GLOBALS.CUSTOM_TAGS[node.type].render,\n    }, $parent);\n  }\n\n  // create element\n  let element;\n  if (node.type === 'svg' || $parent instanceof SVGElement) {\n    element = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      node.type\n    );\n  } else {\n    element = document.createElement(node.type);\n  }\n\n  // set attributes\n  setProps(element, node.props);\n\n  // build and append children\n  if (node.children) {\n    flatten(node.children || []).forEach(child => {\n      const childNode = child instanceof Node ? child : render(child, element);\n      mount(childNode, element);\n    });\n  }\n\n  return element;\n}\n","import GLOBALS from '../consts/GLOBALS';\nimport { Listener } from '../store';\n\n/**\n * @param {*} value\n * @param {Function} fn\n * @returns {*}\n */\nfunction autoUpdate(value, fn) {\n  if (value instanceof Listener) {\n    return fn(value.getValue(e => fn(value.map(e))));\n  }\n  return fn(value);\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nfunction setBooleanProp($target, name, value) {\n  if (value) {\n    $target.setAttribute(name, value);\n    $target[name] = true;\n  } else {\n    $target[name] = false;\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n */\nfunction removeBooleanProp($target, name) {\n  $target.removeAttribute(name);\n  $target[name] = false;\n}\n\n/**\n * @param {string} name\n * @returns {boolean}\n */\nfunction isEventProp(name) {\n  return /^on/.test(name);\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction extractEventName(name) {\n  return name.slice(2).toLowerCase();\n}\n\n/**\n * @param {string} name\n * @returns {boolean}\n */\nfunction isCustomProp(name) {\n  return isEventProp(name);\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function setProp($target, name, value) {\n  if (name === 'style' && typeof value !== 'string') {\n    setStyles($target, value);\n  } else if (isCustomProp(name)) {\n    addEventListener($target, name, value);\n  } else if (name === 'className') {\n    $target.setAttribute('class', value);\n  } else if (typeof value === 'boolean') {\n    setBooleanProp($target, name, value);\n  } else {\n    if (name === 'value' && document.activeElement !== $target) {\n      $target[name] = value;\n    }\n    $target.setAttribute(name, value);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function removeProp($target, name, value) {\n  if (isCustomProp(name)) {\n\n  } else if (name === 'className') {\n    $target.removeAttribute('class');\n  } else if (typeof value === 'boolean') {\n    removeBooleanProp($target, name);\n  } else {\n    $target.removeAttribute(name);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} styles\n */\nexport function setStyles($target, styles) {\n  Object.keys(styles).forEach(name => {\n    autoUpdate(styles[name], value => {\n      $target.style[name] = value;\n    });\n  });\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} props\n */\nexport function setProps($target, props) {\n  (Object.keys(props || {})).forEach(name => {\n    if (typeof GLOBALS.CUSTOM_ATTRIBUTES[name] !== 'undefined') {\n      const { allowedTags, addToElement, caller } = GLOBALS.CUSTOM_ATTRIBUTES[name];\n\n      if (!allowedTags || (\n        allowedTags\n        && allowedTags.length > 0\n        && allowedTags.indexOf($target.localName) >= 0\n      )) {\n        if (typeof caller === 'function') {\n          props[name] = caller($target, props[name]);\n        }\n        if (!addToElement) return;\n      }\n    }\n\n    autoUpdate(props[name], value => {\n      if (name === 'model') {\n        name = 'value';\n      } else\n      if (name === 'class' || name === 'className') {\n        if (Array.isArray(value)) {\n          value = value.filter(v => v && typeof v !== 'function').join(' ');\n        }\n      }\n      setProp($target, name, value);\n    });\n  });\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isRemovableProp(value) {\n  return typeof value === 'undefined' || value === false || value === null;\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} newVal\n * @param {*} oldVal\n */\nexport function updateProp($target, name, newVal, oldVal) {\n  if (isRemovableProp(newVal)) {\n    removeProp($target, name, oldVal);\n  } else if (!oldVal || newVal !== oldVal) {\n    setProp($target, name, newVal);\n  }\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {{}} newProps\n * @param {{}} oldProps = {}\n */\nexport function updateProps($target, newProps, oldProps = {}) {\n  const props = Object.assign({}, newProps, oldProps);\n  Object.keys(props).forEach(name => {\n    autoUpdate(newProps[name], value => {\n      if (name === 'model') {\n        name = 'value';\n      }\n      updateProp($target, name, value, oldProps[name]);\n    });\n  });\n}\n\n/**\n * @param {HTMLElement} $target\n * @param {string} name\n * @param {*} value\n */\nexport function addEventListener($target, name, value) {\n  const exceptions = ['mount', 'destroy'];\n  if (isEventProp(name)) {\n    $target.addEventListener(\n      extractEventName(name),\n      (e) => {\n        if (exceptions.indexOf(name) >= 0) {\n          if ($target === e.target) value(e);\n        } else\n        if (typeof value === 'function') {\n          value(e);\n        }\n      },\n      false\n    );\n  }\n}\n","import { destroy } from '../destroy';\nimport { ensureArray } from '../utils';\nimport { fireEvent } from './fireEvent';\nimport { mount } from '../mount';\nimport { render } from './render';\nimport { updateProps } from './props';\n\n/**\n * @param  {Node|Node[]} nodes\n * @param  {HTMLElement} dom\n * @param  {HTMLElement} parent\n * @param  {HTMLElement} $pointer\n * @returns {HTMLElement|HTMLElement[]}\n */\nexport function patch(nodes, dom, parent = dom && dom.parentNode, $pointer = null) {\n  if (Array.isArray(nodes) || Array.isArray(dom)) {\n    const flatNodes = Array.isArray(nodes) && nodes.length === 0 ? [null] : ensureArray(nodes);\n    const flatDom = ensureArray(dom);\n    const ref = Array.isArray(dom)\n      ? dom[0] && dom[0].__radiRef\n      : dom.__radiRef;\n\n    let lastNode = dom;\n\n    const outcome = flatNodes.map((node, ii) => {\n      const staticLastNode = lastNode;\n      const outputNode = patch(\n        node,\n        flatDom[ii],\n        (flatDom[ii] && flatDom[ii].parentNode) || parent,\n        !flatDom[ii] && staticLastNode\n      );\n\n      // Need to memoize last rendered node\n      lastNode = Array.isArray(outputNode)\n        ? outputNode[0]\n        : outputNode;\n\n      // Make nested & updated components update their refrences\n      if (typeof ref === 'function' && ii > 0) {\n        lastNode.__radiRef = (data) => ref(data, ii);\n        lastNode.__radiRef(lastNode, ii);\n      }\n\n      return outputNode;\n    });\n\n    // Unused nodes can be savely remove from DOM\n    if (flatDom.length > flatNodes.length) {\n      const unusedDomNodes = flatDom.slice(flatNodes.length - flatDom.length);\n      unusedDomNodes.forEach(destroy);\n    }\n\n    // Pass new nodes refrence to function containing it\n    if (typeof ref === 'function') ref(outcome);\n\n    return outcome;\n  }\n\n  /*\n    TODO: Make dom structure in before making HTMLElement\n    so that we can diff that structure with existing DOM\n\n    Preferrably it would look like this:\n\n    ```\n    {\n      type: 0,\n      query: function Component() {},\n      props: {},\n      children: [\n        {\n          type: 1,\n          query: 'button',\n          props: {\n            onclick: function dispatch() {}\n          },\n          children: [\n            {\n              type: 2,\n              query: 'Click me'\n            }\n          ]\n        }\n      ]\n    }\n    ```\n  */\n\n  /* Currently we'll render HTMLElements and diff them with real dom */\n\n  const newNode = render(nodes, parent);\n\n  return patchDomRecursively(dom, newNode, parent, $pointer);\n}\n\n/**\n * @param {HTMLElement} node1\n * @param {HTMLElement} node2\n * @returns {boolean}\n */\nfunction nodeChanged(node1, node2) {\n  if (node1.nodeType === 3 && node2.nodeType === 3 && node1.__radiRef) return true;\n  if (node1.nodeType === node2.nodeType) return false;\n  if (node1.nodeName === node2.nodeName) return false;\n\n  return true;\n}\n\n/**\n * @param {NamedNodeMap} value\n * @returns {{}}\n */\nfunction attributesToObject(value) {\n  return [].reduce.call(value, (acc, obj) => ({\n    ...acc,\n    [obj.name]: obj.value,\n  }), {});\n}\n\n/**\n * @param {HTMLElement} oldDom\n * @param {HTMLElement} newDom\n * @param {HTMLElement} parent\n * @param {HTMLElement} pointer\n * @returns {HTMLElement}\n */\nfunction patchDomRecursively(oldDom, newDom, parent, pointer) {\n  const active = document.activeElement;\n\n  if (!oldDom && (pointer || parent)) {\n    const mounter = mount(newDom, parent, pointer);\n    return mounter;\n  }\n\n  if (typeof newDom === 'undefined') {\n    destroy(oldDom);\n    return oldDom;\n  }\n\n  if (oldDom && parent) {\n    if (!nodeChanged(oldDom, newDom)) {\n      if (oldDom.nodeType === 3 && newDom.nodeType === 3\n        && oldDom.textContent !== newDom.textContent) {\n        oldDom.textContent = newDom.textContent;\n\n        fireEvent('mount', newDom, oldDom);\n      }\n\n      if (oldDom.childNodes || newDom.childNodes) {\n        const length = Math.max(oldDom.childNodes.length, newDom.childNodes.length);\n\n        /* We should always run patch childnodes in reverse from last to first\n        because if node is removed, it removes whole element in array */\n        for (let ii = length - 1; ii >= 0; ii--) {\n          patchDomRecursively(\n            oldDom.childNodes[ii],\n            newDom.childNodes[ii] && newDom.childNodes[ii],\n            oldDom\n          );\n        }\n      }\n\n      // TODO: After we have structured objects not dom nodes,\n      // should use props from there\n      if (oldDom.nodeType === 1 && newDom.nodeType === 1) {\n        const oldAttrs = attributesToObject(oldDom.attributes);\n        const newAttrs = attributesToObject(newDom.attributes);\n        updateProps(oldDom, newAttrs, oldAttrs);\n      }\n\n      if (oldDom.__radiRef) {\n        oldDom.__radiRef(oldDom);\n      }\n\n      active.focus();\n      return oldDom;\n    }\n\n    mount(newDom, parent, oldDom);\n\n    if (oldDom.__radiRef) {\n      newDom.__radiRef = oldDom.__radiRef;\n      newDom.__radiRef(newDom);\n    }\n\n    destroy(oldDom);\n  }\n\n  active.focus();\n  return newDom;\n}\n","import {\n  patch,\n  render,\n} from '../html';\nimport { capitalise } from '../utils';\n\nexport class Component {\n  /**\n   * @param {Function} fn\n   */\n  constructor(type) {\n    this.type = type;\n    this.name = type.name;\n    this.render = this.render.bind(this);\n    this.evaluate = this.evaluate.bind(this);\n    this.update = this.update.bind(this);\n    this.updateWithProps = this.updateWithProps.bind(this);\n    this.__$events = {};\n  }\n\n  /**\n   * @param  {string}   event\n   * @param  {Function} fn\n   * @return {Function}\n   */\n  on(event, fn) {\n    const e = this.__$events;\n    const name = `on${capitalise(event)}`;\n    if (!e[name]) e[name] = [];\n    e[name].push(fn);\n    return fn;\n  }\n\n  /**\n   * @param  {string} event\n   * @param  {*[]} args\n   */\n  trigger(event, ...args) {\n    const name = `on${capitalise(event)}`;\n\n    (this.__$events[name] || [])\n      .map(e => e(...args));\n\n    if (typeof this[name] === 'function') {\n      this[name](...args);\n    }\n  }\n\n  /**\n   * @param  {{}} props\n   * @param  {*[]} children\n   */\n  evaluate(props, children) {\n    this.props = props;\n    this.children = children;\n\n    return this.node = this.type.call(\n      this,\n      {\n        ...this.props,\n        children: this.children,\n      }\n    );\n  }\n\n  /**\n   * @param  {string} props\n   * @param  {*[]} children\n   * @param  {HTMLElement} parent\n   */\n  render(props, children, parent) {\n    return this.dom = render(this.evaluate(props, children), parent);\n  }\n\n  /**\n   * @returns {HTMLElement}\n   */\n  update() {\n    const oldDom = this.dom;\n\n    return this.dom = patch(\n      this.evaluate(this.props, this.children),\n      oldDom\n    );\n  }\n\n  /**\n   * @param  {{}} props\n   * @param  {*[]} children\n   * @returns {HTMLElement}\n   */\n  updateWithProps(props = this.props, children = this.children) {\n    this.props = props;\n    this.children = children;\n    return this.update();\n  }\n}\n","import GLOBALS from './consts/GLOBALS';\nimport { Component } from './component';\n\nclass Service {\n  /**\n   * @param  {string}   name\n   * @param  {Function} fn\n   * @param  {*[]}   args\n   * @return {Function}\n   */\n  add(name, fn, ...args) {\n    if (typeof name !== 'string') {\n      throw new Error('[Radi.js] Service first argument has to be string');\n    }\n\n    if (typeof this[name] !== 'undefined' || typeof Component.prototype[name] !== 'undefined') {\n      throw new Error('[Radi.js] Service \"' + name + '\" is already in use');\n    }\n\n    if (typeof fn !== 'function') {\n      throw new Error('[Radi.js] Service second argument has to be function');\n    }\n\n    const mounted = fn(...args);\n\n    Component.prototype[name] = this[name] = mounted;\n\n    return GLOBALS.SERVICES[name] = mounted;\n  }\n}\n\nexport const service = new Service();\n","import { customAttribute } from '../../html/customAttribute';\n\nexport const animate = (target, type, opts, done) => {\n  const direct = opts[type];\n  if (typeof direct !== 'function') {\n    console.warn(`[Radi.js] Animation \\`${type}\\` for node \\`${target.nodeName.toLowerCase}\\` should be function`);\n    return;\n  }\n\n  return direct(target, done);\n};\n\ncustomAttribute('animation', (el, value) => {\n  animate(el, 'in', value, () => {});\n  el.beforedestroy = done => animate(el, 'out', value, done);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('html', (el, value) => {\n  el.addEventListener('mount', () => {\n    if (el.escape) {\n      el.textContent = value;\n    } else {\n      el.innerHTML = value;\n    }\n  });\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('loadfocus', (el) => {\n  el.addEventListener('mount', () =>\n    setTimeout(() => el.focus(), 0)\n  );\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('onsubmit', (el, fn) => {\n  return function(e) {\n    if (el.prevent) e.preventDefault();\n    fn(e, formToJSON(el.elements || {}));\n  }\n}, {\n  allowedTags: [\n    'form',\n  ],\n  addToElement: true,\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\nimport { Store } from '../../store';\n\nexport const errorsStore = new Store({}, 'errorStore');\nconst setErrors = (state, name, errors) => ({\n  ...state,\n  [name]: errors,\n});\n\nfunction extractValue(value) {\n  return Array.isArray(value)\n    ? value.map((arr) => arr.value)\n    : value.value;\n}\n\nfunction extractTouched(value, elements) {\n  return Array.isArray(value)\n    ? [].reduce.call(elements, (acc, val) => (val.touched && true) || acc, false)\n    : value.touched;\n}\n\nfunction fullValidate(elements, rules, update) {\n  let values = formToJSON(elements, ({touched}, value) => ({touched, value}));\n  let plainValues = Object.keys(values)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: extractValue(values[key]),\n    }), {});\n  let errors = [];\n\n  for (let name in values) {\n    const value = values[name];\n\n    if (typeof rules[name] === 'function') {\n      const result = rules[name](extractValue(value), plainValues);\n      const valid = (\n          result\n          && typeof result.check === 'function'\n          && result.check()\n        )\n        || result\n        || name + ' field is invalid';\n\n      if (valid !== true) errors.push({\n        field: name,\n        touched: Boolean(extractTouched(value, elements[name])),\n        error: valid,\n      });\n    }\n  }\n\n  update(errors);\n}\n\nlet formCount = 0;\n\ncustomAttribute('onvalidate', (el, rules) => {\n  const formName = el.name || 'defaultForm' + (formCount++);\n  let submit;\n\n  function update(errors) {\n    errorsStore.dispatch(setErrors, formName, errors);\n  }\n\n  errorsStore.subscribe(state => {\n    if (submit) {\n      submit.disabled = state[formName].length > 0;\n    }\n  });\n\n  el.addEventListener('mount', e => {\n    const validate = rules(e);\n    const elements = el.elements;\n    if (validate && typeof validate === 'object'\n      && elements) {\n\n      for (let element of elements) {\n        const name = element.name;\n\n        if (!element.__radiValidate\n          && typeof name === 'string'\n          && typeof validate[name] === 'function') {\n\n          element.addEventListener('input', () => {\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          })\n          element.__radiValidate = true;\n\n          element.touched = false;\n          const setTouched = ({target}) => {\n            target.touched = true;\n            target.removeEventListener('change', setTouched);\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          };\n          element.addEventListener('change', setTouched);\n        }\n\n        if (element.type === 'submit' && element.disabled === true) {\n          submit = element;\n        }\n      }\n\n      fullValidate(\n        elements,\n        validate,\n        update\n      );\n    }\n  }, false);\n}, {\n  allowedTags: [\n    'form',\n  ],\n});\n","import { customTag } from '../../html';\n\nfunction ensureFn(maybeFn) {\n  if (typeof maybeFn === 'function') return maybeFn;\n  return (e) => maybeFn || e;\n}\n\ncustomTag('await',\n  function Await(props) {\n    let placeholderTimeout;\n    let {\n      src,\n      waitMs,\n      transform = e => e,\n      error = e => e,\n      placeholder = 'Loading..',\n      value = null,\n      loaded = false\n    } = props;\n\n    if (!(src &&\n      (src instanceof Promise || src.constructor.name === 'LazyPromise')\n    )) {\n      console.warn('[Radi] <await/> must have `src` as a Promise');\n      return null;\n    }\n\n    if (!loaded) {\n      if (placeholder !== value) {\n        if (waitMs) {\n          placeholderTimeout = setTimeout(() => {\n            this.updateWithProps({ ...props, value: placeholder });\n          }, waitMs);\n        } else {\n          value = placeholder;\n        }\n      }\n\n      src\n        .then((value) => {\n          clearTimeout(placeholderTimeout);\n          this.updateWithProps({ ...props, value: ensureFn(transform)(value), loaded: true });\n        })\n        .catch((err) => {\n          console.error(err);\n          clearTimeout(placeholderTimeout);\n          this.updateWithProps({ ...props, value: ensureFn(error)(err), loaded: true });\n        })\n    }\n\n    return value;\n  }\n);\n","import { errorsStore } from '../attributes';\nimport { customTag, html } from '../../html';\n\ncustomTag('errors',\n  function Errors({name, onrender = (e) => (e)}) {\n    const state = errorsStore.state;\n\n    if (typeof name === 'undefined') {\n      console.warn('[Radi.js] Warn: Every <errors> tag needs to have `name` attribute!');\n    }\n    if (typeof onrender !== 'function') {\n      console.warn('[Radi.js] Warn: Every <errors> tag needs to have `onrender` attribute!');\n    }\n\n    return html(() => state[name] && onrender(state[name]));\n  }\n);\n","import { service } from '../../service';\nimport { html, customTag } from '../../html';\nimport { Store } from '../../store';\n\nconst h = html;\n\nexport const ModalStore = new Store({});\n\nconst registerModal = (store, name) => ({\n  ...store,\n  [name]: false,\n});\n\nconst switchModal = (store, name, type) => ({\n  ...store,\n  [name]: type,\n});\n\nexport const ModalService = service.add('modal', () => {\n  return {\n    open: (name) => ModalStore.dispatch(switchModal, name, true),\n    close: (name) => ModalStore.dispatch(switchModal, name, false),\n    onOpen: (name, fn) =>\n      ModalStore.subscribe((n, p) => n[name] === true && n[name] !== p[name] && fn()),\n    onClose: (name, fn) =>\n      ModalStore.subscribe((n, p) => n[name] === false && n[name] !== p[name] && fn()),\n  };\n});\n\n// TODO: Figure out a different approach to modal\ncustomTag('modal',\n  function Modal({name = 'default', children}) {\n    const modal = ModalStore.state;\n\n    if (typeof name === 'undefined') {\n      console.warn('[Radi.js] Warn: Every <modal> tag needs to have `name` attribute!');\n    }\n\n    this.onMount = el => {\n      if (!modal[name])\n      ModalStore.dispatch(registerModal, name);\n    }\n\n    return h('portal', {},\n      modal[name] && h('div',\n        { class: 'radi-modal', name },\n        h('div', {\n          class: 'radi-modal-backdrop',\n          onclick: () => service.modal.close(name),\n        }),\n        h('div',\n          { class: 'radi-modal-content' },\n          ...(children.slice())\n        )\n      )\n    );\n  }\n);\n","import { destroy } from '../../destroy';\nimport { mount } from '../../mount';\nimport { customTag, html } from '../../html';\n\ncustomTag('portal',\n  function Portal(data) {\n    const {\n      children = [],\n      parent = data.on || document.body,\n    } = data;\n    let $ref;\n\n    this.onMount = (e) => {\n      mount(function () {\n        this.onMount = (e) => {\n          $ref = this.dom;\n        }\n        return html('portal-body', {}, children)\n      }, parent);\n    };\n\n    this.onDestroy = (e) => {\n      destroy($ref);\n    };\n\n    return null;\n  }\n);\n","const validValue = (value) => (\n  typeof value === 'string'\n    || typeof value === 'number'\n    || value\n);\n\nexport class Validator {\n  constructor(value) {\n    this.value = value;\n    this.rules = [];\n  }\n\n  register({type, validate, error}) {\n    let nn = this.rules.push({\n      type: type,\n      validate: value => (validValue(value) && validate(value)),\n      error: error || 'Invalid field',\n    });\n\n    this.error = text => {\n      this.rules[nn - 1].error = text || error;\n      return this;\n    }\n\n    return this;\n  }\n\n  check(newValue) {\n    if (typeof newValue !== 'undefined') {\n      this.value = newValue;\n    }\n\n    return this.rules.reduce((acc, value) => (\n      typeof acc === 'string' ? acc : (!value.validate(this.value) && value.error) || acc\n    ), true)\n  }\n\n  required() {\n    return this.register({\n      type: 'required',\n      validate: value => value !== '',\n      error: 'Field is required',\n    })\n  }\n\n  test(regexp) {\n    return this.register({\n      type: 'test',\n      validate: value => value === '' || regexp.test(value),\n      error: 'Field must be valid',\n    })\n  }\n\n  includes(include) {\n    return this.register({\n      type: 'includes',\n      validate: value => value === '' ||\n        (Array.isArray(value) && value.indexOf(include) >= 0),\n      error: 'Field must include ' + include,\n    })\n  }\n\n  excludes(exclude) {\n    return this.register({\n      type: 'excludes',\n      validate: value => value === '' ||\n        (Array.isArray(value) && value.indexOf(exclude) < 0),\n      error: 'Field must exclude ' + exclude,\n    })\n  }\n\n  equal(equal) {\n    return this.register({\n      type: 'equal',\n      validate: value => value === '' || value === equal,\n      error: 'Field must be equal to ' + equal,\n    })\n  }\n\n  notEqual(equal) {\n    return this.register({\n      type: 'notEqual',\n      validate: value => value === '' || value !== equal,\n      error: 'Field must not be equal to ' + equal,\n    })\n  }\n\n  min(num) {\n    return this.register({\n      type: 'min',\n      validate: value => value.length >= num,\n      error: 'Min char length is ' + num,\n    })\n  }\n\n  max(num) {\n    return this.register({\n      type: 'max',\n      validate: value => value.length < num,\n      error: 'Max char length is ' + num,\n    })\n  }\n\n  email() {\n    return this.register({\n      type: 'email',\n      validate: value => value === '' || /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n      error: 'Email is not valid',\n    })\n  }\n}\n","import GLOBALS from './consts/GLOBALS';\nimport { service } from './service';\nimport {\n  customAttribute,\n  customTag,\n  html,\n  patch,\n} from './html';\nimport {\n  Fetcher,\n  Store,\n  Subscribe,\n} from './store';\nimport { mount } from './mount';\nimport { destroy } from './destroy';\nimport { Validator } from './custom';\n\nconst Radi = {\n  v: GLOBALS.VERSION,\n  version: GLOBALS.VERSION,\n  h: html,\n  html,\n  Fetcher,\n  Store,\n  customTag,\n  customAttribute,\n  destroy,\n  patch,\n  mount,\n  service,\n  Service: service,\n  Subscribe,\n  Validator,\n};\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (window) window.Radi = Radi;\nexport default Radi;\n"],"names":["const","destroyTree","let","render","component","this","equal"],"mappings":"AAAAA,IAAM,OAAO,GAAG;EACd,OAAO,EAAE,OAAO;EAChB,iBAAiB,EAAE,IAAI;EACvB,iBAAiB,EAAE,EAAE;EACrB,WAAW,EAAE,EAAE;EACf,SAAS,EAAE,KAAK;EAChB,QAAQ,EAAE,EAAE;CACb,CAAC;;;;;;;;ACCF,AAAO,SAAS,eAAe,CAAC,aAAa,EAAE,MAAM,EAAE,GAGjD,EAAE;2BAAP,GAAG,GAFF;oCACA;;;EAEA,OAAO,OAAO,CAAC,iBAAiB,CAAC,aAAa,CAAC,GAAG;IAChD,IAAI,EAAE,aAAa;YACnB,MAAM;IACN,WAAW,EAAE,WAAW,IAAI,IAAI;kBAChC,YAAY;GACb,CAAC;CACH;;;;;;;ACXD,AAAO,SAAS,SAAS,CAAC,OAAO,EAAE,MAAM,EAAE;EACzC,OAAO,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG;IACpC,IAAI,EAAE,OAAO;IACb,MAAM,EAAE,MAAM,iBAAQ,EAAK,CAAC;GAC7B,CAAC;CACH;;;;;ACPD,AAAO,SAASC,cAAW,CAAC,IAAI,EAAE;EAChC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;EAC3B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;;EAE3B,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;IACvBC,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC;IAC/B,OAAO,QAAQ,EAAE;MACfD,cAAW,CAAC,QAAQ,CAAC,CAAC;MACtB,QAAQ,GAAG,QAAQ,CAAC,WAAW,CAAC;KACjC;GACF;CACF;;;;;;;ACVD,AAAO,SAAS,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,QAAgB,EAAE;qCAAV,GAAG;;EAChDD,IAAM,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;EAC9C,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;;EAErC,IAAI,OAAO,KAAK,CAAC,aAAa,KAAK,UAAU,EAAE;IAC7C,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;IACzB,KAAK,CAAC,aAAa,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;GACxC;;EAED,OAAO,KAAK,CAAC;CACd;;;;;;ACXD,AAAO,SAAS,UAAU,CAAC,GAAG,EAAE;EAC9B,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;CACpD;;;;;;ACFD,AAAO,SAAS,OAAO,CAAC,IAAI,EAAE;EAC5B,OAAO,IAAI,CAAC,MAAM,WAAE,CAAC,EAAE,CAAC,EAAE,SAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,IAAC,EAAE,EAAE,CAAC,CAAC;CAC/E;;;;;;ACDD,AAAO,SAAS,WAAW,CAAC,IAAI,EAAE;EAChC,OAAO,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;CACxB;;ACRD;;;;;AAKAA,IAAM,cAAc,aAAG,SAAQ,SAAG,OAAO,CAAC,IAAI,KAAK,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,KAAK,EAAE,IAAC,CAAC;;;;;;;AAO1FA,IAAM,YAAY,aAAG,SAAQ,UAC1B,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,IAAC,CAAC;;;;;;;AAOrEA,IAAM,UAAU,aAAG,SAAQ,SAAG,OAAO,CAAC,IAAI,KAAK,aAAU,CAAC;;;;;;;AAO1DA,IAAM,aAAa,aAAG,SAAQ,SAAG,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,WAAQ,CAAC;;;;;;;AAOrEA,IAAM,eAAe,aAAG,SAAQ,SAC9B,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,YAAG,MAAM,EAAE,MAAM,EAAE,SACvC,MAAM,CAAC,QAAQ;QACX,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;QAC3B,SAAM,EAAE,EAAE,IAAC,CAAC;;;;;;;AAOpB,AAAOA,IAAM,UAAU,aAAI,QAAQ,EAAE,SAAuB,EAAE;yCAAhB,aAAI,CAAC,EAAE,CAAC,EAAE,SAAG;;WACzD,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,YAAG,IAAI,EAAE,OAAO,EAAE;;IAEvC,IAAI,cAAc,CAAC,OAAO,CAAC,EAAE;;;;;MAK3B,IAAI,UAAU,CAAC,OAAO,CAAC,EAAE;QACvB,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,WAAW,IAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,GAAC;QACvE,IAAI,YAAY,CAAC,OAAO,CAAC,EAAE;UACzB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;aACpC,MAAM,CAAC,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;SAC9C;OACF;MACD,IAAI,YAAY,CAAC,OAAO,CAAC,EAAE;QACzB,IAAI,aAAa,CAAC,OAAO,CAAC,EAAE;UAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,OAAO,EAAE,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC;SACnE,MAAM;UACL,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;SACxD;OACF;KACF;;IAED,OAAO,IAAI,CAAC;GACb,EAAE,EAAE;CAAC,CAAC;;;;;;;;;;;;;;;ACvDT,AAAO,SAAS,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAkB;;;;EACtDE,IAAI,IAAI,GAAG,CAAC,OAAO,OAAO,KAAK,QAAQ,UAAO,OAAO,IAAK,OAAO,CAAC;EAClEA,IAAI,KAAK,GAAG,QAAQ,IAAI,EAAE,CAAC;EAC3BF,IAAM,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;;EAEtC,IAAI,IAAI,YAAY,OAAO,KAAK,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,KAAK,aAAa,CAAC,EAAE;IAChF,IAAI,GAAG,OAAO,CAAC;IACf,KAAK,GAAG;MACN,GAAG,EAAE,OAAO;KACb,CAAC;GACH;;EAED,OAAO;UACL,IAAI;WACJ,KAAK;cACL,QAAQ;GACT,CAAC;CACH;;;;;;;;ACzBD,AAAO,SAAS,WAAW,CAAC,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE;EACxD,IAAI,CAAC,OAAO,IAAE,OAAO,GAAG,UAAU,CAAC,UAAU,GAAC;;EAE9C,IAAI,OAAO,YAAY,IAAI,EAAE;IAC3B,IAAI,UAAU,KAAK,IAAI,IAAI,UAAU,KAAK,SAAS,EAAE;MACnD,OAAO,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;KAClD;;IAED,IAAI,UAAU,YAAY,IAAI,EAAE;MAC9B,OAAO,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,UAAU,CAAC,WAAW,CAAC,CAAC;KAC9D;GACF;;EAED,OAAO,OAAO,CAAC;CAChB;;;;;;ACdD,AAAO,SAAS,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE;EACxC,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,UAAU,EAAE;IAC5C,OAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;GACjC;;EAED,OAAO,IAAI,EAAE,CAAC;CACf;;;;;AAKD,AAAO,SAAS,OAAO,CAAC,IAAI,EAAE;EAC5BA,IAAM,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;;EAEhC,KAAK,CAAC,GAAG,WAAC,MAAK;IACb,IAAI,EAAE,IAAI,YAAY,IAAI,CAAC,IAAE,SAAO;;IAEpCA,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;IAC/B,IAAI,IAAI,YAAY,IAAI,IAAI,MAAM,YAAY,IAAI,EAAE;MAClD,aAAa,CAAC,IAAI,cAAK;;QAErB,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACzBC,cAAW,CAAC,IAAI,CAAC,CAAC;OACnB,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;CACJ;;;;;;;;;;;;;;;ACbD,AAAO,SAAS,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;EAC5CD,IAAM,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;;EAEhC,OAAO,KAAK,CAAC,GAAG,WAAC,MAAK;IACpBA,IAAM,YAAY,GAAGG,SAAM,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;IAE7C,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;MAC/B,OAAO,KAAK,CAAC,YAAY,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;KAC9C;;IAED,IAAI,KAAK,IAAI,KAAK,CAAC,UAAU,EAAE;MAC7B,KAAK,GAAG,WAAW,CAAC,YAAY,EAAE,KAAK,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC;MAC3D,SAAS,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;MACjC,OAAO,KAAK,CAAC;KACd;;IAED,IAAI,CAAC,SAAS,EAAE;MACd,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;MACrC,OAAO,KAAK,CAAC;KACd;;IAEDH,IAAM,SAAS,GAAG,SAAS,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;IACtD,SAAS,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;IACjC,OAAO,SAAS,CAAC;GAClB,CAAC,CAAC;CACJ;;AC3CDE,IAAI,WAAW,GAAG,EAAE,CAAC;;;;;;AAMrB,SAAS,gBAAgB,CAAC,IAAI,EAAE;EAC9BF,IAAM,EAAE,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC;EAC/B,IAAI,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE;IAC/B,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GACtB;EACD,OAAO,EAAE,CAAC;CACX;;AAED,SAAS,gBAAgB,GAAG;EAC1B,WAAW,GAAG,EAAE,CAAC;CAClB;;AAED,IAAM,YAAY,GAIhB,qBAAW,GAAG;EACd,IAAM,CAAC,YAAY,GAAG,EAAE,CAAC;EACxB;;;;;;AAMH,uBAAE,oBAAI,IAAI,EAAE,SAAS,EAAE;EACrB,IAAQ,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;EACtB,IAAM,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,WAAW,IAAE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,GAAC;;EAEjF,IAAM,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;;IAEnD,IAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;GACxC;;EAEH,IAAM,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,MAAM,WAAC,GAAE;IACzD,IAAM,CAAC,CAAC,GAAG,YAAY,IAAI,EAAE;MAC3B,OAAS,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC;KAC1B;;IAEH,OAAS,IAAI,CAAC;GACb,CAAC,CAAC;EACJ;;;;;;AAMH,uBAAE,0BAAO,IAAI,EAAE,SAAS,EAAE;EACxB,IAAQ,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;EACtB,IAAQ,KAAK,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;EAClE,IAAM,KAAK,IAAI,CAAC,EAAE;;IAEhB,IAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;GACzC;EACF;;;;;;AAMH,uBAAE,gCAAU,IAAI,EAAEI,WAAS,EAAE;;;EAC3B,IAAMA,WAAS,EAAE;IACf,IAAM,CAAC,GAAG,CAAC,IAAI,EAAEA,WAAS,CAAC,CAAC;;IAE5B,WAAW,CAAC,WAAW,eAAM;MAC3B,MAAM,CAAC,MAAM,CAAC,IAAI,EAAEA,WAAS,CAAC,CAAC;KAC9B,CAAC;GACH;EACH,OAASA,WAAS,CAAC;EAClB;;;;;;;AAOH,uBAAE,4BAAQ,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE;EACjC,IAAM,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE;IAC5B,IAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,OAAO,WAAC,IAAG;MAClC,gBAAkB,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC;QACzC,CAAC,CAAC;GACJ;CACF,CACF;;;;;;AAMDJ,IAAM,IAAI,aAAG,GAAE,SAAG,IAAC,CAAC;;AAEpB,AAAO,IAAM,QAAQ,GAOnB,iBAAW,CAAC,GAAG,EAAE,KAAK,EAAE;EACxB,IAAM,CAAC,GAAG,GAAG,GAAG,CAAC;EACjB,IAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC3C,IAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACvC,IAAM,CAAC,KAAK,GAAG,KAAK,CAAC;EACrB,IAAM,CAAC,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC;EACxB;;;;;;AAMH,mBAAE,8BAAS,OAAO,EAAE;EAClB,IAAQ,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;;EAEjC,IAAM,CAAC,IAAI,CAAC,MAAM,EAAE;IAClB,IAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;GAC1C;;EAEH,OAAS,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;EACtC;;;;;AAKH,mBAAE,4BAAS;EACT,IAAQ,IAAI,GAAG,IAAI,CAAC;;EAEpB,QAAU,YAAY;IACpB,IAAQ,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1C,OAAS,WAAW,CAAC;GACpB,EAAE;CACJ,CACF;;;;;;AAMD,SAAS,QAAQ,CAAC,KAAK,EAAE;EACvB,OAAO,KAAK;IACV,KAAK,CAAC,WAAW,KAAK,MAAM;OACzB,KAAK,CAAC,WAAW,KAAK,KAAK;GAC/B,CAAC;CACH;;;;;;;;AAQD,SAAS,SAAS,CAAC,KAAK,EAAE,KAAK,EAAE,IAAS,EAAE;6BAAP,GAAG;;EACtC,IAAI,KAAK,EAAE;IACT,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;MACnBA,IAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC;MAChD,KAAKA,IAAM,GAAG,IAAI,KAAK,EAAE;QACvB,QAAQ,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;OAChE;MACD,OAAO,QAAQ,CAAC;KACjB;;IAED,IAAI,KAAK,YAAY,KAAK,EAAE;MAC1B,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,YAAG,QAAQ,EAAE;QACrC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;OAChD,CAAC,CAAC;MACH,OAAO,KAAK,CAAC,GAAG,EAAE,CAAC;KACpB;GACF;;EAED,OAAO,KAAK,CAAC;CACd;;;;;;;;AAQD,SAAS,QAAQ,CAAC,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE;EACnC,IAAI,KAAK,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;IAC5BA,IAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;QAC/B,WAAI,KAAK,EAAC;QACV,kBAAK,KAAK,CAAE,CAAC;IACjB,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;IACpB,OAAO,MAAM,CAAC;GACf;;EAED,OAAO,KAAK,CAAC;CACd;;AAED,AAAO,IAAM,KAAK,GAKhB,cAAW,CAAC,KAAK,EAAE;EACnB,IAAM,CAAC,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;EACzC,IAAM,CAAC,SAAS,GAAG,IAAI,CAAC;EACxB,IAAM,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACnD,IAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC3C,IAAM,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC7C,IAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACvC,IAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACjC,IAAM,CAAC,WAAW,GAAG,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;;;2DAC3C;;;;;AAKH,mBAAM,wBAAQ;EACZ,IAAM,OAAO,CAAC,iBAAiB,EAAE;IAC/B,IAAM,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE,OAAO,CAAC,iBAAiB,CAAC,CAAC;GAC7D;;EAEH,OAAS,IAAI,CAAC,GAAG,EAAE,CAAC;EACnB;;;;;AAKH,gBAAE,sBAAM;EACN,OAAS,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;EACzC;;;;;;AAMH,gBAAE,oBAAI,SAAS,EAAE;EACf,IAAQ,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;EAC9B,IAAM,CAAC,SAAS,aAAI,IAAI,EAAE,SAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAC,CAAC;EACnD,OAAS,IAAI,CAAC;EACb;;;;;;;;AAQH,gBAAE,kCAAW,IAAI,EAAE,QAAQ,EAAE,MAAyB,EAAE;mCAArB,GAAG,IAAI,CAAC;;EACzC,IAAM,MAAM,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;IACnC;MAAqB,6BAAiB;IACtC,OAAS,QAAQ,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;GACxF;;EAEH,OAAS,QAAQ,CAAC;EACjB;;;;;;AAMH,gBAAE,0BAAO,QAAQ,EAAE;EACjB,IAAQ,WAAW,GAAG,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;EAChD,IAAQ,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;EAC9B,IAAM,CAAC,WAAW,GAAG,WAAW,CAAC;EACjC,IAAM,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAC,CAAC;EACvD,gBAAkB,EAAE,CAAC;EACrB,OAAS,IAAI,CAAC,GAAG,EAAE,CAAC;EACnB;;;;;;AAMH,gBAAE,gCAAU,QAAQ,EAAE;EACpB,IAAM,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;EACvC,QAAU,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,IAAI,CAAC,CAAC;EAC7B,OAAS,IAAI,CAAC;EACb;;;;;AAKH,gBAAE,oCAAY,UAAU,EAAE;EACxB,IAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;EAC3C;;;;;;;AAOH,gBAAE,8BAAS,MAAM,EAAW;;;;EAC1B,IAAQ,OAAO,GAAG,YAAM,WAAC,IAAI,CAAC,WAAW,WAAK,MAAI,CAAC,CAAC;;;;;;;EAOpD,OAAS,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;EAC7B;;;;;;;AAOH,gBAAE,sCAAa,MAAM,EAAW;;;;;EAC9B,mBAAoB;;;;;oBAAGK,QAAK,cAAQ,QAAC,MAAM,WAAK,IAAI,EAAE,OAAQ;KAAC,CAAC;EAC/D;;;;;;AAMH,gBAAE,8BAAS,gBAAyB,EAAE;uDAAX,aAAG,GAAE,SAAG;;EACjC,OAAS,IAAI,QAAQ,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;CAC7C;;+DACF;;AC3TM,SAAS,OAAO,CAAC,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;EAChD,iBAAQ,QAAQ,EAAE;IAChBL,IAAM,YAAY,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC;;IAEzC,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;MAClC,QAAQ,EAAE;SACP,IAAI,CAAC,OAAO,eAAM,QAAQ,EAAE;UAC3B,YAAY,CAAC,QAAQ,aAAI,SAAG,WAAQ,CAAC,CAAC;SACvC,CAAC,CAAC;SACF,KAAK,CAAC,KAAK,eAAM,GAAG,EAAE;UACrB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SACpB,CAAC,CAAC,CAAC;KACP;;IAED,OAAO,YAAY,CAAC;GACrB,CAAC;CACH;;;;;;ACZD,AAAO,SAAS,SAAS,CAAC,MAAiB,EAAE;iCAAb,GAAG;;EACjC,OAAO;;;;;;IAML,EAAE,YAAG,WAAW,EAAE,WAAoB,EAAE;+CAAX,aAAG,GAAE,SAAG;;MACnCA,IAAM,MAAM,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MAC7CE,IAAI,iBAAiB,GAAG,IAAI,CAAC;MAC7BA,IAAI,cAAc,GAAG,IAAI,CAAC;MAC1BA,IAAI,WAAW,GAAG,IAAI,CAAC;MACvBA,IAAI,KAAK,GAAG,KAAK,CAAC;;MAElB,IAAI,OAAO,WAAW,KAAK,UAAU,EAAE;QACrC,MAAM,IAAI,KAAK,+BAA6B,WAAW,wCAAqC,CAAC;OAC9F;;MAED,SAAS,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE;QACnCF,IAAM,KAAK,GAAG,OAAO,QAAQ,KAAK,WAAW,GAAG,QAAQ,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC;;QAE/E,KAAK,GAAG,IAAI,CAAC;QACb,cAAc,GAAG,QAAQ,CAAC;QAC1B,WAAW,GAAG,KAAK,CAAC;QACpB,MAAM,CAAC,OAAO,WAAC,OAAM,SAAG,MAAM,CAAC,gBAAgB,CAAC,KAAK;UACnD,iBAAiB,eAAa;;;;qBAC5B,KAAK,CAAC,QAAQ,aAAI,SAAG,iBAAW,CAAC,QAAG,IAAI,UAAE,QAAK,IAAC;WAAC;YACpD,CAAC,CAAC;;QAEH,OAAO,KAAK,CAAC;OACd;;MAED,OAAO,CAAC,IAAI,eAAM;QAChB,IAAI,KAAK,EAAE;UACT,MAAM,CAAC,OAAO,WAAC,OAAM,SAAG,MAAM,CAAC,mBAAmB,CAAC,KAAK,EAAE,iBAAiB,IAAC,CAAC,CAAC;SAC/E;QACD,OAAO,KAAK,GAAG,CAAC,KAAK,CAAC;OACvB,CAAC;MACF,OAAO,CAAC,KAAK,eAAM,SAAG,CAAC,KAAK,IAAI,OAAO,CAAC,cAAc,EAAE,WAAW,IAAC,CAAC;;MAErE,OAAO,OAAO,CAAC;KAChB;GACF,CAAC;CACH;;;;;;ACtCD,SAAS,UAAU,CAAC,QAAQ,EAAE;EAC5B,iBAAQ,IAAI,EAAE,EAAE,EAAE;IAChB,IAAI,EAAE,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;MACrC,OAAO,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;KAChC;IACD,OAAO,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC;GAC5B,CAAC;CACH;;;;;;;AAOD,AAAO,SAASG,SAAM,CAAC,IAAI,EAAE,OAAO,EAAE;EACpC,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;IACvBH,IAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,WAAC,GAAE,SAAGG,SAAM,CAAC,CAAC,EAAE,OAAO,IAAC,CAAC,CAAC;;;;IAI1D,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,IAAE,OAAOA,SAAM,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC,GAAC;;IAExD,OAAO,MAAM,CAAC;GACf;;EAED,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,EAAE;IAC3C,OAAOA,SAAM,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;GACtC;;EAED,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,KAAK,OAAO,IAAI,KAAK,UAAU,EAAE;IAC3EH,IAAM,WAAW,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;IACtCA,IAAM,QAAQ,GAAG,IAAI,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACvEA,IAAM,aAAa,GAAG,OAAO,CAAC,iBAAiB,CAAC;IAChD,OAAO,CAAC,iBAAiB,GAAG,QAAQ,CAAC;IACrCA,IAAM,iBAAiB,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;;IAE9EE,IAAI,SAAS,CAAC;;IAEd,IAAI,iBAAiB,IAAI,OAAO,iBAAiB,CAAC,gBAAgB,KAAK,UAAU,EAAE;MACjF,iBAAiB,CAAC,gBAAgB,CAAC,OAAO,cAAK;QAC7C,IAAI,OAAO,QAAQ,CAAC,KAAK,KAAK,QAAQ,EAAE;UACtC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;UAC5C,SAAS,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;UACrC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SACtC;QACD,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;OAC9C,EAAE;QACD,OAAO,EAAE,IAAI;QACb,IAAI,EAAE,IAAI;OACX,EAAE,KAAK,CAAC,CAAC;;MAEV,iBAAiB,CAAC,gBAAgB,CAAC,SAAS,cAAK;QAC/C,QAAQ,CAAC,OAAO,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;QAC/C,IAAI,SAAS,YAAY,IAAI,EAAE;UAC7B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SACtC;OACF,EAAE;QACD,OAAO,EAAE,IAAI;QACb,IAAI,EAAE,IAAI;OACX,EAAE,KAAK,CAAC,CAAC;KACX;;IAED,IAAI,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE;MACpC,iBAAiB,CAAC,OAAO,WAAE,QAAQ,EAAE;QACnC,IAAI,QAAQ,IAAI,OAAO,QAAQ,CAAC,gBAAgB,KAAK,UAAU,EAAE;UAC/D,QAAQ,CAAC,gBAAgB,CAAC,OAAO,cAAK;YACpC,IAAI,OAAO,QAAQ,CAAC,KAAK,KAAK,QAAQ,EAAE;cACtC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;cAC5C,SAAS,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;cACrC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;aACtC;YACD,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;WACrC,EAAE;YACD,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,IAAI;WACX,EAAE,KAAK,CAAC,CAAC;;UAEV,QAAQ,CAAC,gBAAgB,CAAC,SAAS,cAAK;YACtC,QAAQ,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;YACtC,IAAI,SAAS,YAAY,IAAI,EAAE;cAC7B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;aACtC;WACF,EAAE;YACD,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,IAAI;WACX,EAAE,KAAK,CAAC,CAAC;SACX;OACF,CAAC,CAAC;KACJ;;IAED,IAAI,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE;MACpC,iBAAiB,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;KACvD,MAAM;MACL,iBAAiB,CAAC,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;KACpD;IACD,OAAO,CAAC,iBAAiB,GAAG,aAAa,CAAC;;IAE1C,OAAO,iBAAiB,CAAC;GAC1B;;EAED,IAAI,IAAI,YAAY,IAAI,EAAE;IACxB,OAAO,IAAI,CAAC;GACb;;EAED,IAAI,IAAI,YAAY,QAAQ,EAAE;IAC5B,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;GACtB;;EAED,IAAI,IAAI,YAAY,OAAO,EAAE;IAC3B,OAAOC,SAAM,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;GAC/E;;;EAGD,IAAI,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,OAAO,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,EAAE;;;;EAI7F,IAAI,CAAC,IAAI,EAAE;IACT,OAAO,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;GACnC;;EAED,IAAI;IACF,OAAO,IAAI,CAAC,IAAI,KAAK,WAAW;OAC7B,OAAO,IAAI,CAAC,KAAK,KAAK,WAAW;OACjC,OAAO,IAAI,CAAC,QAAQ,KAAK,WAAW;GACxC,EAAE;IACD,OAAO,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;GACtD;;EAED,IAAI,OAAO,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,WAAW,EAAE;IACzD,OAAOA,SAAM,CAAC,kBACT,IAAI;OACP,IAAI,EAAE,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAM,CAC5C,EAAE,OAAO,CAAC,CAAC;GACb;;;EAGDD,IAAI,OAAO,CAAC;EACZ,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,IAAI,OAAO,YAAY,UAAU,EAAE;IACxD,OAAO,GAAG,QAAQ,CAAC,eAAe;MAChC,4BAA4B;MAC5B,IAAI,CAAC,IAAI;KACV,CAAC;GACH,MAAM;IACL,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAC7C;;;EAGD,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;;;EAG9B,IAAI,IAAI,CAAC,QAAQ,EAAE;IACjB,OAAO,CAAC,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,OAAO,WAAC,OAAM;MACzCF,IAAM,SAAS,GAAG,KAAK,YAAY,IAAI,GAAG,KAAK,GAAGG,SAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;MACzE,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;KAC3B,CAAC,CAAC;GACJ;;EAED,OAAO,OAAO,CAAC;CAChB;;;;;;;AClKD,SAAS,UAAU,CAAC,KAAK,EAAE,EAAE,EAAE;EAC7B,IAAI,KAAK,YAAY,QAAQ,EAAE;IAC7B,OAAO,EAAE,CAAC,KAAK,CAAC,QAAQ,WAAC,GAAE,SAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,IAAC,CAAC,CAAC,CAAC;GAClD;EACD,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;CAClB;;;;;;;AAOD,SAAS,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE;EAC5C,IAAI,KAAK,EAAE;IACT,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IAClC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;GACtB,MAAM;IACL,OAAO,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;GACvB;CACF;;;;;;AAMD,SAAS,iBAAiB,CAAC,OAAO,EAAE,IAAI,EAAE;EACxC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;EAC9B,OAAO,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;CACvB;;;;;;AAMD,SAAS,WAAW,CAAC,IAAI,EAAE;EACzB,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;CACzB;;;;;;AAMD,SAAS,gBAAgB,CAAC,IAAI,EAAE;EAC9B,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;CACpC;;;;;;AAMD,SAAS,YAAY,CAAC,IAAI,EAAE;EAC1B,OAAO,WAAW,CAAC,IAAI,CAAC,CAAC;CAC1B;;;;;;;AAOD,AAAO,SAAS,OAAO,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE;EAC5C,IAAI,IAAI,KAAK,OAAO,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;IACjD,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;GAC3B,MAAM,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE;IAC7B,gBAAgB,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;GACxC,MAAM,IAAI,IAAI,KAAK,WAAW,EAAE;IAC/B,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;GACtC,MAAM,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;IACrC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;GACtC,MAAM;IACL,IAAI,IAAI,KAAK,OAAO,IAAI,QAAQ,CAAC,aAAa,KAAK,OAAO,EAAE;MAC1D,OAAO,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;KACvB;IACD,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;GACnC;CACF;;;;;;;AAOD,AAAO,SAAS,UAAU,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE;EAC/C,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE;;GAEvB,MAAM,IAAI,IAAI,KAAK,WAAW,EAAE;IAC/B,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;GAClC,MAAM,IAAI,OAAO,KAAK,KAAK,SAAS,EAAE;IACrC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;GAClC,MAAM;IACL,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;GAC/B;CACF;;;;;;AAMD,AAAO,SAAS,SAAS,CAAC,OAAO,EAAE,MAAM,EAAE;EACzC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,WAAC,MAAK;IAC/B,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,YAAE,OAAM;MAC7B,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;KAC7B,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;;;;;AAMD,AAAO,SAAS,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE;EACvC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,EAAE,OAAO,WAAC,MAAK;IACtC,IAAI,OAAO,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,WAAW,EAAE;MAC1D,OAA2C,GAAG,OAAO,CAAC,iBAAiB,CAAC,IAAI;MAApE;MAAa;MAAc,wBAA2C;;MAE9E,IAAI,CAAC,WAAW;QACd,WAAW;WACR,WAAW,CAAC,MAAM,GAAG,CAAC;WACtB,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC;OAC/C,EAAE;QACD,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;UAChC,KAAK,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;SAC5C;QACD,IAAI,CAAC,YAAY,IAAE,SAAO;OAC3B;KACF;;IAED,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,YAAE,OAAM;MAC5B,IAAI,IAAI,KAAK,OAAO,EAAE;QACpB,IAAI,GAAG,OAAO,CAAC;OAChB;MACD,IAAI,IAAI,KAAK,OAAO,IAAI,IAAI,KAAK,WAAW,EAAE;QAC5C,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;UACxB,KAAK,GAAG,KAAK,CAAC,MAAM,WAAC,GAAE,SAAG,CAAC,IAAI,OAAO,CAAC,KAAK,aAAU,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACnE;OACF;MACD,OAAO,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;KAC/B,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;;;;;AAMD,SAAS,eAAe,CAAC,KAAK,EAAE;EAC9B,OAAO,OAAO,KAAK,KAAK,WAAW,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,CAAC;CAC1E;;;;;;;;AAQD,AAAO,SAAS,UAAU,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE;EACxD,IAAI,eAAe,CAAC,MAAM,CAAC,EAAE;IAC3B,UAAU,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;GACnC,MAAM,IAAI,CAAC,MAAM,IAAI,MAAM,KAAK,MAAM,EAAE;IACvC,OAAO,CAAC,OAAO,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;GAChC;CACF;;;;;;;AAOD,AAAO,SAAS,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAa,EAAE;qCAAP,GAAG;;EACxDH,IAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;EACpD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,WAAC,MAAK;IAC9B,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAE,OAAM;MAC/B,IAAI,IAAI,KAAK,OAAO,EAAE;QACpB,IAAI,GAAG,OAAO,CAAC;OAChB;MACD,UAAU,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;KAClD,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;;;;;;AAOD,AAAO,SAAS,gBAAgB,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE;EACrDA,IAAM,UAAU,GAAG,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;EACxC,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE;IACrB,OAAO,CAAC,gBAAgB;MACtB,gBAAgB,CAAC,IAAI,CAAC;gBACrB,CAAC,EAAE;QACF,IAAI,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;UACjC,IAAI,OAAO,KAAK,CAAC,CAAC,MAAM,IAAE,KAAK,CAAC,CAAC,CAAC,GAAC;SACpC;QACD,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;UAC/B,KAAK,CAAC,CAAC,CAAC,CAAC;SACV;OACF;MACD,KAAK;KACN,CAAC;GACH;CACF;;;;;;;;;AClMD,AAAO,SAAS,KAAK,CAAC,KAAK,EAAE,GAAG,EAAE,MAA8B,EAAE,QAAe,EAAE;iCAA3C,GAAG,GAAG,IAAI,GAAG,CAAC;qCAAoB,GAAG;;EAC3E,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;IAC9CA,IAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;IAC3FA,IAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;IACjCA,IAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;QAC1B,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS;QAC1B,GAAG,CAAC,SAAS,CAAC;;IAElBE,IAAI,QAAQ,GAAG,GAAG,CAAC;;IAEnBF,IAAM,OAAO,GAAG,SAAS,CAAC,GAAG,WAAE,IAAI,EAAE,EAAE,EAAE;MACvCA,IAAM,cAAc,GAAG,QAAQ,CAAC;MAChCA,IAAM,UAAU,GAAG,KAAK;QACtB,IAAI;QACJ,OAAO,CAAC,EAAE,CAAC;QACX,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,OAAO,CAAC,EAAE,CAAC,CAAC,UAAU,KAAK,MAAM;QACjD,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,cAAc;OAC/B,CAAC;;;MAGF,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC;UAChC,UAAU,CAAC,CAAC,CAAC;UACb,UAAU,CAAC;;;MAGf,IAAI,OAAO,GAAG,KAAK,UAAU,IAAI,EAAE,GAAG,CAAC,EAAE;QACvC,QAAQ,CAAC,SAAS,aAAI,IAAI,EAAE,SAAG,GAAG,CAAC,IAAI,EAAE,EAAE,IAAC,CAAC;QAC7C,QAAQ,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;OAClC;;MAED,OAAO,UAAU,CAAC;KACnB,CAAC,CAAC;;;IAGH,IAAI,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,EAAE;MACrCA,IAAM,cAAc,GAAG,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;MACxE,cAAc,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACjC;;;IAGD,IAAI,OAAO,GAAG,KAAK,UAAU,IAAE,GAAG,CAAC,OAAO,CAAC,GAAC;;IAE5C,OAAO,OAAO,CAAC;GAChB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAkCDA,IAAM,OAAO,GAAGG,SAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;;EAEtC,OAAO,mBAAmB,CAAC,GAAG,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;CAC5D;;;;;;;AAOD,SAAS,WAAW,CAAC,KAAK,EAAE,KAAK,EAAE;EACjC,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,IAAI,KAAK,CAAC,QAAQ,KAAK,CAAC,IAAI,KAAK,CAAC,SAAS,IAAE,OAAO,IAAI,GAAC;EACjF,IAAI,KAAK,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,IAAE,OAAO,KAAK,GAAC;EACpD,IAAI,KAAK,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,IAAE,OAAO,KAAK,GAAC;;EAEpD,OAAO,IAAI,CAAC;CACb;;;;;;AAMD,SAAS,kBAAkB,CAAC,KAAK,EAAE;EACjC,OAAO,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,YAAG,GAAG,EAAE,GAAG,EAAE;;;YAAI,kBACvC,GAAG;uBACN,CAAC,GAAG,CAAC,IAAI,CAAC,GAAE,GAAG,CAAC,KAAK,SACtB;GAAC,EAAE,EAAE,CAAC,CAAC;CACT;;;;;;;;;AASD,SAAS,mBAAmB,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE;EAC5DH,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC;;EAEtC,IAAI,CAAC,MAAM,KAAK,OAAO,IAAI,MAAM,CAAC,EAAE;IAClCA,IAAM,OAAO,GAAG,KAAK,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;IAC/C,OAAO,OAAO,CAAC;GAChB;;EAED,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;IACjC,OAAO,CAAC,MAAM,CAAC,CAAC;IAChB,OAAO,MAAM,CAAC;GACf;;EAED,IAAI,MAAM,IAAI,MAAM,EAAE;IACpB,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;MAChC,IAAI,MAAM,CAAC,QAAQ,KAAK,CAAC,IAAI,MAAM,CAAC,QAAQ,KAAK,CAAC;WAC7C,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC,WAAW,EAAE;QAC9C,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC;;QAExC,SAAS,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;OACpC;;MAED,IAAI,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,UAAU,EAAE;QAC1CA,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;;;;QAI5E,KAAKE,IAAI,EAAE,GAAG,MAAM,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE;UACvC,mBAAmB;YACjB,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;YACrB,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;YAC9C,MAAM;WACP,CAAC;SACH;OACF;;;;MAID,IAAI,MAAM,CAAC,QAAQ,KAAK,CAAC,IAAI,MAAM,CAAC,QAAQ,KAAK,CAAC,EAAE;QAClDF,IAAM,QAAQ,GAAG,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACvDA,IAAM,QAAQ,GAAG,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACvD,WAAW,CAAC,MAAM,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;OACzC;;MAED,IAAI,MAAM,CAAC,SAAS,EAAE;QACpB,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;OAC1B;;MAED,MAAM,CAAC,KAAK,EAAE,CAAC;MACf,OAAO,MAAM,CAAC;KACf;;IAED,KAAK,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;;IAE9B,IAAI,MAAM,CAAC,SAAS,EAAE;MACpB,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;MACpC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;KAC1B;;IAED,OAAO,CAAC,MAAM,CAAC,CAAC;GACjB;;EAED,MAAM,CAAC,KAAK,EAAE,CAAC;EACf,OAAO,MAAM,CAAC;CACf;;ACzLM,IAAM,SAAS,GAIpB,kBAAW,CAAC,IAAI,EAAE;EAClB,IAAM,CAAC,IAAI,GAAG,IAAI,CAAC;EACnB,IAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;EACxB,IAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACvC,IAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC3C,IAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACvC,IAAM,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACzD,IAAM,CAAC,SAAS,GAAG,EAAE,CAAC;EACrB;;;;;;;AAOH,oBAAE,kBAAG,KAAK,EAAE,EAAE,EAAE;EACd,IAAQ,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;EAC3B,IAAQ,IAAI,GAAG,QAAK,UAAU,CAAC,KAAK,CAAC,CAAE,CAAC;EACxC,IAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAC;EAC7B,CAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;EACnB,OAAS,EAAE,CAAC;EACX;;;;;;AAMH,oBAAE,4BAAQ,KAAK,EAAW;;;;2DAAC;EACzB,IAAQ,IAAI,GAAG,QAAK,UAAU,CAAC,KAAK,CAAC,CAAE,CAAC;;EAExC,CAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE;KACxB,GAAG,WAAC,GAAE,SAAG,OAAC,CAAC,QAAG,IAAI,IAAC,CAAC,CAAC;;EAE1B,IAAM,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,UAAU,EAAE;IACtC,OAAE,MAAK,IAAI,OAAC,CAAC,KAAG,IAAI,CAAC,CAAC;GACrB;EACF;;;;;;AAMH,oBAAE,8BAAS,KAAK,EAAE,QAAQ,EAAE;EAC1B,IAAM,CAAC,KAAK,GAAG,KAAK,CAAC;EACrB,IAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;;EAE3B,OAAS,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI;IACjC,IAAM;IACN,kBACO,IAAI,CAAC,KAAK;MACf,CAAE,QAAQ,EAAE,IAAI,CAAC,SAAQ,CACxB;GACF,CAAC;EACH;;;;;;;AAOH,oBAAE,4BAAO,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE;EAChC,OAAS,IAAI,CAAC,GAAG,GAAGG,SAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,EAAE,MAAM,CAAC,CAAC;EAClE;;;;;AAKH,oBAAE,4BAAS;EACT,IAAQ,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC;;EAE1B,OAAS,IAAI,CAAC,GAAG,GAAG,KAAK;IACvB,IAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;IAC1C,MAAQ;GACP,CAAC;EACH;;;;;;;AAOH,oBAAE,4CAAgB,KAAkB,EAAE,QAAwB,EAAE;iCAAzC,GAAG,IAAI,CAAC;uCAAe,GAAG,IAAI,CAAC;;EACpD,IAAM,CAAC,KAAK,GAAG,KAAK,CAAC;EACrB,IAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;EAC3B,OAAS,IAAI,CAAC,MAAM,EAAE,CAAC;CACtB,CACF;;AC7FD,IAAM,OAAO;;kBAOX,oBAAI,IAAI,EAAE,EAAE,EAAW;;;;EACvB,IAAM,OAAO,IAAI,KAAK,QAAQ,EAAE;IAC9B,MAAQ,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAC;GACtE;;EAEH,IAAM,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,WAAW,IAAI,OAAO,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,WAAW,EAAE;IAC3F,MAAQ,IAAI,KAAK,CAAC,qBAAqB,GAAG,IAAI,GAAG,qBAAqB,CAAC,CAAC;GACvE;;EAEH,IAAM,OAAO,EAAE,KAAK,UAAU,EAAE;IAC9B,MAAQ,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;GACzE;;EAEH,IAAQ,OAAO,GAAG,QAAE,CAAC,QAAG,IAAI,CAAC,CAAC;;EAE9B,SAAW,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC;;EAEnD,OAAS,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC;CACzC,CACF;;AAED,AAAOH,IAAM,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;;AC7B9BA,IAAM,OAAO,aAAI,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;EAChDA,IAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;EAC1B,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;IAChC,OAAO,CAAC,IAAI,4BAA0B,IAAI,qBAAiB,MAAM,CAAC,QAAQ,CAAC,YAAW,2BAAwB,CAAC;IAC/G,OAAO;GACR;;EAED,OAAO,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;CAC7B,CAAC;;AAEF,eAAe,CAAC,WAAW,YAAG,EAAE,EAAE,KAAK,EAAE;EACvC,OAAO,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,cAAK,EAAK,CAAC,CAAC;EACnC,EAAE,CAAC,aAAa,aAAG,MAAK,SAAG,OAAO,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,IAAC,CAAC;CAC5D,CAAC,CAAC;;ACbH,eAAe,CAAC,MAAM,YAAG,EAAE,EAAE,KAAK,EAAE;EAClC,EAAE,CAAC,gBAAgB,CAAC,OAAO,cAAK;IAC9B,IAAI,EAAE,CAAC,MAAM,EAAE;MACb,EAAE,CAAC,WAAW,GAAG,KAAK,CAAC;KACxB,MAAM;MACL,EAAE,CAAC,SAAS,GAAG,KAAK,CAAC;KACtB;GACF,CAAC,CAAC;CACJ,CAAC,CAAC;;ACRH,eAAe,CAAC,WAAW,YAAG,EAAE,EAAE;EAChC,EAAE,CAAC,gBAAgB,CAAC,OAAO,cAAK,SAC9B,UAAU,aAAI,SAAG,EAAE,CAAC,KAAK,KAAE,EAAE,CAAC,IAAC;GAChC,CAAC;CACH,CAAC,CAAC;;ACHH,eAAe,CAAC,UAAU,YAAG,EAAE,EAAE,EAAE,EAAE;EACnC,OAAO,SAAS,CAAC,EAAE;IACjB,IAAI,EAAE,CAAC,OAAO,IAAE,CAAC,CAAC,cAAc,EAAE,GAAC;IACnC,EAAE,CAAC,CAAC,EAAE,UAAU,CAAC,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC;GACtC;CACF,EAAE;EACD,WAAW,EAAE;IACX,MAAM,EACP;EACD,YAAY,EAAE,IAAI;CACnB,CAAC,CAAC;;ACTIA,IAAM,WAAW,GAAG,IAAI,KAAK,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;AACvDA,IAAM,SAAS,aAAI,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE;;;UAAI,kBACvC,KAAK;iBACR,CAAC,IAAI,CAAC,GAAE,MAAM,OACf;CAAC,CAAC;;AAEH,SAAS,YAAY,CAAC,KAAK,EAAE;EAC3B,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;MACvB,KAAK,CAAC,GAAG,WAAE,GAAG,EAAE,SAAG,GAAG,CAAC,QAAK,CAAC;MAC7B,KAAK,CAAC,KAAK,CAAC;CACjB;;AAED,SAAS,cAAc,CAAC,KAAK,EAAE,QAAQ,EAAE;EACvC,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;MACvB,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,YAAG,GAAG,EAAE,GAAG,EAAE,SAAG,CAAC,GAAG,CAAC,OAAO,IAAI,IAAI,KAAK,MAAG,EAAE,KAAK,CAAC;MAC3E,KAAK,CAAC,OAAO,CAAC;CACnB;;AAED,SAAS,YAAY,CAAC,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE;EAC7CE,IAAI,MAAM,GAAG,UAAU,CAAC,QAAQ,YAAG,GAAS,EAAE,KAAK,EAAE;;;YAAI,UAAC,OAAO,SAAE,KAAK,CAAC;GAAC,CAAC,CAAC;EAC5EA,IAAI,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;KAClC,MAAM,WAAE,GAAG,EAAE,GAAG,EAAE;;;cAAI,kBAClB,GAAG;qBACN,CAAC,GAAG,CAAC,GAAE,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,OACjC;GAAC,EAAE,EAAE,CAAC,CAAC;EACVA,IAAI,MAAM,GAAG,EAAE,CAAC;;EAEhB,KAAKA,IAAI,IAAI,IAAI,MAAM,EAAE;IACvBF,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;;IAE3B,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,KAAK,UAAU,EAAE;MACrCA,IAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE,WAAW,CAAC,CAAC;MAC7DA,IAAM,KAAK,GAAG;UACV,MAAM;aACH,OAAO,MAAM,CAAC,KAAK,KAAK,UAAU;aAClC,MAAM,CAAC,KAAK,EAAE;;WAEhB,MAAM;WACN,IAAI,GAAG,mBAAmB,CAAC;;MAEhC,IAAI,KAAK,KAAK,IAAI,IAAE,MAAM,CAAC,IAAI,CAAC;QAC9B,KAAK,EAAE,IAAI;QACX,OAAO,EAAE,OAAO,CAAC,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QACvD,KAAK,EAAE,KAAK;OACb,CAAC,GAAC;KACJ;GACF;;EAED,MAAM,CAAC,MAAM,CAAC,CAAC;CAChB;;AAEDE,IAAI,SAAS,GAAG,CAAC,CAAC;;AAElB,eAAe,CAAC,YAAY,YAAG,EAAE,EAAE,KAAK,EAAE;EACxCF,IAAM,QAAQ,GAAG,EAAE,CAAC,IAAI,IAAI,aAAa,IAAI,SAAS,EAAE,CAAC,CAAC;EAC1DE,IAAI,MAAM,CAAC;;EAEX,SAAS,MAAM,CAAC,MAAM,EAAE;IACtB,WAAW,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;GACnD;;EAED,WAAW,CAAC,SAAS,WAAC,OAAM;IAC1B,IAAI,MAAM,EAAE;MACV,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;KAC9C;GACF,CAAC,CAAC;;EAEH,EAAE,CAAC,gBAAgB,CAAC,OAAO,YAAE,GAAE;IAC7BF,IAAM,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;IAC1BA,IAAM,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;IAC7B,IAAI,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ;SACvC,QAAQ,EAAE;;MAEb,KAAKE,IAAI,OAAO,IAAI,QAAQ,EAAE;QAC5BF,IAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;;QAE1B,IAAI,CAAC,OAAO,CAAC,cAAc;aACtB,OAAO,IAAI,KAAK,QAAQ;aACxB,OAAO,QAAQ,CAAC,IAAI,CAAC,KAAK,UAAU,EAAE;;UAEzC,OAAO,CAAC,gBAAgB,CAAC,OAAO,cAAK;YACnC,YAAY;cACV,QAAQ;cACR,QAAQ;cACR,MAAM;aACP,CAAC;WACH,EAAC;UACF,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC;;UAE9B,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC;UACxBA,IAAM,UAAU,aAAI,GAAQ,EAAE;;;YAC5B,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;YACtB,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;YACjD,YAAY;cACV,QAAQ;cACR,QAAQ;cACR,MAAM;aACP,CAAC;WACH,CAAC;UACF,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;SAChD;;QAED,IAAI,OAAO,CAAC,IAAI,KAAK,QAAQ,IAAI,OAAO,CAAC,QAAQ,KAAK,IAAI,EAAE;UAC1D,MAAM,GAAG,OAAO,CAAC;SAClB;OACF;;MAED,YAAY;QACV,QAAQ;QACR,QAAQ;QACR,MAAM;OACP,CAAC;KACH;GACF,EAAE,KAAK,CAAC,CAAC;CACX,EAAE;EACD,WAAW,EAAE;IACX,MAAM,EACP;CACF,CAAC,CAAC;;ACxHH,SAAS,QAAQ,CAAC,OAAO,EAAE;EACzB,IAAI,OAAO,OAAO,KAAK,UAAU,IAAE,OAAO,OAAO,GAAC;EAClD,iBAAQ,CAAC,EAAE,SAAG,OAAO,IAAI,IAAC,CAAC;CAC5B;;AAED,SAAS,CAAC,OAAO;EACf,SAAS,KAAK,CAAC,KAAK,EAAE;;;IACpBE,IAAI,kBAAkB,CAAC;IACvB;IAEE;uFACY,GAAE,SAAG;uEACT,GAAE,SAAG;qFACC;6DACN;iEACC,KAAK,CACN;;IAEV,IAAI,EAAE,GAAG;OACN,GAAG,YAAY,OAAO,IAAI,GAAG,CAAC,WAAW,CAAC,IAAI,KAAK,aAAa,CAAC;KACnE,EAAE;MACD,OAAO,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;MAC7D,OAAO,IAAI,CAAC;KACb;;IAED,IAAI,CAAC,MAAM,EAAE;MACX,IAAI,WAAW,KAAK,KAAK,EAAE;QACzB,IAAI,MAAM,EAAE;UACV,kBAAkB,GAAG,UAAU,aAAI;YACjCG,MAAI,CAAC,eAAe,CAAC,kBAAK,KAAK,GAAE,KAAK,EAAE,YAAW,CAAE,CAAC,CAAC;WACxD,EAAE,MAAM,CAAC,CAAC;SACZ,MAAM;UACL,KAAK,GAAG,WAAW,CAAC;SACrB;OACF;;MAED,GAAG;SACA,IAAI,WAAE,KAAK,EAAE;UACZ,YAAY,CAAC,kBAAkB,CAAC,CAAC;UACjCA,MAAI,CAAC,eAAe,CAAC,kBAAK,KAAK,GAAE,KAAK,EAAE,QAAQ,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,KAAI,CAAE,CAAC,CAAC;SACrF,CAAC;SACD,KAAK,WAAE,GAAG,EAAE;UACX,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;UACnB,YAAY,CAAC,kBAAkB,CAAC,CAAC;UACjCA,MAAI,CAAC,eAAe,CAAC,kBAAK,KAAK,GAAE,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,KAAI,CAAE,CAAC,CAAC;SAC/E,EAAC;KACL;;IAED,OAAO,KAAK,CAAC;GACd;CACF,CAAC;;ACjDF,SAAS,CAAC,QAAQ;EAChB,SAAS,MAAM,CAAC,GAA6B,EAAE;;iFAAZ,CAAC,EAAE,UAAI,CAAC;;IACzCL,IAAM,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;;IAEhC,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE;MAC/B,OAAO,CAAC,IAAI,CAAC,oEAAoE,CAAC,CAAC;KACpF;IACD,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;MAClC,OAAO,CAAC,IAAI,CAAC,wEAAwE,CAAC,CAAC;KACxF;;IAED,OAAO,IAAI,aAAI,SAAG,KAAK,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAC,CAAC,CAAC;GACzD;CACF,CAAC;;ACZFA,IAAM,CAAC,GAAG,IAAI,CAAC;;AAEf,AAAOA,IAAM,UAAU,GAAG,IAAI,KAAK,CAAC,EAAE,CAAC,CAAC;;AAExCA,IAAM,aAAa,aAAI,KAAK,EAAE,IAAI,EAAE;;;UAAI,kBACnC,KAAK;iBACR,CAAC,IAAI,CAAC,GAAE,KAAK,OACd;CAAC,CAAC;;AAEHA,IAAM,WAAW,aAAI,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE;;;UAAI,kBACvC,KAAK;iBACR,CAAC,IAAI,CAAC,GAAE,IAAI,OACb;CAAC,CAAC;;AAEH,AAAOA,IAAM,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,cAAK;EAClD,OAAO;IACL,IAAI,YAAG,IAAI,EAAE,SAAG,UAAU,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,IAAC;IAC5D,KAAK,YAAG,IAAI,EAAE,SAAG,UAAU,CAAC,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAE,KAAK,IAAC;IAC9D,MAAM,YAAG,IAAI,EAAE,EAAE,EAAE,SACjB,UAAU,CAAC,SAAS,WAAE,CAAC,EAAE,CAAC,EAAE,SAAG,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,KAAE,IAAC;IACjF,OAAO,YAAG,IAAI,EAAE,EAAE,EAAE,SAClB,UAAU,CAAC,SAAS,WAAE,CAAC,EAAE,CAAC,EAAE,SAAG,CAAC,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,KAAE,IAAC;GACnF,CAAC;CACH,CAAC,CAAC;;;AAGH,SAAS,CAAC,OAAO;EACf,SAAS,KAAK,CAAC,GAA4B,EAAE;uDAAtB,UAAW;;;IAChCA,IAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;;IAE/B,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE;MAC/B,OAAO,CAAC,IAAI,CAAC,mEAAmE,CAAC,CAAC;KACnF;;IAED,IAAI,CAAC,OAAO,aAAG,IAAG;MAChB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;QAChB,UAAU,CAAC,QAAQ,CAAC,aAAa,EAAE,IAAI,CAAC,GAAC;MAC1C;;IAED,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;MACnB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK;QACpB,EAAE,KAAK,EAAE,YAAY,QAAE,IAAI,EAAE;QAC7B,CAAC,CAAC,KAAK,EAAE;UACP,KAAK,EAAE,qBAAqB;UAC5B,OAAO,cAAK,SAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,IAAC;SACzC,CAAC;QACF,OAAC,WAAC,KAAK;UACL,EAAE,KAAK,EAAE,oBAAoB,EAAE,YAC3B,QAAQ,CAAC,KAAK,EAAE,GAAC;SACtB;OACF;KACF,CAAC;GACH;CACF,CAAC;;ACrDF,SAAS,CAAC,QAAQ;EAChB,SAAS,MAAM,CAAC,IAAI,EAAE;IACpB,oEACa;gEACF,IAAI,CAAC,EAAE,IAAI,QAAQ,CAAC,IAAI,CAC1B;IACTE,IAAI,IAAI,CAAC;;IAET,IAAI,CAAC,OAAO,aAAI,CAAC,EAAE;MACjB,KAAK,CAAC,YAAY;;;QAChB,IAAI,CAAC,OAAO,aAAI,CAAC,EAAE;UACjB,IAAI,GAAGG,MAAI,CAAC,GAAG,CAAC;UACjB;QACD,OAAO,IAAI,CAAC,aAAa,EAAE,EAAE,EAAE,QAAQ,CAAC;OACzC,EAAE,MAAM,CAAC,CAAC;KACZ,CAAC;;IAEF,IAAI,CAAC,SAAS,aAAI,CAAC,EAAE;MACnB,OAAO,CAAC,IAAI,CAAC,CAAC;KACf,CAAC;;IAEF,OAAO,IAAI,CAAC;GACb;CACF,CAAC;;AC3BFL,IAAM,UAAU,aAAI,KAAK,EAAE;EACzB,OAAO,KAAK,KAAK,QAAQ;OACpB,OAAO,KAAK,KAAK,QAAQ;OACzB,KAAK;IACX,CAAC;;AAEF,AAAO,IAAM,SAAS,GACpB,kBAAW,CAAC,KAAK,EAAE;EACnB,IAAM,CAAC,KAAK,GAAG,KAAK,CAAC;EACrB,IAAM,CAAC,KAAK,GAAG,EAAE,CAAC;EACjB;;AAEH,oBAAE,8BAAS,GAAuB,EAAE;sBAAxB;wBAAM;gCAAU;;;EAC1B,IAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;IACzB,IAAM,EAAE,IAAI;IACZ,QAAU,YAAE,OAAM,UAAI,UAAU,CAAC,KAAK,CAAC,IAAI,QAAQ,CAAC,KAAK,CAAC,IAAC;IAC3D,KAAO,EAAE,KAAK,IAAI,eAAe;GAChC,CAAC,CAAC;;EAEL,IAAM,CAAC,KAAK,aAAG,MAAK;IAClB,MAAM,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,KAAK,CAAC;IAC3C,OAASK,MAAI,CAAC;IACb;;EAEH,OAAS,IAAI,CAAC;EACb;;AAEH,oBAAE,wBAAM,QAAQ,EAAE;;;EAChB,IAAM,OAAO,QAAQ,KAAK,WAAW,EAAE;IACrC,IAAM,CAAC,KAAK,GAAG,QAAQ,CAAC;GACvB;;EAEH,OAAS,IAAI,CAAC,KAAK,CAAC,MAAM,WAAE,GAAG,EAAE,KAAK,EAAE;IACtC,OAAS,GAAG,KAAK,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,CAACA,MAAI,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,KAAK,GAAG;MACpF,EAAE,IAAI,CAAC;EACT;;AAEH,oBAAE,gCAAW;EACX,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,UAAU;IAClB,QAAU,YAAE,OAAM,SAAG,KAAK,KAAK,KAAE;IACjC,KAAO,EAAE,mBAAmB;GAC3B,CAAC;EACH;;AAEH,oBAAE,sBAAK,MAAM,EAAE;EACb,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,MAAM;IACd,QAAU,YAAE,OAAM,SAAG,KAAK,KAAK,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,IAAC;IACvD,KAAO,EAAE,qBAAqB;GAC7B,CAAC;EACH;;AAEH,oBAAE,8BAAS,OAAO,EAAE;EAClB,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,UAAU;IAClB,QAAU,YAAE,OAAM,SAAG,KAAK,KAAK,EAAE;OAC5B,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,IAAC;IACzD,KAAO,EAAE,qBAAqB,GAAG,OAAO;GACvC,CAAC;EACH;;AAEH,oBAAE,8BAAS,OAAO,EAAE;EAClB,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,UAAU;IAClB,QAAU,YAAE,OAAM,SAAG,KAAK,KAAK,EAAE;OAC5B,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAC;IACxD,KAAO,EAAE,qBAAqB,GAAG,OAAO;GACvC,CAAC;EACH;;AAEH,oBAAE,wBAAMC,OAAK,EAAE;EACb,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,OAAO;IACf,QAAU,YAAE,OAAM,SAAG,KAAK,KAAK,EAAE,IAAI,KAAK,KAAKA,UAAK;IACpD,KAAO,EAAE,yBAAyB,GAAGA,OAAK;GACzC,CAAC;EACH;;AAEH,oBAAE,8BAAS,KAAK,EAAE;EAChB,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,UAAU;IAClB,QAAU,YAAE,OAAM,SAAG,KAAK,KAAK,EAAE,IAAI,KAAK,KAAK,QAAK;IACpD,KAAO,EAAE,6BAA6B,GAAG,KAAK;GAC7C,CAAC;EACH;;AAEH,oBAAE,oBAAI,GAAG,EAAE;EACT,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,KAAK;IACb,QAAU,YAAE,OAAM,SAAG,KAAK,CAAC,MAAM,IAAI,MAAG;IACxC,KAAO,EAAE,qBAAqB,GAAG,GAAG;GACnC,CAAC;EACH;;AAEH,oBAAE,oBAAI,GAAG,EAAE;EACT,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,KAAK;IACb,QAAU,YAAE,OAAM,SAAG,KAAK,CAAC,MAAM,GAAG,MAAG;IACvC,KAAO,EAAE,qBAAqB,GAAG,GAAG;GACnC,CAAC;EACH;;AAEH,oBAAE,0BAAQ;EACR,OAAS,IAAI,CAAC,QAAQ,CAAC;IACrB,IAAM,EAAE,OAAO;IACf,QAAU,YAAE,OAAM,SAAG,KAAK,KAAK,EAAE,IAAI,4BAA4B,CAAC,IAAI,CAAC,KAAK,IAAC;IAC7E,KAAO,EAAE,oBAAoB;GAC5B,CAAC;CACH,CACF;;AC7FDN,IAAM,IAAI,GAAG;EACX,CAAC,EAAE,OAAO,CAAC,OAAO;EAClB,OAAO,EAAE,OAAO,CAAC,OAAO;EACxB,CAAC,EAAE,IAAI;QACP,IAAI;WACJ,OAAO;SACP,KAAK;aACL,SAAS;mBACT,eAAe;WACf,OAAO;SACP,KAAK;SACL,KAAK;WACL,OAAO;EACP,OAAO,EAAE,OAAO;aAChB,SAAS;aACT,SAAS;CACV,CAAC;;;AAGF,IAAI,CAAC,MAAM,aAAI,EAAE,EAAW;;;;SAAG,QAAE,WAAC,IAAI,WAAK,MAAI;CAAC,CAAC;;AAEjD,IAAI,MAAM,IAAE,MAAM,CAAC,IAAI,GAAG,IAAI,GAAC;;;;"}