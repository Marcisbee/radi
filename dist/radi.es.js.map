{"version":3,"file":"radi.es.js","sources":["../src/consts/GLOBALS.js","../src/service.js","../src/html/customAttribute.js","../src/html/customTag.js","../src/html/fireEvent.js","../src/html/destroyTree.js","../src/utils/capitalise.js","../src/utils/flatten.js","../src/utils/formToJSON.js","../src/html/html.js","../src/component/Component.js","../src/component/componentStore.js","../src/html/setAttribute.js","../src/html/render.js","../src/html/renderComponent.js","../src/html/patch.js","../src/store/Store.js","../src/subscribe/Subscribe.js","../src/custom/attributes/animation.js","../src/custom/attributes/html.js","../src/custom/attributes/loadfocus.js","../src/custom/attributes/onsubmit.js","../src/custom/attributes/onvalidate.js","../src/custom/tags/index.js","../src/custom/validation/Validator.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  VERSION: '0.5.0',\n  CUSTOM_ATTRIBUTES: {},\n  CUSTOM_TAGS: {},\n  SERVICES: {},\n};\n\nexport default GLOBALS;\n","import GLOBALS from './consts/GLOBALS';\n\n/**\n * @param  {string}   name\n * @param  {Function} fn\n * @param  {*[]}   args\n * @return {Function}\n */\nexport function service(name, fn, ...args) {\n  if (typeof name !== 'string') {\n    throw new Error('[Radi.js] Service first argument has to be string');\n  }\n\n  if (typeof fn !== 'function') {\n    throw new Error('[Radi.js] Service second argument has to be function');\n  }\n\n  const mounted = fn(...args);\n\n  service.prototype[name] = mounted;\n\n  return GLOBALS.SERVICES[name] = mounted;\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} attributeName\n * @param {function} caller\n * @param {Object} object\n * @returns {Object}\n */\nexport function customAttribute(attributeName, caller, {\n  allowedTags,\n  addToElement,\n} = {}) {\n  return GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n    name: attributeName,\n    caller,\n    allowedTags: allowedTags || null,\n    addToElement,\n  };\n}\n","import GLOBALS from '../consts/GLOBALS';\n\n/**\n * @param {string} tagName\n * @param {function} onmount\n * @returns {object}\n */\nexport function customTag(tagName, render) {\n  return GLOBALS.CUSTOM_TAGS[tagName] = {\n    name: tagName,\n    render: render || (() => {}),\n  };\n}\n","\n/**\n * @param  {string} type\n * @param  {HTMLElement} $node\n * @return {HTMLElement}\n */\nexport function fireEvent(type, $node) {\n  const onEvent = document.createEvent('Event');\n  onEvent.initEvent(type, true, true);\n\n  if (typeof $node.dispatchEvent === 'function') {\n    $node._eventFired = true;\n    $node.dispatchEvent(onEvent);\n  }\n\n  return $node;\n}\n","import { fireEvent } from './fireEvent';\n\n/**\n * @param  {HTMLElement} node\n */\nexport function destroyTree(node) {\n  fireEvent('destroy', node);\n  const instance = node.__radiInstance;\n  if (instance) {\n    instance.trigger('destroy');\n    instance.__onDestroy();\n  }\n  node.__radiInstance = null;\n\n  if (node.nodeType === 1) {\n    let curChild = node.firstChild;\n    while (curChild) {\n      destroyTree(curChild);\n      curChild = curChild.nextSibling;\n    }\n  }\n}\n","\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function capitalise(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n","\n/**\n * @param {*[]} list\n * @returns {*[]}\n */\nexport function flatten(list) {\n  return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n","/**\n * Checks that an element has a non-empty `name` and `value` property.\n * @param  {Element} element  the element to check\n * @return {Bool}             true if the element is an input, false if not\n */\nconst isValidElement = element => element.name && (element.value || element.value === '');\n\n/**\n * Checks if an elementâ€™s value can be saved (e.g. not an unselected checkbox).\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the value should be added, false if not\n */\nconst isValidValue = element =>\n  (!['checkbox', 'radio'].includes(element.type) || element.checked);\n\n/**\n * Checks if an input is a checkbox, because checkboxes allow multiple values.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a checkbox, false if not\n */\nconst isCheckbox = element => element.type === 'checkbox';\n\n/**\n * Checks if an input is a `select` with the `multiple` attribute.\n * @param  {Element} element  the element to check\n * @return {Boolean}          true if the element is a multiselect, false if not\n */\nconst isMultiSelect = element => element.options && element.multiple;\n\n/**\n * Retrieves the selected options from a multi-select as an array.\n * @param  {HTMLOptionsCollection} options  the options for the select\n * @return {Array}                          an array of selected option values\n */\nconst getSelectValues = options =>\n  [].reduce.call(options, (values, option) =>\n    option.selected\n      ? values.concat(option.value)\n      : values, []);\n\n/**\n * Retrieves input data from a form and returns it as a JSON object.\n * @param  {HTMLFormControlsCollection} elements  the form elements\n * @return {Object}                               form data as an object literal\n */\nexport const formToJSON = (elements, transform = (e, v) => v) =>\n  [].reduce.call(elements, (data, element) => {\n  // Make sure the element has the required properties and should be added.\n    if (isValidElement(element) && isValidValue(element)) {\n    /*\n     * Some fields allow for more than one value, so we need to check if this\n     * is one of those fields and, if so, store the values as an array.\n     */\n      if (isCheckbox(element)) {\n        data[element.name] = (data[element.name] || [])\n          .concat(transform(element, element.value));\n      } else if (isMultiSelect(element)) {\n        data[element.name] = transform(element, getSelectValues(element));\n      } else {\n        data[element.name] = transform(element, element.value);\n      }\n    }\n\n    return data;\n  }, {});\n","import GLOBALS from '../consts/GLOBALS';\nimport { flatten } from '../utils';\n\n/**\n * @typedef {Object} Node\n * @property {*} type\n * @property {Object} props\n * @property {*[]} children\n */\n\n/**\n * @param  {*} preType\n * @param  {Object} preProps\n * @param  {*[]} preChildren\n * @return {Node}\n */\nexport function html(preType, preProps, ...preChildren) {\n  let type = (typeof preType === 'number') ? `${preType}` : preType;\n  let props = preProps || {};\n  const children = flatten(preChildren);\n\n  if (type instanceof Promise || (type && type.constructor.name === 'LazyPromise')) {\n    type = 'await';\n    props = {\n      src: preType,\n    };\n  }\n\n  if (typeof GLOBALS.CUSTOM_TAGS[type] !== 'undefined') {\n    type = GLOBALS.CUSTOM_TAGS[type].render;\n  }\n\n  return {\n    type,\n    props,\n    children,\n  };\n}\n","import { capitalise } from '../utils';\n\nexport class Component {\n  /**\n   * @param {Function} fn\n   * @param {string} name\n   */\n  constructor(fn, name) {\n    this.self = fn;\n    this.name = name || fn.name;\n    this.__$events = {};\n  }\n\n  /**\n   * @param  {string}   event\n   * @param  {Function} fn\n   * @return {Function}\n   */\n  on(event, fn) {\n    const e = this.__$events;\n    const name = `on${capitalise(event)}`;\n    if (!e[name]) e[name] = [];\n    e[name].push(fn);\n    return fn;\n  }\n\n  /**\n   * @param  {string} event\n   * @param  {*[]} args\n   */\n  trigger(event, ...args) {\n    const name = `on${capitalise(event)}`;\n\n    (this.__$events[name] || [])\n      .map(e => e(...args));\n\n    if (typeof this[name] === 'function') {\n      this[name](...args);\n    }\n\n    if (typeof this.self[name] === 'function') {\n      this.self[name](...args);\n    }\n  }\n}\n","export const componentStore = {\n  currentComponent: null,\n};\n","import GLOBALS from '../consts/GLOBALS';\n\nexport function setAttribute(dom, key, value) {\n  if (typeof GLOBALS.CUSTOM_ATTRIBUTES[key] !== 'undefined') {\n    const { allowedTags } = GLOBALS.CUSTOM_ATTRIBUTES[key];\n\n    if (!allowedTags || (\n      allowedTags\n        && allowedTags.length > 0\n        && allowedTags.indexOf(dom.localName) >= 0\n    )) {\n      if (typeof GLOBALS.CUSTOM_ATTRIBUTES[key].caller === 'function') {\n        GLOBALS.CUSTOM_ATTRIBUTES[key].caller(dom, value);\n      }\n      if (!GLOBALS.CUSTOM_ATTRIBUTES[key].addToElement) return;\n    }\n  }\n\n  if (typeof value === 'function' && key.startsWith('on')) {\n    const eventType = key.slice(2).toLowerCase();\n    dom.__radiHandlers = dom.__radiHandlers || {};\n    dom.removeEventListener(eventType, dom.__radiHandlers[eventType]);\n    dom.__radiHandlers[eventType] = value;\n    dom.addEventListener(eventType, dom.__radiHandlers[eventType]);\n  } else if (key === 'checked' || key === 'value' || key === 'className') {\n    dom[key] = value;\n  } else if (key === 'style' && typeof value === 'object') {\n    Object.assign(dom.style, value);\n  } else if (key === 'ref' && typeof value === 'function') {\n    value(dom);\n  } else if (key === 'key') {\n    dom.__radiKey = value;\n  } else if (typeof value !== 'object' && typeof value !== 'function') {\n    if (value) {\n      dom.setAttribute(key, value);\n    } else {\n      dom.removeAttribute(key);\n    }\n  }\n}\n","import { fireEvent } from './fireEvent';\nimport { renderComponent } from './renderComponent';\nimport { setAttribute } from './setAttribute';\n\nexport function render(vdom, parent = null) {\n  const mount = parent ? (el => parent.appendChild(el)) : (el => el);\n  let itemToMount;\n  if (typeof vdom === 'string' || typeof vdom === 'number') {\n    itemToMount = mount(document.createTextNode(vdom));\n  } else if (typeof vdom === 'boolean' || vdom === null || typeof vdom === 'undefined') {\n    itemToMount = mount(document.createTextNode(''));\n  } else if (typeof vdom === 'object' && typeof vdom.type === 'function') {\n    itemToMount = renderComponent(vdom, parent);\n  } else if (typeof vdom === 'object' && typeof vdom.type === 'string') {\n    const dom = mount(document.createElement(vdom.type));\n    for (const child of [].concat(...vdom.children)) render(child, dom);\n    for (const prop in vdom.props) setAttribute(dom, prop, vdom.props[prop]);\n    itemToMount = dom;\n  }\n\n  if (itemToMount) {\n    fireEvent('mount', itemToMount);\n    return itemToMount;\n  }\n  throw new Error(`Invalid VDOM: ${vdom}.`);\n}\n","import { Component, componentStore } from '../component';\n\nimport { patch } from './patch';\nimport { render } from './render';\n\nfunction evaluate(comp, fn) {\n  const temp = componentStore.currentComponent;\n  componentStore.currentComponent = comp;\n  const evaluated = fn();\n  componentStore.currentComponent = temp;\n  return evaluated;\n}\n\nexport function renderComponent(vdom, parent) {\n  const props = Object.assign({}, vdom.props, { children: vdom.children });\n\n  const lifecycles = new Component(vdom.type);\n\n  lifecycles.update = () => patchComponent(lifecycles.dom, vdom, parent);\n  lifecycles.render = (instance = lifecycles) => (\n    evaluate(instance, () => vdom.type.call(lifecycles, props))\n  );\n  lifecycles.dom = render(\n    lifecycles.render(),\n    parent\n  );\n\n  let $styleRef;\n\n  if (lifecycles.dom && typeof lifecycles.dom.addEventListener === 'function') {\n    lifecycles.on('mount', () => {\n      if (typeof lifecycles.style === 'string') {\n        $styleRef = document.createElement('style');\n        $styleRef.innerHTML = lifecycles.style;\n        document.head.appendChild($styleRef);\n      }\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n\n    lifecycles.on('destroy', () => {\n      if ($styleRef instanceof Node) {\n        document.head.removeChild($styleRef);\n      }\n    }, {\n      passive: true,\n      once: true,\n    }, false);\n  }\n\n  lifecycles.dom.__radiInstance = lifecycles;\n  lifecycles.trigger('mount', lifecycles.dom, parent);\n  return lifecycles.dom;\n}\n\nexport function patchComponent(dom, vdom, parent = dom.parentNode) {\n  const props = Object.assign({}, vdom.props, { children: vdom.children });\n  const instance = dom.__radiInstance;\n  if (instance && instance.self === vdom.type) {\n    return patch(dom, instance.render(), parent);\n  } else if (instance.isPrototypeOf(vdom.type)) {\n    const ndom = renderComponent(vdom, parent);\n    return parent ? (parent.replaceChild(ndom, dom) && ndom) : (ndom);\n  } else if (!instance.isPrototypeOf(vdom.type)) {\n    return patch(dom, vdom.type(props), parent);\n  }\n  return null;\n}\n","import { destroyTree } from './destroyTree';\nimport { fireEvent } from './fireEvent';\nimport { patchComponent } from './renderComponent';\nimport { render } from './render';\nimport { setAttribute } from './setAttribute';\n\nfunction beforeDestroy(node, next) {\n  if (typeof node.beforedestroy === 'function') {\n    return node.beforedestroy(next);\n  }\n\n  return next();\n}\n\nexport function patch(dom, vdom, parent = dom.parentNode) {\n  const replace = parent ? el => (parent.replaceChild(el, dom) && el) : (el => el);\n  if (typeof vdom === 'object' && typeof vdom.type === 'function') {\n    return patchComponent(dom, vdom, parent);\n  } else if (typeof vdom !== 'object' && dom instanceof Text) {\n    return dom.textContent !== vdom ? replace(render(vdom, parent)) : dom;\n  } else if (typeof vdom === 'object' && dom instanceof Text) {\n    return replace(render(vdom, parent));\n  } else if (typeof vdom === 'object' && dom.nodeName !== vdom.type.toUpperCase()) {\n    return replace(render(vdom, parent));\n  } else if (typeof vdom === 'object' && dom.nodeName === vdom.type.toUpperCase()) {\n    const pool = {};\n    const active = document.activeElement;\n    [].concat(...dom.childNodes).filter(n => !n.__radiRemoved).forEach((child, index) => {\n      const key = child.__radiKey || `__index_${index}`;\n      pool[key] = child;\n    });\n    [].concat(...vdom.children).forEach((child, index) => {\n      const key = child.props && (child.props.key || `__index_${index}`);\n      if (pool[key]) {\n        fireEvent('update', patch(pool[key], child));\n        delete pool[key];\n      } else {\n        const temp = pool[key] ? patch(pool[key], child) : render(child, dom);\n        if (temp) {\n          dom.appendChild(temp);\n          delete pool[key];\n        }\n      }\n    });\n    for (const key in pool) {\n      pool[key].__radiRemoved = true;\n      beforeDestroy(pool[key], () => {\n        // This is for async node removals\n        destroyTree(pool[key]);\n        pool[key].remove();\n      });\n    }\n    for (const attr of dom.attributes) dom.removeAttribute(attr.name);\n    for (const prop in vdom.props) setAttribute(dom, prop, vdom.props[prop]);\n    active.focus();\n    return dom;\n  }\n  return null;\n}\n","import { componentStore } from '../component';\n\nfunction anchored(anchor, to) {\n  return (newState, oldState) => {\n    if (anchor[0] === newState) return false;\n    if (newState !== oldState) {\n      anchor[0] = newState;\n      to.dispatch(() => newState);\n    }\n    return true;\n  };\n}\n\nfunction extractState(state, path = []) {\n  if (!state) return state;\n\n  if (this && state && typeof state.subscribe === 'function') {\n    const anchor = [];\n    if (path.length > 0) {\n      state.subscribe((newState, oldState) => {\n        if (anchor[0] === newState) return false;\n        if (newState !== oldState) {\n          this.dispatch(() => this.setPartial(path, newState));\n          anchor[0] = newState;\n        }\n        return true;\n      });\n    } else {\n      this.subscribe(anchored(anchor, state));\n      state.subscribe(anchored(anchor, this));\n    }\n    return state.get();\n  }\n\n  if (typeof state === 'object') {\n    const tempState = Array.isArray(state) ? new Array(state.length) : {};\n    for (const key in state) {\n      if (state.hasOwnProperty(key)) {\n        tempState[key] = extractState.call(this, state[key], path.concat(key));\n      }\n    }\n    return tempState;\n  }\n\n  return state;\n}\n\nfunction clone(target, source) {\n  const out = Array.isArray(target) ? [] : {};\n\n  for (const i in target) out[i] = target[i];\n  for (const i in source) out[i] = source[i];\n\n  return out;\n}\n\nfunction proxied(state, fn, path = []) {\n  return new Proxy(state, {\n    get(_, prop) {\n      const newPath = path.concat(prop);\n\n      if (typeof state[prop] === 'object') {\n        return proxied(state[prop], fn, newPath);\n      }\n\n      if (typeof fn === 'function') fn(newPath);\n      return state[prop];\n    },\n  });\n}\n\nfunction Dependencies() {\n  this.dependencies = {};\n  this.add = (path, component) => {\n    const key = path[0];\n    if (typeof this.dependencies[key] === 'undefined') this.dependencies[key] = [];\n\n    if (this.dependencies[key].indexOf(component) < 0) {\n      // console.log('addDependency', key, component)\n      this.dependencies[key].push(component);\n    }\n  };\n  this.remove = (path, component) => {\n    const key = path[0];\n    const index = (this.dependencies[key] || []).indexOf(component);\n    if (index >= 0) {\n      // console.log('removeDependency', key, component)\n      this.dependencies[key].splice(index, 1);\n    }\n  };\n  this.fn = fn => (path) => {\n    const current = componentStore.currentComponent;\n    if (current) {\n      this.add(path, current);\n\n      current.on('destroy', () => {\n        this.remove(path, current);\n      });\n    }\n    return fn(path);\n  };\n  this.trigger = (key, newStore, oldState) => {\n    if (this.dependencies[key]) {\n      this.dependencies[key].forEach(fn => (\n        (fn.update ? fn.update : fn)(newStore, oldState)\n      ));\n    }\n  };\n}\n\nexport function Store(state = {}, fn = () => {}) {\n  let currentState = { ...state };\n  const StoreHold = function () {\n    return proxied(StoreHold.get(), dependencies.fn(fn));\n  };\n\n  const dependencies = new Dependencies();\n  let remap = e => e;\n\n  StoreHold.getInitial = () => initialSate;\n  StoreHold.get = () => remap(currentState);\n  StoreHold.setPartial = (path, value) => {\n    const target = Array.isArray(currentState) ? [] : {};\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? this.setPartial(path.slice(1), value, currentState[path[0]])\n          : value;\n      return clone(currentState, target);\n    }\n    return value;\n  };\n  StoreHold.update = (chunkState/* , noStrictSubs */) => {\n    const keys = Object.keys(chunkState);\n    const oldState = currentState;\n    const newState = {\n      ...currentState,\n      ...chunkState,\n    };\n    currentState = newState;\n    dependencies.trigger('*', StoreHold.get(), oldState);\n    keys.forEach(key => dependencies.trigger(key, StoreHold.get(), oldState));\n\n    return currentState;\n  };\n  StoreHold.dispatch = (action, ...args) => {\n    const payload = action(currentState, ...args);\n    // console.log('dispatch', {\n    //   action: action.name,\n    //   args: args,\n    //   payload,\n    // });\n    // console.log('dispatch', action.name, payload);\n    return StoreHold.update(payload);\n  };\n  StoreHold.willDispatch = (action, ...args) => (...args2) =>\n    StoreHold.dispatch(action, ...args, ...args2);\n  StoreHold.subscribe = (callback/* , strict */) => {\n    dependencies.add('*', callback);\n    callback(StoreHold.get(), null);\n    return StoreHold;\n  };\n  StoreHold.unsubscribe = (subscriber) => {\n    dependencies.remove('*', subscriber);\n  };\n  StoreHold.map = (fnMap) => {\n    const tempFn = remap;\n    remap = (...args) => fnMap(tempFn(...args));\n    return StoreHold;\n  };\n\n  const initialSate = extractState.call(StoreHold, state);\n\n  return StoreHold;\n}\n","import { Store } from '../store';\n\n/**\n * @param       {EventTarget} [target=document] [description]\n * @constructor\n */\nexport function Subscribe(target = document) {\n  return {\n    on: (eventHolder, transformer = e => e) => {\n      const events = eventHolder.trim().split(' ');\n      let eventSubscription = null;\n      let staticDefaults = null;\n      let staticStore = null;\n      let state = false;\n\n      if (typeof transformer !== 'function') {\n        throw new Error(`[Radi.js] Subscription \\`${eventHolder}\\` must be transformed by function`);\n      }\n\n      function updater(defaults, newStore) {\n        const store = newStore || new Store(defaults || {});\n\n        state = true;\n        staticDefaults = defaults;\n        staticStore = store;\n        events.map(event => target.addEventListener(event,\n          eventSubscription = (...args) =>\n            store.dispatch((oldStore) => ({ ...oldStore, ...transformer(...args, event) }))\n        ));\n\n        return store;\n      }\n\n      updater.stop = () => {\n        if (state) {\n          events.map(event => target.removeEventListener(event, eventSubscription));\n        }\n        return state = !state;\n      };\n      updater.start = () => !state && updater(staticDefaults, staticStore);\n\n      return updater;\n    },\n  };\n}\n","import { customAttribute } from '../../html/customAttribute';\n\nexport const animate = (target, type, opts, done) => {\n  const direct = opts[type];\n  if (typeof direct !== 'function') {\n    console.warn(`[Radi.js] Animation \\`${type}\\` for node \\`${target.nodeName.toLowerCase}\\` should be function`);\n    return;\n  }\n\n  return direct(target, done);\n};\n\ncustomAttribute('animation', (el, value) => {\n  animate(el, 'in', value, () => {});\n  el.beforedestroy = done => animate(el, 'out', value, done);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('html', (el, value) => {\n  const insert = () => {\n    if (el.escape) {\n      el.textContent = value;\n    } else {\n      el.innerHTML = value;\n    }\n  };\n  el.addEventListener('mount', insert);\n  el.addEventListener('update', insert);\n});\n","import { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('loadfocus', (el) => {\n  el.addEventListener('mount', () => el.focus());\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\n\ncustomAttribute('onsubmit', (el, fn) => {\n  return function(e) {\n    if (el.prevent) e.preventDefault();\n    fn(e, formToJSON(el.elements || {}));\n  }\n}, {\n  allowedTags: [\n    'form',\n  ],\n  addToElement: true,\n});\n","import { formToJSON } from '../../utils';\nimport { customAttribute } from '../../html/customAttribute';\nimport { Store } from '../../store';\n\nexport const errorsStore = new Store({}, 'errorStore');\nconst setErrors = (state, name, errors) => ({\n  ...state,\n  [name]: errors,\n});\n\nfunction fullValidate(elements, rules, update) {\n  let values = formToJSON(elements, ({touched}, value) => ({touched, value}));\n  let plainValues = Object.keys(values)\n    .reduce((acc, key) => ({\n      ...acc,\n      [key]: values[key].value,\n    }), {});\n  let errors = [];\n\n  for (let name in values) {\n    const value = values[name];\n\n    if (typeof rules[name] === 'function') {\n      const result = rules[name](value.value, plainValues);\n      const valid = (\n          result\n          && typeof result.check === 'function'\n          && result.check()\n        )\n        || result\n        || name + ' field is invalid';\n\n      if (valid !== true) errors.push({\n        field: name,\n        touched: Boolean(value.touched),\n        error: valid,\n      });\n    }\n  }\n\n  update(errors);\n}\n\nlet formCount = 0;\n\ncustomAttribute('onvalidate', (el, rules) => {\n  const formName = el.name || 'defaultForm' + (formCount++);\n  let submit;\n\n  function update(errors) {\n    errorsStore.dispatch(setErrors, formName, errors);\n  }\n\n  errorsStore.subscribe(state => {\n    if (submit) {\n      submit.disabled = state[formName].length > 0;\n    }\n  });\n\n  el.addEventListener('mount', e => {\n    const validate = rules(e);\n    const elements = e.target.elements;\n    if (validate && typeof validate === 'object'\n      && elements) {\n\n      for (let element of elements) {\n        const name = element.name;\n\n        if (!element.__radiValidate\n          && typeof name === 'string'\n          && typeof validate[name] === 'function') {\n\n          element.addEventListener('input', () => {\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          })\n          element.__radiValidate = true;\n\n          element.touched = false;\n          const setTouched = ({target}) => {\n            target.touched = true;\n            target.removeEventListener('change', setTouched);\n            fullValidate(\n              elements,\n              validate,\n              update\n            );\n          };\n          element.addEventListener('change', setTouched);\n        }\n\n        if (element.type === 'submit' && element.disabled === true) {\n          submit = element;\n        }\n      }\n\n      fullValidate(\n        elements,\n        validate,\n        update\n      );\n    }\n  }, false);\n}, {\n  allowedTags: [\n    'form',\n  ],\n});\n","// export * from './await';\n// export * from './errors';\n// export * from './modal';\n// export * from './portal';\n","const validValue = (value) => (\n  typeof value === 'string'\n    || typeof value === 'number'\n    || value\n);\n\nexport class Validator {\n  constructor(value) {\n    this.value = value;\n    this.rules = [];\n  }\n\n  register({type, validate, error}) {\n    let nn = this.rules.push({\n      type: type,\n      validate: value => (validValue(value) && validate(value)),\n      error: error || 'Invalid field',\n    });\n\n    this.error = text => {\n      this.rules[nn - 1].error = text || error;\n      return this;\n    }\n\n    return this;\n  }\n\n  check(newValue) {\n    if (typeof newValue !== 'undefined') {\n      this.value = newValue;\n    }\n\n    return this.rules.reduce((acc, value) => (\n      typeof acc === 'string' ? acc : (!value.validate(this.value) && value.error) || acc\n    ), true)\n  }\n\n  required() {\n    return this.register({\n      type: 'required',\n      validate: value => value !== '',\n      error: 'Field is required',\n    })\n  }\n\n  test(regexp) {\n    return this.register({\n      type: 'test',\n      validate: value => value === '' || regexp.test(value),\n      error: 'Field must be valid',\n    })\n  }\n\n  equal(equal) {\n    return this.register({\n      type: 'equal',\n      validate: value => value === '' || value === equal,\n      error: 'Field must be equal to ' + equal,\n    })\n  }\n\n  notEqual(equal) {\n    return this.register({\n      type: 'notEqual',\n      validate: value => value === '' || value !== equal,\n      error: 'Field must not be equal to ' + equal,\n    })\n  }\n\n  min(num) {\n    return this.register({\n      type: 'min',\n      validate: value => value.length >= num,\n      error: 'Min char length is ' + num,\n    })\n  }\n\n  max(num) {\n    return this.register({\n      type: 'max',\n      validate: value => value.length < num,\n      error: 'Max char length is ' + num,\n    })\n  }\n\n  email() {\n    return this.register({\n      type: 'email',\n      validate: value => value === '' || /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value),\n      error: 'Email is not valid',\n    })\n  }\n}\n","import GLOBALS from './consts/GLOBALS';\nimport { service } from './service';\nimport {\n  customAttribute,\n  customTag,\n  html,\n  patch,\n  render,\n} from './html';\nimport { Store } from './store';\nimport { Subscribe } from './subscribe';\nimport { Validator } from './custom';\n\nconst Radi = {\n  v: GLOBALS.VERSION,\n  version: GLOBALS.VERSION,\n  h: html,\n  html,\n  Store,\n  customTag,\n  customAttribute,\n  patch,\n  mount: render,\n  service,\n  Subscribe,\n  Validator,\n};\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (window) window.Radi = Radi;\nexport default Radi;\n"],"names":["const","let","this","i","equal"],"mappings":"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"}