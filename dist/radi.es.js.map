{"version":3,"file":"radi.es.js","sources":["../src/consts/GLOBALS.js","../src/listen/Listener.js","../src/r/utils/AttributeListener.js","../src/r/utils/StyleListener.js","../src/r/utils/parseValue.js","../src/r/utils/setStyle.js","../src/r/setStyles.js","../src/r/utils/parseClass.js","../src/r/setAttributes.js","../src/r/utils/getElementFromQuery.js","../src/utils/generateId.js","../src/component/utils/PrivateStore.js","../src/r/utils/fuseDom.js","../src/utils/clone.js","../src/component/Component.js","../src/mount.js","../src/r/utils/ensureArray.js","../src/r/utils/swapNode.js","../src/r/utils/listenerToNode.js","../src/r/utils/ElementListener.js","../src/r/utils/appendListenerToElement.js","../src/r/appendChild.js","../src/r/appendChildren.js","../src/r/index.js","../src/listen/index.js","../src/utils/remountActiveComponents.js","../src/index.js"],"sourcesContent":["const GLOBALS = {\n  HEADLESS_COMPONENTS: {},\n  FROZEN_STATE: false,\n  VERSION: '0.3.1',\n  ACTIVE_COMPONENTS: {},\n  HTML_CACHE: {},\n};\n\nexport default GLOBALS;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-shadow */\n\nexport default class Listener {\n  /**\n   * @param {Component} component\n   * @param {...string} path\n   */\n  constructor(component, ...path) {\n    this.component = component;\n    [this.key] = path;\n    this.childPath = path.slice(1, path.length);\n    this.path = path;\n    this.value = null;\n    this.changeListeners = [];\n    this.processValue = value => value;\n    this.disabled = false;\n\n    this.component.addListener(this.key, this);\n    if (this.component.state) {\n      this.handleUpdate(this.component.state[this.key]);\n    }\n  }\n\n  /**\n   * @param {*} value\n   * @return {*}\n   */\n  extract(value) {\n    if (value.value instanceof Listener) {\n      value.value.disabled = true;\n      return this.extract(value.value);\n    }\n    return value;\n  }\n\n  /**\n   * @param {*} value\n   */\n  handleUpdate(value) {\n    // TODO: Destroy unnecessary listeners\n    this.value = this.processValue(this.getShallowValue(value), this.value);\n\n    if (this.disabled) {\n      if (typeof this.disabled === 'function') this.disabled(this.value);\n      return this.value;\n    }\n    if (this.value instanceof Listener) {\n      if (this.value.disabled) return this.value;\n      this.value = this.extract(this.value);\n      this.value.disabled = (value) => {\n        this.changeListeners.forEach(changeListener => changeListener(value));\n      };\n    }\n\n    this.changeListeners.forEach(changeListener => changeListener(this.value));\n    return this.value;\n  }\n\n  /**\n   * @param {function(*)} changeListener\n   */\n  onValueChange(changeListener) {\n    this.changeListeners.push(changeListener);\n    changeListener(this.value);\n  }\n\n  /**\n   * @param {function(*): *} processValue\n   * @returns {function(*): *}\n   */\n  process(processValue) {\n    this.processValue = processValue;\n    this.handleUpdate(this.value);\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {*} value\n   */\n  getShallowValue(value) {\n    if (typeof value !== 'object' || !this.childPath) return value;\n    let shallowValue = value;\n    /*eslint-disable*/\n    for (const pathNestingLevel of this.childPath) {\n      if (shallowValue === null\n        || !shallowValue[pathNestingLevel]\n        && typeof shallowValue[pathNestingLevel] !== 'number') {\n        shallowValue = null\n      } else {\n        shallowValue = shallowValue[pathNestingLevel]\n      }\n    }\n    return shallowValue;\n  }\n}\n","import setAttributes from '../setAttributes';\n\nexport default class AttributeListener {\n  /**\n   * @param {object} options\n   * @param {string} options.attributeKey\n   * @param {Listener} options.listener\n   * @param {Node} options.element\n   */\n  constructor({ attributeKey, listener, element }) {\n    this.attributeKey = attributeKey;\n    this.listener = listener;\n    this.element = element;\n    this.attached = false;\n    this.handleValueChange = this.handleValueChange.bind(this);\n  }\n\n  /**\n   * Attaches attribute listener to given element and starts listening.\n   * @returns {AttributeListener}\n   */\n  attach() {\n    if (!this.element.attributeListeners) this.element.attributeListeners = [];\n    this.element.attributeListeners.push(this);\n    this.listener.onValueChange(this.handleValueChange);\n    this.attached = true;\n\n    if (this.attributeKey === 'model') {\n      if (/(checkbox|radio)/.test(this.element.getAttribute('type'))) {\n        this.element.onchange = (e) => {\n          this.listener.component[this.listener.key] = e.target.checked;\n        };\n      } else {\n        this.element.oninput = (e) => {\n          this.listener.component[this.listener.key] = e.target.value;\n        };\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @param {*} value\n   */\n  handleValueChange(value) {\n    if (this.attributeKey === 'value' || this.attributeKey === 'model') {\n      if (/(checkbox|radio)/.test(this.element.getAttribute('type'))) {\n        this.element.checked = value;\n      } else {\n        this.element.value = value;\n      }\n    } else {\n      setAttributes(this.element, { [this.attributeKey]: value });\n    }\n  }\n\n  /**\n   * @param {Node} newElement\n   */\n  updateElement(newElement) {\n    this.element = newElement;\n    return this.element;\n  }\n}\n","import setStyle from './setStyle';\n\nexport default class StyleListener {\n  /**\n   * @param {object} options\n   * @param {string} options.styleKey\n   * @param {Listener} options.listener\n   * @param {Node} options.element\n   */\n  constructor({ styleKey, listener, element }) {\n    this.styleKey = styleKey;\n    this.listener = listener;\n    this.element = element;\n    this.attached = false;\n    this.handleValueChange = this.handleValueChange.bind(this);\n  }\n\n  /**\n   * Attaches style listener to given element and starts listening.\n   * @returns {StyleListener}\n   */\n  attach() {\n    if (!this.element.styleListeners) this.element.styleListeners = [];\n    this.element.styleListeners.push(this);\n    this.listener.onValueChange(this.handleValueChange);\n    this.attached = true;\n    return this;\n  }\n\n  /**\n   * @param {*} value\n   */\n  handleValueChange(value) {\n    setStyle(this.element, this.styleKey, value);\n  }\n\n  /**\n   * @param {Node} newElement\n   */\n  updateElement(newElement) {\n    this.element = newElement;\n    return this.element;\n  }\n}\n","/**\n * @param {*} value\n * @return {*}\n */\nconst parseValue = value =>\n  typeof value === 'number' && !Number.isNaN(value) ? `${value}px` : value;\n\nexport default parseValue;\n","/* eslint-disable no-param-reassign */\n// -- until this can be rewritten as a pure function, we need to reassign.\n\nimport Listener from '../../listen/Listener';\nimport StyleListener from '../utils/StyleListener';\nimport parseValue from './parseValue';\n\n/**\n * @param {HTMLElement} element\n * @param {string} property\n * @param {string} value\n * @returns {*}\n */\nconst setStyle = (element, property, value) => {\n  if (typeof value === 'undefined') return undefined;\n\n  if (value instanceof Listener) {\n    new StyleListener({\n      styleKey: property,\n      listener: value,\n      element,\n    }).attach();\n    return element[property];\n  }\n\n  return element.style[property] = parseValue(value);\n};\n\nexport default setStyle;\n","import Listener from '../listen/Listener';\n/* eslint-disable guard-for-in */\n/* eslint-disable no-restricted-syntax */\n// -- we need those for..in loops for now!\n\n/* eslint-disable no-param-reassign */\n// -- until this can be rewritten as a pure function, we need to reassign.\n\nimport AttributeListener from './utils/AttributeListener';\nimport setStyle from './utils/setStyle';\n\n/**\n * @param {HTMLElement} element\n * @param {string|object|Listener} styles\n * @returns {CSSStyleDeclaration}\n */\nconst setStyles = (element, styles) => {\n  if (typeof styles === 'string') {\n    element.style = styles;\n  }\n\n  if (typeof styles !== 'object' || Array.isArray(styles)) {\n    return element.style;\n  }\n\n  if (styles instanceof Listener) {\n    new AttributeListener({\n      attributeKey: 'style',\n      listener: styles,\n      element,\n    }).attach();\n    return element.style;\n  }\n\n  for (const property in styles) {\n    setStyle(element, property, styles[property]);\n  }\n\n  return element.style;\n};\n\nexport default setStyles;\n","/**\n * @param {*} value\n * @return {*}\n */\nconst parseClass = value => {\n  if (Array.isArray(value)) {\n    return value.filter(item => item).join(' ')\n  }\n  return value;\n}\n\nexport default parseClass;\n","/* eslint-disable guard-for-in */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-continue */\n// -- we need those for..in loops for now!\n\n/* eslint-disable no-param-reassign */\n// -- until this can be rewritten as a pure function, we need to reassign.\n\nimport setStyles from './setStyles';\nimport Listener from '../listen/Listener';\nimport parseClass from './utils/parseClass';\nimport AttributeListener from './utils/AttributeListener';\n\n/**\n * @param {HTMLElement} element\n * @param {object} attributes\n */\nconst setAttributes = (element, attributes) => {\n  for (const key in attributes) {\n    const value = attributes[key];\n\n    if (typeof value === 'undefined') continue;\n\n    if (!value && typeof value !== 'number') {\n      // Need to remove falsy attribute\n      element.removeAttribute(key);\n      continue;\n    }\n\n    if (key.toLowerCase() === 'style') {\n      setStyles(element, value);\n      continue;\n    }\n\n    if (value instanceof Listener) {\n      new AttributeListener({\n        attributeKey: key,\n        listener: value,\n        element,\n      }).attach();\n      continue;\n    }\n\n    if (key.toLowerCase() === 'class' || key.toLowerCase() === 'classname') {\n      element.setAttribute('class', parseClass(value));\n      continue;\n    }\n\n    // Handles events 'on<event>'\n    if (key.substring(0, 2).toLowerCase() === 'on') {\n      if (key.substring(0, 8).toLowerCase() === 'onsubmit') {\n        element[key] = (e) => {\n          const data = [];\n          const inputs = e.target.elements || [];\n          for (const input of inputs) {\n            if (input.name !== '') {\n              const item = {\n                name: input.name,\n                el: input,\n                type: input.type,\n                default: input.defaultValue,\n                value: input.value,\n                set(val) {\n                  this.el.value = val;\n                },\n                reset(val) {\n                  this.el.value = val;\n                  this.el.defaultValue = val;\n                },\n              };\n              data.push(item);\n              Object.defineProperty(data, item.name, {\n                value: item,\n              });\n            }\n          }\n\n          return value(e, data);\n        };\n      } else {\n        element[key] = value;\n      }\n      continue;\n    }\n\n    element.setAttribute(key, value);\n  }\n};\n\nexport default setAttributes;\n","/**\n * @param {*} query\n * @returns {Node}\n */\nconst getElementFromQuery = query => {\n  if (typeof query === 'string') return query !== 'template'\n    ? document.createElement(query)\n    : document.createDocumentFragment();\n  console.warn(\n    '[Radi.js] Warn: Creating a JSX element whose query is not of type string, automatically converting query to string.'\n  );\n  return document.createElement(query.toString());\n};\n\nexport default getElementFromQuery;\n","/**\n * UUID v4 generator\n * https://gist.github.com/jcxplorer/823878\n * @returns {string}\n */\nconst generateId = () => {\n  let uuid = '';\n  for (let i = 0; i < 32; i++) {\n    const random = (Math.random() * 16) | 0; // eslint-disable-line\n\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      uuid += '-';\n    }\n    uuid += (i === 12 ? 4 : i === 16 ? (random & 3) | 8 : random).toString(16); // eslint-disable-line\n  }\n  return uuid;\n};\n\nexport default generateId;\n","import Component from '../Component'\n\nexport default class PrivateStore {\n  constructor() {\n    this.store = {};\n  }\n\n  /**\n   * @param {string} key\n   * @param {Listener} listener\n   */\n  addListener(key, listener) {\n    if (typeof this.store[key] === 'undefined') {\n      this.createItemWrapper(key);\n    }\n    this.store[key].listeners.push(listener);\n    listener.handleUpdate(this.store[key].value);\n\n    return listener;\n  }\n\n  /**\n   * setState\n   * @param {*} newState\n   * @returns {*}\n   */\n  setState(newState) {\n    // Find and trigger changes for listeners\n    for (const key of Object.keys(newState)) {\n      if (typeof this.store[key] === 'undefined') {\n        this.createItemWrapper(key);\n      }\n      this.store[key].value = newState[key];\n\n      this.triggerListeners(key);\n    }\n    return newState;\n  }\n\n  /**\n   * createItemWrapper\n   * @private\n   * @param {string} key\n   * @returns {object}\n   */\n  createItemWrapper(key) {\n    return this.store[key] = {\n      listeners: [],\n      value: null,\n    };\n  }\n\n  /**\n   * triggerListeners\n   * @private\n   * @param {string} key\n   */\n  triggerListeners(key) {\n    const item = this.store[key];\n    if (item) {\n      item.listeners.forEach(listener => listener.handleUpdate(item.value));\n    }\n  }\n}\n","\nconst copyAttrs = (newNode, oldNode) => {\n  var oldAttrs = oldNode.attributes;\n  var newAttrs = newNode.attributes;\n  var attrNamespaceURI = null;\n  var attrValue = null;\n  var fromValue = null;\n  var attrName = null;\n  var attr = null;\n\n  for (var i = newAttrs.length - 1; i >= 0; --i) {\n    attr = newAttrs[i];\n    attrName = attr.name;\n    attrNamespaceURI = attr.namespaceURI;\n    attrValue = attr.value;\n    // TODO: Change only specific parts of style\n    // if (attr.name === 'style') {\n    //   for (var item of newNode.style) {\n    //     if (oldNode.style[item] !== newNode.style[item]) oldNode.style[item] = newNode.style[item]\n    //   }\n    //   continue;\n    // }\n    if (attrNamespaceURI) {\n      attrName = attr.localName || attrName;\n      fromValue = oldNode.getAttributeNS(attrNamespaceURI, attrName);\n      if (fromValue !== attrValue) {\n        oldNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);\n      }\n    } else {\n      if (!oldNode.hasAttribute(attrName)) {\n        oldNode.setAttribute(attrName, attrValue);\n      } else {\n        fromValue = oldNode.getAttribute(attrName);\n        if (fromValue !== attrValue) {\n          // apparently values are always cast to strings, ah well\n          if (attrValue === 'null' || attrValue === 'undefined') {\n            oldNode.removeAttribute(attrName);\n          } else {\n            oldNode.setAttribute(attrName, attrValue);\n          }\n        }\n      }\n    }\n  }\n\n  // Remove any extra attributes found on the original DOM element that\n  // weren't found on the target element.\n  for (var j = oldAttrs.length - 1; j >= 0; --j) {\n    attr = oldAttrs[j];\n    if (attr.specified !== false) {\n      attrName = attr.name;\n      attrNamespaceURI = attr.namespaceURI;\n\n      if (attrNamespaceURI) {\n        attrName = attr.localName || attrName;\n        if (!newNode.hasAttributeNS(attrNamespaceURI, attrName)) {\n          oldNode.removeAttributeNS(attrNamespaceURI, attrName);\n        }\n      } else {\n        if (!newNode.hasAttributeNS(null, attrName)) {\n          oldNode.removeAttribute(attrName);\n        }\n      }\n    }\n  }\n}\n\nconst destroyNode = node => {\n  var treeWalker = document.createTreeWalker(\n    node,\n    NodeFilter.SHOW_ELEMENT,\n    el => el && (typeof el.destroy === 'function'\n      || el.listeners),\n    false\n  );\n\n  var el;\n  while((el = treeWalker.nextNode())) {\n    // Unlink listeners for garbage collection\n    el.listeners = null;\n    el.destroy();\n    el.parentNode.removeChild(el);\n  }\n\n  node.parentNode.removeChild(node);\n}\n\n/**\n * @param {HTMLElement} newNode\n * @param {HTMLElement} oldNode\n * @returns {ElementListener}\n */\nconst fuseDom = (toNode, fromNode, childOnly) => {\n  if (Array.isArray(fromNode) || Array.isArray(toNode)) childOnly = true;\n\n  if (!childOnly) {\n    const nt1 = toNode.nodeType;\n    const nt2 = fromNode.nodeType;\n\n    if (nt1 === nt2 && (nt1 === 3 || nt2 === 8)) {\n      if (!toNode.isEqualNode(fromNode)) {\n        // toNode.textContent = fromNode.textContent\n        toNode.nodeValue = fromNode.nodeValue;\n        // toNode.replaceWith(fromNode)\n        destroyNode(fromNode);\n      }\n      return toNode;\n    }\n\n    if (toNode.__async || fromNode.__async\n      || toNode.listeners || fromNode.listeners\n      || nt1 === 3 || nt2 === 3) {\n      if (!toNode.isEqualNode(fromNode)) {\n        toNode.parentNode.insertBefore(fromNode, toNode);\n        destroyNode(toNode);\n      }\n      return fromNode;\n    }\n\n    copyAttrs(fromNode, toNode);\n  }\n\n  let a1 = [ ...toNode.childNodes || toNode ];\n  let a2 = [ ...fromNode.childNodes || fromNode ];\n  let max = Math.max(a1.length, a2.length);\n\n  for (var i = 0; i < max; i++) {\n    if (a1[i] && a2[i]) {\n      // Fuse\n      fuseDom(a1[i], a2[i]);\n    } else\n    if (a1[i] && !a2[i]) {\n      // Remove\n      destroyNode(a1[i]);\n    } else\n    if (!a1[i] && a2[i]) {\n      // Add\n      toNode.appendChild(a2[i]);\n    }\n  }\n\n  return toNode;\n}\n\nexport default fuseDom;\n","/**\n * @param {*} obj\n * @returns {*}\n */\nconst clone = obj => {\n  if (typeof obj !== 'object') return obj;\n  if (obj === null) return obj;\n  if (Array.isArray(obj)) return obj.map(clone);\n\n  /*eslint-disable*/\n  // Reverted as currently throws some errors\n  const cloned = {};\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      cloned[key] = clone(obj[key]);\n    }\n  }\n  /* eslint-enable */\n\n  return cloned;\n};\n\nexport default clone;\n","/* eslint-disable guard-for-in */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-continue */\n// -- we need those for..in loops for now!\n\nimport GLOBALS from '../consts/GLOBALS';\nimport generateId from '../utils/generateId';\nimport PrivateStore from './utils/PrivateStore';\nimport fuseDom from '../r/utils/fuseDom';\nimport clone from '../utils/clone';\n\nexport default class Component {\n  /**\n   * @param {Node[]|*[]} [children]\n   * @param {object} [o.props]\n   */\n  constructor(children, props) {\n    this.addNonEnumerableProperties({\n      $id: generateId(),\n      $name: this.constructor.name,\n      $config: (typeof this.config === 'function') ? this.config() : {\n        listen: true,\n      },\n      $store: {},\n      $events: {},\n      $privateStore: new PrivateStore(),\n    });\n\n    this.on = (typeof this.on === 'function') ? this.on() : {};\n    this.children = [];\n\n    // Appends headless components\n    this.copyObjToInstance(GLOBALS.HEADLESS_COMPONENTS, 'head');\n\n    this.state = Object.assign(\n      (typeof this.state === 'function') ? this.state() : {},\n      props || {}\n    );\n    // TODO: Enable Object.freeze only in development\n    // disable for production\n    // Object.freeze(this.state)\n\n    if (children) this.setChildren(children);\n  }\n\n  /**\n   * @returns {HTMLElement}\n   */\n  render() {\n    if (typeof this.view !== 'function') return '';\n    const rendered = this.view();\n    this.html = rendered;\n    return rendered;\n  }\n\n  /**\n   * @param {object} props\n   * @returns {Component}\n   */\n  setProps(props) {\n    this.setState(props);\n    return this;\n  }\n\n  /**\n   * @param {Node[]|*[]} children\n   */\n  setChildren(children) {\n    this.children = children;\n    this.setState();\n    for (let i = 0; i < this.children.length; i++) {\n      if (typeof this.children[i].when === 'function') {\n        this.children[i].when('update', () => this.setState());\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @private\n   * @param {object} obj\n   * @param {string} type\n   */\n  copyObjToInstance(obj, type) {\n    for (const key in obj) {\n      if (typeof this[key] !== 'undefined') {\n        throw new Error(`[Radi.js] Error: Trying to write for reserved variable \\`${key}\\``);\n      }\n      this[key] = obj[key];\n      if (type === 'head') this[key].when('update', () => this.setState());\n    }\n  }\n\n  /**\n   * @private\n   * @param {object} obj\n   */\n  addNonEnumerableProperties(obj) {\n    for (const key in obj) {\n      if (typeof this[key] !== 'undefined') continue;\n      Object.defineProperty(this, key, {\n        value: obj[key],\n      });\n    }\n  }\n\n  /**\n   * @param {string} key\n   * @param {Listener} listener\n   */\n  addListener(key, listener) {\n    this.$privateStore.addListener(key, listener);\n  }\n\n  mount() {\n    this.trigger('mount');\n  }\n\n  destroy() {\n    this.trigger('destroy');\n    if (this.html && this.html !== ''\n      && typeof this.html.remove === 'function') this.html.remove();\n    this.html = null;\n  }\n\n  /**\n   * @param {string} key\n   * @param {function} fn\n   */\n  when(key, fn) {\n    if (typeof this.$events[key] === 'undefined') this.$events[key] = [];\n    this.$events[key].push(fn);\n  }\n\n  /**\n   * @param {string} key\n   * @param {*} value\n   */\n  trigger(key, value) {\n    if (typeof this.on[key] === 'function') {\n      this.on[key].call(this, value);\n    }\n\n    if (typeof this.$events[key] !== 'undefined') {\n      for (const i in this.$events[key]) {\n        this.$events[key][i].call(this, value);\n      }\n    }\n  }\n\n  /**\n   * @param {object} newState\n   */\n  setState(newState) {\n    if (typeof newState === 'object') {\n      const oldstate = clone(this.state);\n      this.state = Object.assign(oldstate, newState);\n\n      // TODO: Enable Object.freeze only in development\n      // disable for production\n      // Object.freeze(this.state)\n\n      if (this.$config.listen) {\n        this.$privateStore.setState(newState);\n      }\n    } else {\n      // console.error('[Radi.js] ERROR: Action did not return object to merge with state');\n    }\n\n    if (!this.$config.listen && typeof this.view === 'function' && this.html) {\n      fuseDom(this.html, this.view());\n    }\n    this.trigger('update');\n    return this.state;\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  static isComponent() {\n    return true;\n  }\n}\n","import Component from './component/Component';\nimport appendChild from './r/appendChild';\n\n/**\n * @param {Component} component\n * @param {string} id\n * @returns {HTMLElement|Node}\n */\nconst mount = (component, id) => {\n  const container = document.createDocumentFragment()\n  const slot = typeof id === 'string' ? document.getElementById(id) : id;\n  const rendered =\n    (component instanceof Component || component.render) ? component.render() : component;\n\n  if (Array.isArray(rendered)) {\n    for (var i = 0; i < rendered.length; i++) {\n      mount(rendered[i], container);\n    }\n  } else {\n    // Mount to container\n    appendChild(container)(rendered);\n  }\n\n  // Mount to element\n  slot.appendChild(container);\n\n  if (typeof slot.destroy !== 'function') {\n    slot.destroy = () => {\n      for (var i = 0; i < rendered.length; i++) {\n        if (typeof rendered[i].destroy === 'function') {\n          rendered[i].destroy();\n        }\n      }\n    }\n  }\n\n  if (typeof component.mount === 'function') component.mount();\n\n  return slot;\n}\n\nexport default mount;\n","/**\n * @param {*} value\n * @returns {*[]}\n */\nconst ensureArray = value => {\n  if (Array.isArray(value)) return value;\n  return [value];\n};\n\nexport default ensureArray;\n","/**\n * @param {*} oldNode - Node to be swapped\n * @returns {Node}\n */\nconst swapNode = oldNode => {\n\n  const newNode = oldNode;\n\n  oldNode = newNode.cloneNode(true);\n\n  oldNode.remove();\n\n  return newNode;\n};\n\nexport default swapNode;\n","import appendChildren from '../appendChildren';\nimport ensureArray from './ensureArray';\nimport swapNode from './swapNode';\n\n/**\n * @param {*} value - Value of the listener\n * @returns {Node[]}\n */\nconst listenerToNode = value => {\n  if (value instanceof DocumentFragment) {\n    return Array.from(value.childNodes).map(childNode => swapNode(childNode));\n  }\n\n  const element = document.createDocumentFragment();\n  appendChildren(element, ensureArray(value));\n  return listenerToNode(element);\n};\n\nexport default listenerToNode;\n","import listenerToNode from './listenerToNode';\nimport fuseDom from './fuseDom';\n\nexport default class ElementListener {\n  /**\n   * @param {object} options\n   * @param {Listener} options.listener\n   * @param {Node} options.element\n   */\n  constructor({ listener, element }) {\n    this.listener = listener;\n    this.element = element;\n    this.listenerAsNode = [];\n    this.attached = false;\n    this.handleValueChange = this.handleValueChange.bind(this);\n  }\n\n  /**\n   * Attaches listener to given element and starts listening.\n   * @returns {ElementListener}\n   */\n  attach() {\n    if (!this.element.listeners) this.element.listeners = [];\n    this.element.listeners.push(this);\n    this.listener.onValueChange(this.handleValueChange);\n    this.attached = true;\n    return this;\n  }\n\n  /**\n   * @param {*} value\n   */\n  handleValueChange(value) {\n    const newNode = listenerToNode(value);\n\n    var i = 0\n    for (const node of newNode) {\n      if (!this.listenerAsNode[i]) {\n        this.listenerAsNode.push(this.element.appendChild(node));\n      } else {\n        this.listenerAsNode[i] = fuseDom(this.listenerAsNode[i], node);\n      }\n      i+=1\n    }\n\n    if (i < this.listenerAsNode.length) {\n      var nodesLeft = this.listenerAsNode.splice(i-this.listenerAsNode.length);\n      for (const node of nodesLeft) {\n        node.remove();\n      }\n    }\n  }\n\n  /**\n   * @param {Node} newElement\n   */\n  updateElement(newElement) {\n    this.element = newElement;\n    return this.element;\n  }\n}\n","import ElementListener from './ElementListener';\n\n/**\n * @param {Listener} listener\n * @param {HTMLElement} element\n * @returns {ElementListener}\n */\nconst appendListenerToElement = (listener, element) =>\n  new ElementListener({\n    listener,\n    element,\n  }).attach();\n\nexport default appendListenerToElement;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n\nimport mount from '../mount';\nimport Component from '../component/Component';\nimport Listener from '../listen/Listener';\nimport appendChildren from './appendChildren';\nimport appendListenerToElement from './utils/appendListenerToElement';\n\n/**\n * @param {HTMLElement} element\n * @returns {function(*)}\n */\nconst appendChild = element => child => {\n  if (!child && typeof child !== 'number') {\n    // Needs to render every child, even empty ones to preserve dom hierarchy\n    child = '';\n  }\n\n  if (child instanceof Component) {\n    mount(child, element);\n    return;\n  }\n\n  if (child instanceof Listener) {\n    appendListenerToElement(child, element);\n    return;\n  }\n\n  if (Array.isArray(child)) {\n    appendChildren(element, child);\n    return;\n  }\n\n  // Handles lazy loading components\n  if (typeof child === 'function') {\n    const placeholder = document.createElement('div');\n    const el = element.appendChild(placeholder);\n    el.__async = true;\n    child().then(local => {\n      if (typeof local.default === 'function'\n        && local.default.isComponent\n        && local.default.isComponent()) {\n        /*eslint-disable*/\n        appendChild(el)(new local.default());\n        el.__async = false;\n        /* eslint-enable */\n      } else {\n        appendChild(el)(local.default);\n        el.__async = false;\n      }\n    }).catch(console.warn);\n    return;\n  }\n\n  if (child instanceof Node) {\n    element.appendChild(child);\n    return;\n  }\n\n  element.appendChild(document.createTextNode(child));\n};\n\nexport default appendChild;\n","import appendChild from './appendChild';\n\n/**\n * @param {HTMLElement} element\n * @param {*[]} children\n */\nconst appendChildren = (element, children) => {\n  children.forEach(appendChild(element));\n};\n\nexport default appendChildren;\n","import setAttributes from './setAttributes';\nimport getElementFromQuery from './utils/getElementFromQuery';\nimport appendChildren from './appendChildren';\n\n/**\n * @param {*} query\n * @param {object} props\n * @param {...*} children\n * @returns {(HTMLElement|Component)}\n */\nconst r = (Query, props, ...children) => {\n  if (typeof Query === 'function' && Query.isComponent) {\n    return new Query(children).setProps(props || {});\n  }\n\n  if (typeof Query === 'function') {\n    const propsWithChildren = props || {};\n    propsWithChildren.children = children;\n    return Query(propsWithChildren);\n  }\n\n  const element = getElementFromQuery(Query);\n\n  if (props !== null) setAttributes(element, props);\n  appendChildren(element, children);\n\n  return element;\n};\n\nexport default r;\n","import Listener from './Listener';\n\n/**\n * The listen function is used for dynamically binding a component property\n * to the DOM. Also commonly imported as 'l'.\n * @param {Component} component\n * @param {...string} path\n * @returns {Listener}\n */\nconst listen = (component, ...path) =>\n  new Listener(component, ...path);\n\nexport default listen;\n","import GLOBALS from '../consts/GLOBALS';\n\nconst remountActiveComponents = () => {\n  Object.values(GLOBALS.ACTIVE_COMPONENTS).forEach(component => {\n    if (typeof component.onMount === 'function') {\n      component.onMount(component);\n    }\n  });\n};\n\nexport default remountActiveComponents;\n","import GLOBALS from './consts/GLOBALS';\nimport r from './r';\nimport listen from './listen';\nimport component from './component';\nimport Component from './component';\nimport mount from './mount';\nimport remountActiveComponents from './utils/remountActiveComponents';\n\n// Descriptor for actions\nfunction action(target, key, descriptor) {\n  const act = descriptor.value;\n  descriptor.value = function (...args) {\n    this.setState.call(this, act.call(this, ...args));\n  }\n  return descriptor;\n}\n\nconst Radi = {\n  version: GLOBALS.VERSION,\n  activeComponents: GLOBALS.ACTIVE_COMPONENTS,\n  r,\n  listen,\n  l: listen,\n  component,\n  Component,\n  action,\n  headless: (key, comp) => {\n    // TODO: Validate component and key\n    const mountedComponent = new comp();\n    mountedComponent.mount();\n    return GLOBALS.HEADLESS_COMPONENTS['$'.concat(key)] = mountedComponent;\n  },\n  mount,\n  freeze: () => {\n    GLOBALS.FROZEN_STATE = true;\n  },\n  unfreeze: () => {\n    GLOBALS.FROZEN_STATE = false;\n    remountActiveComponents();\n  },\n};\n\n// Pass Radi instance to plugins\nRadi.plugin = (fn, ...args) => fn(Radi, ...args);\n\nif (window) window.$Radi = Radi;\n\nmodule.exports = Radi;\n"],"names":["component"],"mappings":"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"}