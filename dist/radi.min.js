var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,f){b!=Array.prototype&&b!=Object.prototype&&(b[e]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var e=0;return $jscomp.iteratorPrototype(function(){return e<b.length?{done:!1,value:b[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var e=b[Symbol.iterator];return e?e.call(b):$jscomp.arrayIterator(b)};
$jscomp.polyfill=function(b,e,f,h){if(e){f=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var g=b[h];g in f||(f[g]={});f=f[g]}b=b[b.length-1];h=f[b];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Object.is",function(b){return b?b:function(b,f){return b===f?0!==b||1/b===1/f:b!==b&&f!==f}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,f){var e=this;e instanceof String&&(e=String(e));var g=e.length;for(f=f||0;f<g;f++)if(e[f]==b||Object.is(e[f],b))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,e,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,f){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,f||0)}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function e(){this.batch_=null}function f(b){return b instanceof g?b:new g(function(p,e){p(b)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;e.prototype.asyncExecute=function(b){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(b);return this};e.prototype.asyncExecuteBatch_=function(){var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})};var h=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(b){h(b,
0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var e=0;e<b.length;++e){var f=b[e];delete b[e];try{f()}catch(t){this.asyncThrow_(t)}}}this.batch_=null};e.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var g=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{b(e.resolve,e.reject)}catch(q){e.reject(q)}};g.prototype.createResolveAndReject_=
function(){function b(b){return function(p){f||(f=!0,b.call(e,p))}}var e=this,f=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};g.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof g)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var e=null!=b;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};g.prototype.resolveToNonPromiseObj_=function(b){var e=
void 0;try{e=b.then}catch(q){this.reject_(q);return}"function"==typeof e?this.settleSameAsThenable_(e,b):this.fulfill_(b)};g.prototype.reject_=function(b){this.settle_(2,b)};g.prototype.fulfill_=function(b){this.settle_(1,b)};g.prototype.settle_=function(b,e){if(0!=this.state_)throw Error("Cannot settle("+b+", "+e|"): Promise already settled in state"+this.state_);this.state_=b;this.result_=e;this.executeOnSettledCallbacks_()};g.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
this.onSettledCallbacks_,e=0;e<b.length;++e)b[e].call(),b[e]=null;this.onSettledCallbacks_=null}};var v=new e;g.prototype.settleSameAsPromise_=function(b){var e=this.createResolveAndReject_();b.callWhenSettled_(e.resolve,e.reject)};g.prototype.settleSameAsThenable_=function(b,e){var f=this.createResolveAndReject_();try{b.call(e,f.resolve,f.reject)}catch(t){f.reject(t)}};g.prototype.then=function(b,e){function f(b,e){return"function"==typeof b?function(e){try{h(b(e))}catch(A){p(A)}}:e}var h,p,z=new g(function(b,
e){h=b;p=e});this.callWhenSettled_(f(b,h),f(e,p));return z};g.prototype.catch=function(b){return this.then(void 0,b)};g.prototype.callWhenSettled_=function(b,e){function f(){switch(g.state_){case 1:b(g.result_);break;case 2:e(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?v.asyncExecute(f):this.onSettledCallbacks_.push(function(){v.asyncExecute(f)})};g.resolve=f;g.reject=function(b){return new g(function(e,f){f(b)})};g.race=function(b){return new g(function(e,
g){for(var h=$jscomp.makeIterator(b),q=h.next();!q.done;q=h.next())f(q.value).callWhenSettled_(e,g)})};g.all=function(b){var e=$jscomp.makeIterator(b),h=e.next();return h.done?f([]):new g(function(b,g){function q(e){return function(f){p[e]=f;t--;0==t&&b(p)}}var p=[],t=0;do p.push(void 0),t++,f(h.value).callWhenSettled_(q(p.length-1),g),h=e.next();while(!h.done)})};return g},"es6","es3");$jscomp.owns=function(b,e){return Object.prototype.hasOwnProperty.call(b,e)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(b,e){for(var f=1;f<arguments.length;f++){var h=arguments[f];if(h)for(var g in h)$jscomp.owns(h,g)&&(b[g]=h[g])}return b};$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");
$jscomp.iteratorFromArray=function(b,e){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var f=0,h={next:function(){if(f<b.length){var g=f++;return{value:e(g,b[g]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
(function(b,e){"object"===typeof exports&&"undefined"!==typeof module?module.exports=e():"function"===typeof define&&define.amd?define(e):b.Radi=e()})(this,function(){function b(a){return a.charAt(0).toUpperCase()+a.substr(1)}function e(a){return a.reduce(function(a,d){return a.concat(Array.isArray(d)?e(d):d)},[])}function f(a,c,d){void 0===d&&(d={});return l.CUSTOM_ATTRIBUTES[a]={name:a,caller:c,allowedTags:d.allowedTags||null,addToElement:d.addToElement}}function h(a){B("destroy",a);a.__radiRef=
void 0;if(1===a.nodeType)for(a=a.firstChild;a;)h(a),a=a.nextSibling}function g(a){return"function"===typeof a?a:function(c){return a||c}}function v(a){var c=this,d,k=a.src,b=a.waitMs,e=a.transform;void 0===e&&(e=function(a){return a});var f=a.error;void 0===f&&(f=function(a){return a});var h=a.placeholder;void 0===h&&(h=J);var n=a.value;void 0===n&&(n=null);var u=a.loaded;void 0===u&&(u=!1);this.cached=!0;if(!k||!(k instanceof Promise||"LazyPromise"===k.constructor.name))return console.warn("[Radi] \x3cAwait/\x3e must have `src` as a Promise"),
null;u||(h!==n&&(b?d=setTimeout(function(){c.update(Object.assign({},a,{value:h}))},b):n=h),k.then(function(k){k&&"object"===typeof k&&"function"===typeof k.default&&(k=C(k.default));clearTimeout(d);var b=J;J=h;c.update(Object.assign({},a,{value:g(e)(k),loaded:!0}));J=b}).catch(function(k){console.error(k);clearTimeout(d);c.update(Object.assign({},a,{value:g(f)(k),loaded:!0}))}));return n}function p(a){var c=a.update&&function(){return a.update()}||a;0>L.indexOf(c)&&L.push(c);return c}function z(a,
c,d){void 0===d&&(d=[]);if(c){if(c&&(c.constructor===Object||c.constructor===Array)){var k=Array.isArray(c)?[]:{},b;for(b in c)k[b]=z(a,c[b],d.concat(b));return k}if(c instanceof m)return c.subscribe.call(c,function(c){a.update(a.setPartial(d,c))}),c.get()}return c}function q(a,c){function d(c){b.dispatch(k,c);a(c,d);return b}var k=function(a,c){return c};Object.defineProperty(k,"name",{value:a.name||"update"});var b=new m(null,c||"Subscribe");return d}function t(a){return Array.isArray(a)?a.map(function(a){return a.value}):
a.value}function ha(a,c){return Array.isArray(a)?[].reduce.call(c,function(a,c){return c.touched&&!0||a},!1):a.touched}function K(a,c,d){var k=Y(a,function(a,c){return{touched:a.touched,value:c}}),b=Object.keys(k).reduce(function(a,c){var d;return Object.assign({},a,(d={},d[c]=t(k[c]),d))},{}),e=[],f;for(f in k){var g=k[f];if("function"===typeof c[f]){var h=c[f](t(g),b);h=h&&"function"===typeof h.check&&h.check()||h||f+" field is invalid";!0!==h&&e.push({field:f,touched:!!ha(g,a[f]),error:h})}}d(e)}
function W(a){return Array.isArray(a)?a.reduce(function(a,d){return W(d)||a},!1):a&&a.loading&&a.loading.state}function ia(a,c){return"function"===typeof a.beforedestroy?a.beforedestroy(c):c()}function I(a){e([a]).forEach(function(a){if(a instanceof Node){a.__radiPoint&&a.__radiPoint.dom&&0<a.__radiPoint.dom.length&&a.__radiPoint.dom.forEach(I);var c=a.parentNode;a instanceof Node&&c instanceof Node&&ia(a,function(){h(a);c.removeChild(a)})}})}function A(a,c){a=e([w(a)]);var d=D(a,c);d.forEach(function(a){c.appendChild(a);
B("mount",a)});return{nodes:a,dom:d}}function B(a,c,d){void 0===d&&(d=c);var b=document.createEvent("Event");b.initEvent(a,!1,!0);"function"===typeof c.dispatchEvent&&(c._eventFired=!0,c.dispatchEvent(b,d));return c}function M(a,c,d){d||(d=c.parentNode);if(a instanceof Node){if(null===c||void 0===c)return d.insertBefore(a,c);if(c instanceof Node)return d.insertBefore(a,c.nextSibling)}return a}function D(a,c){if(Array.isArray(a))return a.map(function(a){return D(a,c)});if(a.type===r.TEXT)return document.createTextNode(a.query);
if(a.type===r.NODE){var d="svg"===a.query||c instanceof SVGElement?document.createElementNS("http://www.w3.org/2000/svg",a.query):document.createElement(a.query);A(a.children,d);ja(d,a.props);return d}if(a.type===r.COMPONENT){a.pointer||(a.pointer=document.createTextNode(""),a.pointer.__radiPoint=a);a.source=new E(a);var b;a.pointer.addEventListener("mount",function(c){a.update();"string"===typeof a.source.style&&(b=document.createElement("style"),b.innerHTML=a.source.style,document.head.appendChild(b));
a.source.trigger("mount",c);a.mounted=!0},{passive:!0,once:!0},!1);a.pointer.addEventListener("destroy",function(c){a.source.trigger("destroy",c);b instanceof Node&&document.head.removeChild(b);a.mounted=!1},{passive:!0,once:!0},!1);return a.pointer}return document.createTextNode(a.toString())}function N(a,c){return a instanceof x?c(a.getValue(function(d){return c(a.map(d))})):c(a)}function ka(a,c,d){d?(a.setAttribute(c,d),a[c]=!0):a[c]=!1}function Z(a,c,d){"model"===c?c="value":("class"===c||"className"===
c)&&Array.isArray(d)&&(d=d.filter(function(a){return a&&"function"!==typeof a}).join(" "));"style"===c&&"string"!==typeof d?la(a,d):/^on/.test(c)?ma(a,c,d):"className"===c?a.setAttribute("class",d):"boolean"===typeof d?ka(a,c,d):("value"===c&&document.activeElement!==a&&(a[c]=d),a.setAttribute(c,d))}function la(a,c){Object.keys(c).forEach(function(d){N(c[d],function(c){a.style[d]=c})})}function ja(a,c){Object.keys(c||{}).forEach(function(d){if("undefined"!==typeof l.CUSTOM_ATTRIBUTES[d]){var b=l.CUSTOM_ATTRIBUTES[d],
e=b.allowedTags,f=b.addToElement;b=b.caller;if(!e||e&&0<e.length&&0<=e.indexOf(a.localName))if("function"===typeof b&&(c[d]=b(a,c[d])),!f)return}N(c[d],function(c){Z(a,d,c)})})}function na(a,c,d){void 0===d&&(d={});var b=Object.assign({},c,d);"undefined"!==typeof a.__radiHandlers&&(a.__radiHandlers.forEach(function(c){a.removeEventListener.apply(a,c)}),a.__radiHandlers=[]);Object.keys(b).forEach(function(b){N(c[b],function(c){"model"===b&&(b="value");var k=b,e=d[b];"undefined"===typeof c||!1===c||
null===c?/^on/.test(k)||("className"===k?a.removeAttribute("class"):"boolean"===typeof e?(a.removeAttribute(k),a[k]=!1):a.removeAttribute(k)):e&&c===e||Z(a,k,c)})})}function ma(a,c,d){var b=["mount","destroy"];if(/^on/.test(c)){"undefined"===typeof a.__radiHandlers&&(a.__radiHandlers=[]);var e=[c.replace(/^on/,"").toLowerCase(),function(k){0<=b.indexOf(c)?a===k.target&&d(k):"function"===typeof d&&d(k)}];a.__radiHandlers.push(e);a.addEventListener(e[0],e[1],!1)}}function oa(a){return[].reduce.call(a,
function(a,d){var c;return Object.assign({},a,(c={},c[d.name]=d.value,c))},{})}function pa(a){var c=Array.prototype.filter.call(a.childNodes,function(a){return"undefined"!==typeof a.__radiPoint}).reduce(function(a,c){return a.concat(c.__radiPoint.dom)},[]);return Array.prototype.filter.call(a.childNodes,function(a){return 0>c.indexOf(a)})}function O(a,c,d,b){var k;if(c){if(a){if(a.type===r.NODE){var e=pa(c);if(c.nodeName===a.query.toUpperCase()){d=oa(c.attributes);if(e||a.children)for(k=Math.max(e.length,
a.children.length)-1;0<=k;k--)O(a.children[k],e[k],c);na(c,a.props,d);return{newDom:c,newStucture:a,last:b}}}if(a.type===r.TEXT&&3===c.nodeType&&!c.__radiPoint)return c.textContent!==a.query&&(c.textContent=a.query),{newDom:c,newStucture:a,last:b};if(a.type===r.COMPONENT&&(c&&c.__radiPoint&&a.query.name===c.__radiPoint.query.name&&!0===c.__radiPoint.source.cached&&(l.USE_CACHE=!0,a.pointer=c.__radiPoint.pointer,a.dom=c.__radiPoint.dom),c.__radiPoint&&c.__radiPoint.query===a.query))return c.__radiPoint.update(a.props,
a.children),e=c.__radiPoint,{newDom:c,newStucture:e,last:b};b=k=B("mount",M(D(e=a),c,d));b.__radiPoint&&b.__radiPoint&&b.__radiPoint.dom&&(b=b.__radiPoint.dom[b.__radiPoint.dom.length-1])}I(c)}else b=k=B("mount",M(D(e=a),b,d));return{newDom:k,newStucture:e,last:b}}function aa(a,c){var d=this;void 0===a&&(a=this.props);void 0===c&&(c=this.children);var b=Object.assign({},this.props);a&&(this.props=a);c&&(this.children=c);if(this.source&&"function"===typeof this.source.shouldUpdate&&!this.source.shouldUpdate(a,
b))return this.dom;a=e([w(this.query.call(this.source,Object.assign({},this.props,{children:this.children})))]);if(!this.dom)return this.dom=D(this.domStructure=a).reverse().map(function(a){return B("mount",M(a,d.pointer))}).reverse();if(l.USE_CACHE)return l.USE_CACHE=!1,this.dom;c=document.activeElement;b=window.scrollY;if(null===this.pointer.parentNode)return this.dom;for(var f=Math.max(this.dom.length,a.length),g=this.pointer,h=[],m=[],n=0;n<=f-1;n++){var u=O(a[n],this.dom[n],this.pointer.parentNode,
g);u.last&&(g=u.last);u.newDom&&(h[n]=u.newDom);u.newStucture&&(m[n]=u.newStucture)}c.focus();window.scrollTo(0,b);this.domStructure=m;return this.dom=h}function P(a){return function(){for(var c=[],d=arguments.length;d--;)c[d]=arguments[d];d=l.CURRENT_COMPONENT;l.CURRENT_COMPONENT=a;c=aa.call.apply(aa,[a].concat(c));l.CURRENT_COMPONENT=d;return c}}function w(a){if(Array.isArray(a))return e(a).map(w);if("function"===typeof a)return w(a());if(a instanceof Promise||a&&"LazyPromise"===a.constructor.name)return w({query:v,
props:{src:a},children:[]});if(a instanceof x){var c={query:a.update,type:r.COMPONENT,props:{},children:[],pointer:null,dom:null};c.update=P(c);a.link(function(){return null!==c.dom&&c.update()});return c}return a&&"number"===typeof a.type?a:a&&"object"===typeof a&&"undefined"!==typeof a.query&&"undefined"!==typeof a.props&&"undefined"!==typeof a.children?"function"===typeof a.query?(a=Object.assign({},a,{type:r.COMPONENT,pointer:null,dom:null}),a.update=P(a),a):"undefined"!==typeof l.CUSTOM_TAGS[a.query]?
(a=Object.assign({},a,{query:l.CUSTOM_TAGS[a.query].render,type:r.COMPONENT,pointer:null,dom:null}),a.update=P(a),a):Object.assign({},a,{type:r.NODE,children:w(e(a.children))}):a||"string"===typeof a||"number"===typeof a?{query:a.toString(),type:r.TEXT}:{query:"",type:r.TEXT}}function C(a,c){for(var d=[],b=arguments.length-2;0<b--;)d[b]=arguments[b+2];b="number"===typeof a?""+a:a;var f=c||{};d=e(d);if(b instanceof Promise||b&&"LazyPromise"===b.constructor.name)b=v,f={src:a};return{query:b,props:f,
children:d}}var l={VERSION:"0.5.0",CURRENT_COMPONENT:null,CUSTOM_ATTRIBUTES:{},CUSTOM_TAGS:{},IS_UPDATE:!1,SERVICES:{},USE_CACHE:!1},ba=function(a){return!["checkbox","radio"].includes(a.type)||a.checked},qa=function(a){return[].reduce.call(a,function(a,b){return b.selected?a.concat(b.value):a},[])},Y=function(a,c){void 0===c&&(c=function(a,c){return c});return[].reduce.call(a,function(a,b){b.name&&(b.value||""===b.value)&&("checkbox"===b.type?("undefined"===typeof a[b.name]&&(a[b.name]=[]),ba(b)&&
(a[b.name]=a[b.name].concat(c(b,b.value)))):ba(b)&&(a[b.name]=b.options&&b.multiple?c(b,qa(b)):c(b,b.value)));return a},{})},E=function(a){this.type=a.type;this.name=a.type.name;this.pointer=a.pointer;this.update=a.update;this.__$events={}};E.prototype.on=function(a,c){var d=this.__$events;a="on"+b(a);d[a]||(d[a]=[]);d[a].push(c);return c};E.prototype.trigger=function(a){for(var c=[],d=arguments.length-1;0<d--;)c[d]=arguments[d+1];d="on"+b(a);(this.__$events[d]||[]).map(function(a){return a.apply(void 0,
c)});"function"===typeof this[d]&&this[d].apply(this,c)};var F=function(){};F.prototype.add=function(a,c){for(var b=[],e=arguments.length-2;0<e--;)b[e]=arguments[e+2];if("string"!==typeof a)throw Error("[Radi.js] Service first argument has to be string");if("undefined"!==typeof this[a]||"undefined"!==typeof E.prototype[a])throw Error('[Radi.js] Service "'+a+'" is already in use');if("function"!==typeof c)throw Error("[Radi.js] Service second argument has to be function");b=c.apply(void 0,b);E.prototype[a]=
this[a]=b;return l.SERVICES[a]=b};F=new F;var J,ca=function(a,c,b,e){b=b[c];if("function"!==typeof b)console.warn("[Radi.js] Animation `"+c+"` for node `"+a.nodeName.toLowerCase+"` should be function");else return b(a,e)};f("animation",function(a,c){ca(a,"in",c,function(){});a.beforedestroy=function(b){return ca(a,"out",c,b)}});f("html",function(a,c){a.addEventListener("mount",function(){a.escape?a.textContent=c:a.innerHTML=c})});f("loadfocus",function(a){a.addEventListener("mount",function(){return setTimeout(function(){return a.focus()},
0)})});f("onsubmit",function(a,c){return function(b){a.prevent&&b.preventDefault();c(b,Y(a.elements||{}))}},{allowedTags:["form"],addToElement:!0});var L=[],G=function(){this.dependencies={}};G.prototype.add=function(a,c){a=a[0];"undefined"===typeof this.dependencies[a]&&(this.dependencies[a]=[]);this.dependencies[a]=this.dependencies[a].filter(function(a){return!l.CURRENT_COMPONENT||a!==l.CURRENT_COMPONENT.query&&a.query!==l.CURRENT_COMPONENT.query?a.pointer instanceof Node?a.mounted?!0:a.pointer.isConnected:
!0:!0});0>this.dependencies[a].indexOf(c)&&this.dependencies[a].push(c)};G.prototype.remove=function(a,c){a=a[0];c=(this.dependencies[a]||[]).indexOf(c);0<=c&&this.dependencies[a].splice(c,1)};G.prototype.component=function(a,c){var b=this;c&&(this.add(a,c),c.__onDestroy=function(){b.remove(a,c)});return c};G.prototype.trigger=function(a,c,b){this.dependencies[a]&&this.dependencies[a].forEach(function(a){return p(a)(c,b)})};var H=function(a){return a},x=function(a,c){this.map=a;this.getValue=this.getValue.bind(this);
this.update=this.update.bind(this);this.store=c;this.dep=c.event};x.prototype.link=function(a){this.subbed||(this.subbed=this.store.subscribe(a));return this.subbed};x.prototype.getValue=function(a){var c=this.store.get();this.subbed||(this.subbed=this.store.subscribe(a));return this.cached=this.map(c)};x.prototype.update=function(){var a=this.store.get();return this.cached=this.map(a)};var da=H,Q=H,R=[],m=function(a,c){this.dependencies=new G;this.transform=H;this.willDispatch=this.willDispatch.bind(this);
this.dispatch=this.dispatch.bind(this);this.subscribe=this.subscribe.bind(this);this.update=this.update.bind(this);this.get=this.get.bind(this);this.listener=this.listener.bind(this);this.storedState=z(this,a);this.name=c;!1!==c&&(this.id=R.push(this)-1,Q(R))},S={state:{configurable:!0},bind:{configurable:!0}};S.state.get=function(){l.CURRENT_COMPONENT&&this.dependencies.component("*",l.CURRENT_COMPONENT);return this.get()};S.bind.get=function(){var a=this;return{value:this.get(),onInput:function(c){return a.update(c.target.value)}}};
m.prototype.get=function(){return this.transform(this.storedState)};m.prototype.map=function(a){var c=this.transform;this.transform=function(b){return a(c(b))};return this};m.prototype.setPartial=function(a,c,b){void 0===b&&(b=this.storedState);if(b&&a&&a.length){var d=a[0],e=a.slice(1);a=b;c=this.setPartial(e,c,b[d]);a&&a&&(a.constructor===Object||a.constructor===Array)?(b=Array.isArray(a)?[].concat(a):Object.assign({},a),b[d]=c,d=b):d=a;return d}return c};m.prototype.update=function(a){a=z(this,
a);var c=this.get();this.storedState=a;this.dependencies.trigger("*",this.get(),c);L=[];return this.get()};m.prototype.subscribe=function(a){this.dependencies.add("*",a);a(this.get(),null);return this};m.prototype.unsubscribe=function(a){this.dependencies.remove("*",a)};m.prototype.dispatch=function(a){for(var c=[],b=arguments.length-1;0<b--;)c[b]=arguments[b+1];b=a.apply(void 0,[this.storedState].concat(c));!1!==this.name&&da({store:this,action:a.name,args:c,payload:b});return this.update(b)};m.prototype.willDispatch=
function(a){for(var c=this,b=[],e=arguments.length-1;0<e--;)b[e]=arguments[e+1];return function(){for(var d=[],e=arguments.length;e--;)d[e]=arguments[e];return c.dispatch.apply(c,[a].concat(b,d))}};m.prototype.listener=function(a){void 0===a&&(a=function(a){return a});return new x(a,this)};m.middleware=function(a,c){void 0===a&&(a=H);void 0===c&&(c=H);Q=a;da=c;Q(R)};Object.defineProperties(m.prototype,S);var T=new m({},null),ra=function(a,c,b){var d;return Object.assign({},a,(d={},d[c]=b,d))},sa=
0,ea={};f("onvalidate",function(a,c){function b(a){T.dispatch(ra,e,a)}var e=a.getAttribute("name")||"defaultForm"+sa++,f;"function"===typeof c&&(ea[e]=c);T.subscribe(function(a){f&&(f.disabled=0<a[e].length)});a.addEventListener("mount",function(c){var d=ea[e];if("function"===typeof d){var k=d(c),g=a.elements;if(k&&"object"===typeof k&&g){c=$jscomp.makeIterator(g);for(d=c.next();!d.done;d=c.next()){d=d.value;var h=d.name;if(!d.__radiValidate&&"string"===typeof h&&"function"===typeof k[h]){d.addEventListener("input",
function(){K(g,k,b)});d.__radiValidate=!0;d.touched=!1;var X=function(a){a=a.target;a.touched=!0;a.removeEventListener("change",X);K(g,k,b)};d.addEventListener("change",X)}"submit"===d.type&&!0===d.disabled&&(f=d)}K(g,k,b)}}},!1)},{allowedTags:["form"]});var U=C,y=new m({},null),ta=function(a,c){var b;return Object.assign({},a,(b={},b[c]=!1,b))},fa=function(a,c,b){var d;return Object.assign({},a,(d={},d[c]=b,d))},ua=F.add("Modal",function(){return{open:function(a){return y.dispatch(fa,a,!0)},close:function(a){return y.dispatch(fa,
a,!1)},onOpen:function(a,c){return y.subscribe(function(b,e){return!0===b[a]&&b[a]!==e[a]&&c()})},onClose:function(a,c){return y.subscribe(function(b,e){return!1===b[a]&&b[a]!==e[a]&&c()})}}}),r={NODE:0,TEXT:1,COMPONENT:2},V={v:l.VERSION,version:l.VERSION,h:C,html:C,customAttribute:f,destroy:I,patch:O,mount:A,Service:F,Event:function(a,b,d){function c(){g.forEach(function(b){function c(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];h(d.apply(void 0,a.concat([b])))}m.push([b,c]);a.addEventListener(b,
c)})}function e(a,b){h=b}function f(a){return q(e,"Event")(a)}void 0===a&&(a=document);void 0===d&&(d=function(a){return a});var g=b.trim().split(" "),h=function(){},n=!0,m=[];if("function"!==typeof d)throw Error("[Radi.js] Subscription `"+b+"` must be transformed by function");c();Object.defineProperty(e,"name",{value:b||"update"});f.on=function(){n||(m=[],c(),n=!0)};f.off=function(){n&&(m.forEach(function(b){return a.removeEventListener(b[0],b[1])}),n=!1)};return f},Fetch:function(a,b,d,e){function c(a,
b){g=b;e&&!k&&(k=!0,f.fetch())}function f(a){return q(c,"Fetch")(a)}void 0===e&&(e=!1);var k=!1,g=function(){},h={},l=new m(!1,null);if("function"!==typeof a)throw Error("[Radi.js] Fetch first parameter must be function that returns promise");Object.defineProperty(c,"name",{value:a.name||"update"});f.loading=l;f.cache=!0;f.fetch=function(){for(var c=[],e=arguments.length;e--;)c[e]=arguments[e];var k=JSON.stringify(c);if(f.cache&&"undefined"!==typeof h[k])return g(h[k]),Promise.resolve();l.update(!0);
return a.apply(void 0,c).then(function(a){a="function"===typeof b?b(a):a;h[k]=a;g(a);l.update(!1)}).catch(function(a){a="function"===typeof d?d(a):a;l.update(!1);console.error(a)})};return f},Socket:function(a,b){function c(a,b){f=b}void 0===b&&(b=function(a){return a});var e=a.url,f=function(){};if("function"!==typeof b)throw Error("[Radi.js] Socket `"+e+"` must be transformed by function");a.onmessage=function(a){return f(b(a.data))};Object.defineProperty(c,"name",{value:e||"onmessage"});return function(a){return q(c,
"Socket")(a)}},Store:m,Subscribe:q,Await:v,Errors:function(a){var b=a.name;a=a.onrender;void 0===a&&(a=function(a){return a});var d=T.state;"undefined"===typeof b&&console.warn("[Radi.js] Warn: Every \x3cerrors\x3e tag needs to have `name` attribute!");"function"!==typeof a&&console.warn("[Radi.js] Warn: Every \x3cerrors\x3e tag needs to have `onrender` attribute!");return d[b]?a(d[b]):null},Modal:function(a){var b=a.name;void 0===b&&(b="default");a=a.children;var d=y.state;"undefined"===typeof b&&
console.warn("[Radi.js] Warn: Every \x3cmodal\x3e tag needs to have `name` attribute!");this.onMount=function(a){d[b]||y.dispatch(ta,b)};return d[b]&&U("div",{class:"radi-modal",name:b},U("div",{class:"radi-modal-backdrop",onclick:function(){return ua.close(b)}}),U.apply(void 0,["div",{class:"radi-modal-content"}].concat(a.slice())))},Portal:function(a){var b=a.children,d=a.parent;void 0===d&&(d=a.on||document.body);this.pointer&&this.pointer.__radiUpdateChild&&this.pointer.__radiUpdateChild(void 0,
b);this.onMount=function(a){A(C(function(c){var d=this;this.onMount=function(b){a.target.__radiUpdateChild=d.update;a.target.__radiPoint.dom[0].__radiRef=b.target.__radiPoint};return 0<c.children.length?c.children:b}),d)};this.onDestroy=function(a){I(a.target.__radiPoint.dom[0].__radiRef.dom)};return null},Loading:function(a){var b=a.src,d=a.children,e=a.placeholder;void 0===e&&(e=d);a=a.isLoading;void 0===a&&(a=W(b));return b?a?e:d:d},plugin:function(a){for(var b=[],d=arguments.length-1;0<d--;)b[d]=
arguments[d+1];return a.apply(void 0,[V].concat(b))}};window&&(window.Radi=V);return V});
