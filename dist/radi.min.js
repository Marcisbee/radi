var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,f){c!=Array.prototype&&c!=Object.prototype&&(c[e]=f.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var e=0;return $jscomp.iteratorPrototype(function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};$jscomp.arrayFromIterator=function(c){for(var e,f=[];!(e=c.next()).done;)f.push(e.value);return f};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};
$jscomp.polyfill=function(c,e,f,g){if(e){f=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var l=c[g];l in f||(f[l]={});f=f[l]}c=c[c.length-1];g=f[c];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Number.isNaN",function(c){return c?c:function(c){return"number"===typeof c&&isNaN(c)}},"es6","es3");
$jscomp.iteratorFromArray=function(c,e){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var f=0,g={next:function(){if(f<c.length){var l=f++;return{value:e(l,c[l]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.owns=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,e){for(var f=1;f<arguments.length;f++){var g=arguments[f];if(g)for(var l in g)$jscomp.owns(g,l)&&(c[l]=g[l])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(c){return c?c:function(c,f,g){$jscomp.initSymbolIterator();f=null!=f?f:function(c){return c};var e=[],n=c[Symbol.iterator];if("function"==typeof n)for(c=n.call(c);!(n=c.next()).done;)e.push(f.call(g,n.value));else{n=c.length;for(var p=0;p<n;p++)e.push(f.call(g,c[p]))}return e}},"es6","es3");$jscomp.polyfill("Object.values",function(c){return c?c:function(c){var f=[],e;for(e in c)$jscomp.owns(c,e)&&f.push(c[e]);return f}},"es8","es3");
(function(c,e){"object"===typeof exports&&"undefined"!==typeof module?e():"function"===typeof define&&define.amd?define(e):e()})(this,function(){var c={},e={},f=function(a,b){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];this.component=a;this.key=$jscomp.makeIterator(d).next().value;this.childPath=d.slice(1,d.length);this.path=d;this.value=null;this.changeListeners=[];this.processValue=function(a){return a};this.disabled=!1;this.component.addListener(this.key,this);this.component.state&&
this.handleUpdate(this.component.state[this.key])};f.prototype.extract=function(a){return a.value instanceof f?(a.value.disabled=!0,this.extract(a.value)):a};f.prototype.handleUpdate=function(a){var b=this;this.value=this.processValue(this.getShallowValue(a),this.value);if(this.disabled)return"function"===typeof this.disabled&&this.disabled(this.value),this.value;if(this.value instanceof f){if(this.value.disabled)return this.value;this.value=this.extract(this.value);this.value.disabled=function(a){b.changeListeners.forEach(function(b){return b(a)})}}this.changeListeners.forEach(function(a){return a(b.value)});
return this.value};f.prototype.onValueChange=function(a){this.changeListeners.push(a);a(this.value)};f.prototype.process=function(a){this.processValue=a;this.handleUpdate(this.value);return this};f.prototype.getShallowValue=function(a){if("object"!==typeof a||!this.childPath)return a;for(var b=$jscomp.makeIterator(this.childPath),d=b.next();!d.done;d=b.next())d=d.value,a=null===a||!a[d]&&"number"!==typeof a[d]?null:a[d];return a};var g=function(a){var b=a.listener,d=a.element;this.attributeKey=a.attributeKey;
this.listener=b;this.element=d;this.attached=!1;this.handleValueChange=this.handleValueChange.bind(this)};g.prototype.attach=function(){var a=this;this.element.attributeListeners||(this.element.attributeListeners=[]);this.element.attributeListeners.push(this);this.listener.onValueChange(this.handleValueChange);this.attached=!0;"model"===this.attributeKey&&(/(checkbox|radio)/.test(this.element.getAttribute("type"))?this.element.onchange=function(b){a.listener.component[a.listener.key]=b.target.checked}:
this.element.oninput=function(b){a.listener.component[a.listener.key]=b.target.value});return this};g.prototype.handleValueChange=function(a){if("value"===this.attributeKey||"model"===this.attributeKey)/(checkbox|radio)/.test(this.element.getAttribute("type"))?this.element.checked=a:this.element.value=a;else{var b={};z(this.element,(b[this.attributeKey]=a,b))}};g.prototype.updateElement=function(a){return this.element=a};var l=function(a){var b=a.listener,d=a.element;this.styleKey=a.styleKey;this.listener=
b;this.element=d;this.attached=!1;this.handleValueChange=this.handleValueChange.bind(this)};l.prototype.attach=function(){this.element.styleListeners||(this.element.styleListeners=[]);this.element.styleListeners.push(this);this.listener.onValueChange(this.handleValueChange);this.attached=!0;return this};l.prototype.handleValueChange=function(a){n(this.element,this.styleKey,a)};l.prototype.updateElement=function(a){return this.element=a};var n=function(a,b,d){if("undefined"!==typeof d){if(d instanceof
f)return(new l({styleKey:b,listener:d,element:a})).attach(),a[b];a=a.style;d="number"!==typeof d||Number.isNaN(d)?d:d+"px";return a[b]=d}},p=function(a,b){"string"===typeof b&&(a.style=b);if("object"!==typeof b||Array.isArray(b))return a.style;if(b instanceof f)return(new g({attributeKey:"style",listener:b,element:a})).attach(),a.style;for(var d in b)n(a,d,b[d]);return a.style},D=function(a){return Array.isArray(a)?a.filter(function(a){return a}).join(" "):a},z=function(a,b){var d={},c;for(c in b)d.value=
b[c],"undefined"!==typeof d.value&&(d.value||"number"===typeof d.value?"style"===c.toLowerCase()?p(a,d.value):d.value instanceof f?(new g({attributeKey:c,listener:d.value,element:a})).attach():"class"===c.toLowerCase()||"classname"===c.toLowerCase()?a.setAttribute("class",D(d.value)):"on"===c.substring(0,2).toLowerCase()?"onsubmit"===c.substring(0,8).toLowerCase()?a[c]=function(a){return function(b){for(var d=[],c=$jscomp.makeIterator(b.target.elements||[]),m=c.next();!m.done;m=c.next())m=m.value,
""!==m.name&&(m={name:m.name,el:m,type:m.type,default:m.defaultValue,value:m.value,set:function(a){this.el.value=a},reset:function(a){this.el.value=a;this.el.defaultValue=a}},d.push(m),Object.defineProperty(d,m.name,{value:m}));return a.value(b,d)}}(d):a[c]=d.value:(a.setAttribute(c,d.value),d={value:d.value}):a.removeAttribute(c))},E=function(){for(var a="",b=0;32>b;b++){var d=16*Math.random()|0;if(8===b||12===b||16===b||20===b)a+="-";a+=(12===b?4:16===b?d&3|8:d).toString(16)}return a},q=function(){this.store=
{}};q.prototype.addListener=function(a,b){"undefined"===typeof this.store[a]&&this.createItemWrapper(a);this.store[a].listeners.push(b);b.handleUpdate(this.store[a].value);return b};q.prototype.setState=function(a){for(var b=$jscomp.makeIterator(Object.keys(a)),d=b.next();!d.done;d=b.next())d=d.value,"undefined"===typeof this.store[d]&&this.createItemWrapper(d),this.store[d].value=a[d],this.triggerListeners(d);return a};q.prototype.createItemWrapper=function(a){return this.store[a]={listeners:[],
value:null}};q.prototype.triggerListeners=function(a){var b=this.store[a];b&&b.listeners.forEach(function(a){return a.handleUpdate(b.value)})};var t=function(a){for(var b=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,function(a){return a&&("function"===typeof a.destroy||a.listeners)},!1),d;d=b.nextNode();)d.listeners=null,d.destroy(),d.parentNode.removeChild(d);a.parentNode.removeChild(a)},u=function(a,b,d){if(Array.isArray(b)||Array.isArray(a))d=!0;if(!d){d=a.nodeType;var c=b.nodeType;if(d===
c&&(3===d||8===c))return a.isEqualNode(b)||(a.nodeValue=b.nodeValue,t(b)),a;if(a.listeners||b.listeners||3===d||3===c)return a.isEqualNode(b)||(a.parentNode.insertBefore(b,a),t(a)),b;d=a.attributes;for(var f=b.attributes,e,g,h,k=f.length-1;0<=k;--k)g=f[k],h=g.name,c=g.namespaceURI,e=g.value,c?(h=g.localName||h,g=a.getAttributeNS(c,h),g!==e&&a.setAttributeNS(c,h,e)):a.hasAttribute(h)?(g=a.getAttribute(h),g!==e&&("null"===e||"undefined"===e?a.removeAttribute(h):a.setAttribute(h,e))):a.setAttribute(h,
e);for(f=d.length-1;0<=f;--f)g=d[f],!1!==g.specified&&(h=g.name,(c=g.namespaceURI)?(h=g.localName||h,b.hasAttributeNS(c,h)||a.removeAttributeNS(c,h)):b.hasAttributeNS(null,h)||a.removeAttribute(h))}d=[].concat($jscomp.arrayFromIterable(a.childNodes||a));b=[].concat($jscomp.arrayFromIterable(b.childNodes||b));c=Math.max(d.length,b.length);for(h=0;h<c;h++)d[h]&&b[h]?u(d[h],b[h]):d[h]&&!b[h]?t(d[h]):!d[h]&&b[h]&&a.appendChild(b[h]);return a},v=function(a){if("object"!==typeof a||null===a)return a;if(Array.isArray(a))return a.map(v);
var b={},d;for(d in a)a.hasOwnProperty(d)&&(b[d]=v(a[d]));return b},k=function(a,b){this.addNonEnumerableProperties({$id:E(),$name:this.constructor.name,$config:"function"===typeof this.config?this.config():{listen:!0},$store:{},$events:{},$privateStore:new q});this.on="function"===typeof this.on?this.on():{};this.children=[];this.copyObjToInstance(c,"head");this.state=Object.assign("function"===typeof this.state?this.state():{},b||{});a&&this.setChildren(a)};k.prototype.render=function(){if("function"!==
typeof this.view)return"";var a=this.view();return this.html=a};k.prototype.setProps=function(a){this.setState(a);return this};k.prototype.setChildren=function(a){var b=this;this.children=a;this.setState();for(a=0;a<this.children.length;a++)"function"===typeof this.children[a].when&&this.children[a].when("update",function(){return b.setState()});return this};k.prototype.copyObjToInstance=function(a,b){var d=this,c;for(c in a){if("undefined"!==typeof this[c])throw Error("[Radi.js] Error: Trying to write for reserved variable `"+
c+"`");this[c]=a[c];"head"===b&&this[c].when("update",function(){return d.setState()})}};k.prototype.addNonEnumerableProperties=function(a){for(var b in a)"undefined"===typeof this[b]&&Object.defineProperty(this,b,{value:a[b]})};k.prototype.addListener=function(a,b){this.$privateStore.addListener(a,b)};k.prototype.mount=function(){this.trigger("mount")};k.prototype.destroy=function(){this.trigger("destroy");this.html&&""!==this.html&&this.html.remove()};k.prototype.when=function(a,b){"undefined"===
typeof this.$events[a]&&(this.$events[a]=[]);this.$events[a].push(b)};k.prototype.trigger=function(a,b){"function"===typeof this.on[a]&&this.on[a].call(this,b);if("undefined"!==typeof this.$events[a])for(var c in this.$events[a])this.$events[a][c].call(this,b)};k.prototype.setState=function(a){if("object"===typeof a){var b=v(this.state);this.state=Object.assign(b,a);this.$config.listen&&this.$privateStore.setState(a)}!this.$config.listen&&"function"===typeof this.view&&this.html&&u(this.html,this.view());
this.trigger("update");return this.state};k.isComponent=function(){return!0};var F=function(a){return Array.isArray(a)?a:[a]},A=function(a){if(a instanceof DocumentFragment)return Array.from(a.childNodes).map(function(a){var b=a;a=b.cloneNode(!0);a.remove();return b});var b=document.createDocumentFragment();w(b,F(a));return A(b)},r=function(a){var b=a.element;this.listener=a.listener;this.element=b;this.listenerAsNode=[];this.attached=!1;this.handleValueChange=this.handleValueChange.bind(this)};r.prototype.attach=
function(){this.element.listeners||(this.element.listeners=[]);this.element.listeners.push(this);this.listener.onValueChange(this.handleValueChange);this.attached=!0;return this};r.prototype.handleValueChange=function(a){var b=A(a);a=0;b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())c=c.value,this.listenerAsNode[a]?this.listenerAsNode[a]=u(this.listenerAsNode[a],c):this.listenerAsNode.push(this.element.appendChild(c)),a+=1;if(a<this.listenerAsNode.length)for(a=this.listenerAsNode.splice(a-
this.listenerAsNode.length),a=$jscomp.makeIterator(a),c=a.next();!c.done;c=a.next())c.value.remove()};r.prototype.updateElement=function(a){return this.element=a};var x=function(a){return function(b){b||"number"===typeof b||(b="");if(b instanceof k)a.appendChild(b.render()),b.mount();else if(b instanceof f)(new r({listener:b,element:a})).attach();else if(Array.isArray(b))w(a,b);else if("function"===typeof b){var c=document.createElement("div"),e=a.appendChild(c);e.__async=!0;b().then(function(a){"function"===
typeof a.default&&a.default.isComponent&&a.default.isComponent()?x(e)(new a.default):x(e)(a.default);e.__async=!1}).catch(console.warn)}else b instanceof Node?a.appendChild(b):a.appendChild(document.createTextNode(b))}},w=function(a,b){b.forEach(x(a))},B=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];return new (Function.prototype.bind.apply(f,[null].concat([a],$jscomp.arrayFromIterable(c))))},C=function(a,b){var c=document.createDocumentFragment();b="string"===typeof b?
document.getElementById(b):b;var e=a instanceof k||a.render?a.render():a;if(Array.isArray(e))for(var f=0;f<e.length;f++)C(e[f],c);else c.appendChild(e);b.appendChild(c);"function"===typeof a.mount&&a.mount();return e},G=function(){Object.values(e).forEach(function(a){if("function"===typeof a.onMount)a.onMount(a)})},y={version:"0.3.0",activeComponents:e,r:function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if("function"===typeof a&&a.isComponent)return(new a(d)).setProps(b||
{});if("function"===typeof a)return e=b||{},e.children=d,a(e);"string"===typeof a?e="template"!==a?document.createElement(a):document.createDocumentFragment():(console.warn("[Radi.js] Warn: Creating a JSX element whose query is not of type string, automatically converting query to string."),e=document.createElement(a.toString()));null!==b&&z(e,b);w(e,d);return e},listen:B,l:B,component:k,Component:k,action:function(a,b,c){var d=c.value;c.value=function(a){for(var c=[],b=0;b<arguments.length;++b)c[b-
0]=arguments[b];this.setState.call(this,d.call.apply(d,[].concat([this],$jscomp.arrayFromIterable(c))))};return c},headless:function(a,b){b=new b;b.mount();return c["$".concat(a)]=b},mount:C,freeze:function(){},unfreeze:function(){G()},plugin:function(a,c){for(var b=[],e=1;e<arguments.length;++e)b[e-1]=arguments[e];return a.apply(null,[].concat([y],$jscomp.arrayFromIterable(b)))}};window&&(window.$Radi=y);module.exports=y});
