{"version":3,"sources":["node_modules/process/browser.js","node_modules/radi/dist/radi.js","../radi-router/src/index.js","app/helpers/globals.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/bundle-loader.js","app/routes.js","App.radi","index.js","node_modules/@babel/helper-plugin-utils/lib/index.js","node_modules/babel-plugin-transform-radi-listen/src/index.js","app/helpers/radi-compiler-browser.js","app/helpers/search.js","app/helpers/docs-bundle.js","app/helpers/docs.js","Header.radi","DocsLayout.radi"],"names":["global","factory","exports","module","define","amd","GLOBALS","HEADLESS_COMPONENTS","FROZEN_STATE","VERSION","ACTIVE_COMPONENTS","CUSTOM_ATTRIBUTES","flatten","list","reduce","a","b","concat","Array","isArray","generateId","uuid","i","random","Math","toString","PrivateStore","store","prototype","addListener","key","listener","depth","createItemWrapper","listeners","filter","item","attached","push","removeListeners","o","Object","keys","length","value","setState","newState","triggerListeners","clone","sort","map","n","handleUpdate","obj","cloned","hasOwnProperty","skipInProductionAndTest","fn","process","Listener","component","path","assign","slice","processValue","changeListener","addedListeners","init","getValue","state","unlink","Node","deattach","target","source","out","i$1","setPartialState","updateValue","extractListeners","tempListener","newValue","applyDepth","onValueChange","childPath","append","node","to","after","parentNode","insertBefore","appendChild","getLast","child","$redirect","mountChildren","isSvg","children","html","mount","nodeType","$isSvg","$depth","$pointer","textNode","document","createTextNode","JSON","stringify","raw","parent","getElementById","nodes","filterNode","loop","nn","render","rendered","getElementFromQuery","query","createElementNS","createElement","createDocumentFragment","console","warn","explode","next","Structure","v","parseValue","Number","isNaN","setStyles","structure","styles","oldStyles","element","$styleListeners","general","style","toRemove","parseClass","join","setAttributes","propsSource","oldPropsSource","props","oldProps","prop","removeAttribute","test","getAttribute","checked","$attrListeners","toLowerCase","addEventListener","e","ref","allowedTags","indexOf","localName","caller","addToElement","setAttribute","onload","el","setTimeout","focus","innerHTML","substring","data","inputs","elements","input","name","type","default","defaultValue","set","val","reset","defineProperty","Boolean","isComponent","Component","$compChildren","$component","$listener","$destroyed","destroy","childrenToo","l","l$1","i$2","removeChild","max","tempParent","patch","output","Promise","constructor","then","normalisedValue","setProps","rawfirst","rawsecond","first","second","textContent","n1","n2","addNonEnumerableProperties","$id","$name","$config","config","listen","$events","$privateStore","on","when","freeze","setChildren","view","self","substr","trigger","args","call","oldstate","r","src","nomalizedData","transform","catch","error","placerror","placeholder","remountActiveComponents","values","forEach","onMount","createWorker","fire","blob","Blob","url","window","URL","createObjectURL","myWorker","Worker","onmessage","onerror","arg","resolve","reject","err","postMessage","worker","descriptor","act","promisedWorker","action","subscribe","container","eventName","triggerMount","Radi","version","activeComponents","customAttribute","attributeName","headless","comp","mountedComponent","update","unfreeze","plugin","routes","current","COLON","charCodeAt","SLASH","cr","crg","lr","ld","parseRoute","parts","route","split","end","p","RegExp","parseAllRoutes","len","arr","ret","renderError","errors","number","writeUrl","location","hash","guard","before","active","last","deep","_router","extractChildren","extracted","getRoute","curr","cahnged","Route","match","acc","m","cmp","params","RouterHead","activeComponent","onhashchange","hashChange","loc","scrollTo","Link","core","class","id","title","href","$router","cls","Router","extractComponent","RouteComponent","WillRender","redirect","guards","checkGuard","pop","beforeEach","afterEach","write","github","slack","docs","repl","startingCode","bundleURL","getBundleURLCached","getBundleURL","Error","matches","stack","getBaseURL","replace","require","loadBundlesLazy","bundles","code","LazyPromise","loadBundles","all","loadBundle","bundleLoaders","registerBundleLoader","loader","load","register","bundle","lastIndexOf","bundleLoader","resolved","modules","executor","promise","onSuccess","onError","_radi_listen","App","loadJS","scriptTag","onreadystatechange","body","toDestroy","app","hot","accept","dispose","del","replaceChild","cloneNode","FINDTOKENS","definitions","comment","regex","extract","custom","method","matchToo","multiple","savedTokens","template","outside","trim","remapCode","rebuild","parse","cb","saveToken","contents","tokenize","CODE","replaced","splice","offset","find","mod","L","R","indexState","index","diff","endIndex","tokenID","parsed","search","x","y","y2","score","step","strength","introduction","installation","hyperscript","components","actions","events","headlessComponents","page","Header","DocsLayout","searchOverlay","results","onkeydown","keydown","metaKey","ctrlKey","keyCode","preventDefault","openSearch","searchKey","closeSearch","phrase","treshold","res","s","term","text","makeSearch","result","addHighlight"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxLC,WAAUA,MAAV,EAAkBC,OAAlB,EAA2B;AAC1B,SAAOC,OAAP,KAAmB,QAAnB,IAA+B,OAAOC,MAAP,KAAkB,WAAjD,GAA+DF,SAA/D,GACA,OAAOG,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAAvC,GAA6CD,OAAOH,OAAP,CAA7C,GACCA,SAFD;AAGD,CAJA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IJ,SAAJ,EAAe;AACb,WAAK,IAAI9W,IAAI,CAAb,EAAgBA,IAAI8W,UAAUzV,MAA9B,EAAsCrB,GAAtC,EAA2C;AACzC8W,kBAAU9W,CAAV,EAAauK,OAAb;AACD;AACF;AACD,QAAI4M,MAAMhS,SAASM,cAAT,CAAwB,KAAxB,CAAV;AACA0R,QAAIhT,UAAJ,CAAeiT,YAAf,CAA4BD,IAAIE,SAAJ,CAAc,KAAd,CAA5B,EAAkDF,GAAlD;AACD,GATD;AAUD;;AC3CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrQA,IAAMG,aAAa,sCAAnB;;AAEA,IAAMC,cAAc;AAClBC,WAAS;AACPC,WAAO;AADA,GADS;AAIlB1U,SAAO;AACL0U,WAAO,2BADF;AAELC,aAAS,CAAC,CAAC,CAAF,EAAK,GAAL,EAAU,GAAV;AAFJ,GAJW;AAQlBrL,MAAI;AACFoL,WAAO,wBADL;AAEFC,aAAS,CAAC,CAAC,CAAF,EAAK,GAAL,EAAU,GAAV;AAFP,GARc;AAYlB1T,QAAM;AACJ;AACAyT,WAAO,6HAFH;AAGJE,YAAQ;AAAA,aAASpO,MAAM0L,OAAN,CAAc,cAAd,EAA8B,iBAA9B,CAAT;AAAA;AAHJ,GAZY;AAiBlB2C,UAAQ;AACN;AACAH,WAAO,oDAFD;AAGNC,aAAS,CAAC,CAAC,CAAF,EAAK,GAAL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","file":"radi-website.map","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (factory());\n}(this, (function () { 'use strict';\n\n  var GLOBALS = {\n    HEADLESS_COMPONENTS: {},\n    FROZEN_STATE: false,\n    VERSION: '0.3.23',\n    // TODO: Collect active components\n    ACTIVE_COMPONENTS: {},\n    CUSTOM_ATTRIBUTES: {},\n  };\n\n  /**\n   * @param {*[]} list\n   * @returns {*[]}\n   */\n  var flatten = function flatten(list) {\n    return list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n  };\n\n  /**\n   * UUID v4 generator\n   * https://gist.github.com/jcxplorer/823878\n   * @returns {string}\n   */\n  var generateId = () => {\n    var uuid = '';\n    for (var i = 0; i < 32; i++) {\n      var random = (Math.random() * 16) | 0; // eslint-disable-line\n\n      if (i === 8 || i === 12 || i === 16 || i === 20) {\n        uuid += '-';\n      }\n      uuid += (i === 12 ? 4 : i === 16 ? (random & 3) | 8 : random).toString(16); // eslint-disable-line\n    }\n    return uuid;\n  };\n\n  var PrivateStore = function PrivateStore() {\n    this.store = {};\n  };\n\n  /**\n   * @param {string} key\n   * @param {Listener} listener\n   * @param {number} depth\n   */\n  PrivateStore.prototype.addListener = function addListener (key, listener, depth) {\n    if (typeof this.store[key] === 'undefined') {\n      this.createItemWrapper(key);\n    }\n    this.store[key].listeners[depth] = (this.store[key].listeners[depth] || []).filter(item => (\n      item.attached\n    ));\n    this.store[key].listeners[depth].push(listener);\n\n    return listener;\n  };\n\n  /**\n   * Removes all listeners for all keys\n   */\n  PrivateStore.prototype.removeListeners = function removeListeners () {\n    var o = Object.keys(this.store);\n    for (var i = 0; i < o.length; i++) {\n      this.store[o[i]].listeners = {};\n      this.store[o[i]].value = null;\n    }\n  };\n\n  /**\n   * setState\n   * @param {*} newState\n   * @returns {*}\n   */\n  PrivateStore.prototype.setState = function setState (newState) {\n    // Find and trigger changes for listeners\n    for (var key of Object.keys(newState)) {\n      if (typeof this.store[key] === 'undefined') {\n        this.createItemWrapper(key);\n      }\n      this.store[key].value = newState[key];\n\n      this.triggerListeners(key);\n    }\n    return newState;\n  };\n\n  /**\n   * createItemWrapper\n   * @private\n   * @param {string} key\n   * @returns {object}\n   */\n  PrivateStore.prototype.createItemWrapper = function createItemWrapper (key) {\n    return this.store[key] = {\n      listeners: {},\n      value: null,\n    };\n  };\n\n  /**\n   * triggerListeners\n   * @private\n   * @param {string} key\n   */\n  PrivateStore.prototype.triggerListeners = function triggerListeners (key) {\n    var item = this.store[key];\n    if (item) {\n      var clone = Object.keys(item.listeners)\n        .sort()\n        .map(key => (\n          item.listeners[key].map(listener => listener)\n        ));\n\n      for (var i = 0; i < clone.length; i++) {\n        for (var n = clone[i].length - 1; n >= 0; n--) {\n          if (clone[i][n].attached) { clone[i][n].handleUpdate(item.value); }\n        }\n      }\n    }\n  };\n\n  /**\n   * @param {*} obj\n   * @returns {*}\n   */\n  var clone = obj => {\n    if (typeof obj !== 'object') { return obj; }\n    if (obj === null) { return obj; }\n    if (Array.isArray(obj)) { return obj.map(clone); }\n\n    /*eslint-disable*/\n    // Reverted as currently throws some errors\n    var cloned = {};\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        cloned[key] = clone(obj[key]);\n      }\n    }\n    /* eslint-enable */\n\n    return cloned;\n  };\n\n  var skipInProductionAndTest = fn => {\n    if (typeof process === 'undefined'\n      || (process.env.NODE_ENV === 'production'\n      || process.env.NODE_ENV === 'test')) {\n      return false;\n    }\n    return fn && fn();\n  };\n\n  /* eslint-disable no-param-reassign */\n  /* eslint-disable no-shadow */\n  /* eslint-disable guard-for-in */\n  /* eslint-disable no-restricted-syntax */\n  // import fuseDom from '../r/utils/fuseDom';\n\n  var Listener = function Listener(component, ...path) {\n    var assign;\n\n    this.component = component;\n    (assign = path, this.key = assign[0]);\n    this.path = path.slice(1, path.length);\n    this.depth = 0;\n    this.attached = true;\n    this.processValue = value => value;\n    this.changeListener = () => {};\n    this.addedListeners = [];\n  };\n\n  /**\n   * Applies values and events to listener\n   */\n  Listener.prototype.init = function init () {\n    this.value = this.getValue(this.component.state[this.key]);\n    this.component.addListener(this.key, this, this.depth);\n    this.handleUpdate(this.component.state[this.key]);\n    return this;\n  };\n\n  /**\n   * Removes last active value with destroying listeners and\n   * @param {*} value\n   */\n  Listener.prototype.unlink = function unlink () {\n    if (this.value instanceof Node) {\n      // Destroy this Node\n      // fuseDom.destroy(this.value);\n    } else\n    if (this.value instanceof Listener) {\n      // Deattach this Listener\n      this.value.deattach();\n    }\n  };\n\n\n  Listener.prototype.clone = function clone (target, source) {\n    var out = {};\n\n    for (var i in target) {\n      out[i] = target[i];\n    }\n    for (var i$1 in source) {\n      out[i$1] = source[i$1];\n    }\n\n    return out;\n  };\n\n  Listener.prototype.setPartialState = function setPartialState (path, value, source) {\n    var target = {};\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? this.setPartialState(path.slice(1), value, source[path[0]])\n          : value;\n      return this.clone(source, target);\n    }\n    return value;\n  };\n\n  /**\n   * Updates state value\n   * @param {*} value\n   */\n  Listener.prototype.updateValue = function updateValue (value) {\n    var source = this.component.state[this.key];\n    return this.component.setState({\n      [this.key]: this.setPartialState(this.path, value, source),\n    });\n  };\n\n  Listener.prototype.extractListeners = function extractListeners (value) {\n    // if (this.value instanceof Listener && value instanceof Listener) {\n    // console.log('middle')\n    // } else\n    if (value instanceof Listener) {\n      // if (this.value instanceof Listener) {\n      // this.value.processValue = value.processValue;\n      // // this.value = value;\n      // this.handleUpdate(value.getValue(value.component.state[value.key]));\n      // console.log(value, value.getValue(value.component.state[value.key]));\n      // value.deattach();\n      // }\n      // value.component.addListener(value.key, value, value.depth);\n      // value.handleUpdate = () => {\n      // console.log('inner handler')\n      // }\n      var tempListener = {\n        depth: value.depth,\n        attached: true,\n        processValue: value => value,\n        handleUpdate: () => {\n          if (this.component) {\n            this.handleUpdate(this.getValue(this.component.state[this.key]));\n          }\n          tempListener.attached = false;\n        },\n        changeListener: () => {},\n      };\n      this.addedListeners.push(tempListener);\n      value.component.addListener(value.key, tempListener, value.depth);\n      // value.init()\n      // value.handleUpdate = () => {\n      // console.log('inner handler')\n      // }\n      // value.onValueChange((v) => {\n      // this.handleUpdate(this.getValue(this.component.state[this.key]));\n      // console.log('me got changed', v)\n      // });\n      var newValue = value.processValue(\n        value.getValue(value.component.state[value.key])\n      );\n      value.deattach();\n      return this.extractListeners(newValue);\n    }\n    return value;\n\n    // return this.processValue(this.getValue(value));\n  };\n\n  /**\n   * @param {*} value\n   */\n  Listener.prototype.handleUpdate = function handleUpdate (value) {\n    var newValue = this.processValue(this.getValue(value));\n    // if (this.value instanceof Listener && newValue instanceof Listener) {\n    // this.value.processValue = newValue.processValue;\n    // // this.value = newValue;\n    // this.value.handleUpdate(newValue.component.state[newValue.key]);\n    // console.log(newValue, newValue.getValue(newValue.component.state[newValue.key]));\n    // newValue.deattach();\n    // } else\n    if (newValue instanceof Listener) {\n      // if (this.value instanceof Listener) {\n      // this.value.processValue = newValue.processValue;\n      // // this.value = newValue;\n      // this.value.handleUpdate(newValue.component.state[newValue.key]);\n      // console.log(newValue, newValue.getValue(newValue.component.state[newValue.key]));\n      // newValue.deattach();\n      // } else {\n      for (var i = 0; i < this.addedListeners.length; i++) {\n        this.addedListeners[i].attached = false;\n      }\n      this.addedListeners = [];\n      this.value = this.extractListeners(newValue);\n      this.changeListener(this.value);\n      // }\n      // // console.log(this.value.processValue('P'), newValue.processValue('A'));\n      // // console.log(this.extractListeners(newValue));\n      // // newValue.handleUpdate(newValue.component.state[newValue.key]);\n      // // this.value = newValue;\n      // // this.value.processValue = newValue.processValue;\n      // this.value = this.extractListeners(newValue);\n      // this.changeListener(this.value);\n      // // this.value.processValue = newValue.processValue;\n      // // // this.value = newValue;\n      // // this.value.handleUpdate(newValue.component.state[newValue.key]);\n      // // console.log(newValue, newValue.getValue(newValue.component.state[newValue.key]));\n      // // newValue.deattach();\n    } else {\n      this.unlink();\n      this.value = newValue;\n      this.changeListener(this.value);\n    }\n  };\n\n  /**\n   * @param {*} source\n   * @returns {*}\n   */\n  Listener.prototype.getValue = function getValue (source) {\n    var i = 0;\n    while (i < this.path.length) {\n      if (source === null\n        || (!source[this.path[i]]\n        && typeof source[this.path[i]] !== 'number')) {\n        source = null;\n      } else {\n        source = source[this.path[i]];\n      }\n      i += 1;\n    }\n    return source;\n  };\n\n  /**\n   * @param {number} depth\n   * @returns {Listener}\n   */\n  Listener.prototype.applyDepth = function applyDepth (depth) {\n    this.depth = depth;\n    return this;\n  };\n\n  /**\n   * @param {function(*)} changeListener\n   */\n  Listener.prototype.onValueChange = function onValueChange (changeListener) {\n    this.changeListener = changeListener;\n    this.changeListener(this.value);\n  };\n\n  /**\n   * @param {function(*): *} processValue\n   * @returns {function(*): *}\n   */\n  Listener.prototype.process = function process (processValue) {\n    this.processValue = processValue;\n    return this;\n  };\n\n  Listener.prototype.deattach = function deattach () {\n    this.component = null;\n    this.attached = false;\n    this.key = null;\n    this.childPath = null;\n    this.path = null;\n    this.unlink();\n    this.value = null;\n    this.changeListener = () => {};\n    this.processValue = () => {};\n  };\n\n  /**\n   * Append dom node to dom tree (after - (true) should append after 'to' element\n   * or (false) inside it)\n   * @param {HTMLElement} node\n   * @param {HTMLElement} to\n   * @param {Boolean} after\n   * @returns {HTMLElement}\n   */\n  var append = (node, to, after) => {\n    if (after && to) {\n      if (to.parentNode) {\n        to.parentNode.insertBefore(node, to);\n        // if (!to.nextSibling) {\n        //   to.parentNode.appendChild(node);\n        // } else {\n        //   to.parentNode.insertBefore(node, to.nextSibling || to);\n        // }\n      }\n      return node;\n    }\n\n    return to.appendChild(node);\n  };\n\n  var getLast = (child) => {\n    if (child.$redirect && child.$redirect[child.$redirect.length - 1]) {\n      return getLast(child.$redirect[child.$redirect.length - 1]);\n    }\n\n    // if (child.children && child.children.length > 0) {\n    //   return child.children;\n    // }\n\n    return child;\n  };\n\n  /**\n   * @param {Structure} child\n   */\n  var mountChildren = (child, isSvg, depth) => {\n    if ( depth === void 0 ) depth = 0;\n\n    if (!child) { return; }\n\n    if (child.$redirect && child.$redirect.length > 0) {\n      mountChildren(getLast(child), isSvg, depth + 1);\n    } else if (child.children && child.children.length > 0) {\n      if (child.html && child.html.length === 1) {\n        mount(child.children,\n          child.html[0],\n          child.html[0].nodeType !== 1,\n          child.$isSvg,\n          child.$depth);\n      } else {\n        mount(child.children,\n          child.$pointer,\n          true,\n          child.$isSvg,\n          child.$depth);\n      }\n    }\n  };\n\n  /**\n   * @param {string} value\n   * @returns {HTMLElement}\n   */\n  var textNode = value => (\n    document.createTextNode(\n      (typeof value === 'object'\n      ? JSON.stringify(value)\n      : value)\n    )\n  );\n\n  // import Component from './component/Component';\n\n  /**\n   * Appends structure[] to dom node\n   * @param {*} component\n   * @param {string} id\n   * @param {boolean} isSvg\n   * @param {number} depth\n   * @returns {HTMLElement|Node}\n   */\n  var mount = (raw, parent, after, isSvg, depth) => {\n    if ( after === void 0 ) after = false;\n    if ( isSvg === void 0 ) isSvg = false;\n    if ( depth === void 0 ) depth = 0;\n\n    parent = typeof parent === 'string' ? document.getElementById(parent) : parent;\n    var nodes = flatten([raw]).map(filterNode);\n\n    // console.log(1, 'MOUNT')\n\n    var loop = function ( i ) {\n      var nn = nodes[i];\n\n      // console.log(2, nodes[i])\n      if (nn instanceof Node) {\n        append(nn, parent, after);\n      } else\n      if (nn && typeof nn.render === 'function') {\n        // nn.$pointer = text('[pointer]');\n        nn.$pointer = textNode('');\n        append(nn.$pointer, parent, after);\n\n        nodes[i].render(rendered => {\n          // console.log(3, rendered)\n\n          // Abort! Pointer was destroyed\n          if (nn.$pointer === false) { return false; }\n\n          for (var n = 0; n < rendered.length; n++) {\n            if (nn.$pointer) {\n              append(rendered[n], nn.$pointer, true);\n            } else {\n              append(rendered[n], parent, after);\n            }\n          }\n\n          mountChildren(nn, nn.$isSvg, depth + 1);\n        }, nn, depth, isSvg);\n      }\n\n      // if (!nn.html) {\n      //   nn.$pointer = text('[pointer]');\n      //   append(nn.$pointer, parent, after);\n      // }\n    };\n\n    for (var i = 0; i < nodes.length; i++) loop( i );\n\n    return nodes;\n  };\n\n  /**\n   * @param {*} query\n   * @returns {Node}\n   */\n  var getElementFromQuery = (query, isSvg) => {\n    if (typeof query === 'string' || typeof query === 'number')\n      { return query !== 'template'\n        ? isSvg || query === 'svg'\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              query\n            )\n          : document.createElement(query)\n        : document.createDocumentFragment(); }\n    console.warn(\n      '[Radi.js] Warn: Creating a JSX element whose query is not of type string, automatically converting query to string.'\n    );\n    return document.createElement(query.toString());\n  };\n\n  /**\n   * @param {*[]} raw\n   * @param {HTMLElement} parent\n   * @param {string} raw\n   * @returns {HTMLElement}\n   */\n  var explode = (raw, parent, next, depth, isSvg) => {\n    if ( depth === void 0 ) depth = 0;\n\n    var nodes = flatten([raw]).map(filterNode);\n    // console.log('EXPLODE', nodes)\n\n    // console.log('explode', {parent, nodes})\n\n    for (var i = 0; i < nodes.length; i++) {\n      if (nodes[i] instanceof Structure && !nodes[i].html) {\n        // let pp = depth === 0 ? parent : nodes[i];\n        // let pp = parent;\n        // console.log('EXPLODE 1', parent.$depth, depth, parent.$redirect, nodes[i].$redirect)\n        if (parent.children.length <= 0) {\n          if (!parent.$redirect) {\n            parent.$redirect = [nodes[i]];\n          } else {\n            parent.$redirect.push(nodes[i]);\n          }\n        }\n\n        if (!parent.$redirect && nodes[i].children) {\n          parent.children = parent.children.concat(nodes[i].children);\n        }\n\n        if (typeof nodes[i].render === 'function') {\n          nodes[i].render(v => {\n            // if (parent.children.length <= 0) {\n            //   if (!parent.$redirect) {\n            //     parent.$redirect = [nodes[n]];\n            //   } else {\n            //     parent.$redirect.push(nodes[n]);\n            //   }\n            // }\n            // console.log('EXPLODE 2', nodes[n], v, parent.$depth, nodes[n].$depth)\n            next(v);\n            // nodes[n].mount();\n          }, nodes[i], depth + 1, isSvg);\n        }\n      }\n    }\n\n    return;\n  };\n\n  /**\n   * @param {*} value\n   * @return {*}\n   */\n  var parseValue = value =>\n    typeof value === 'number' && !Number.isNaN(value) ? `${value}px` : value;\n\n  /* eslint-disable no-continue */\n\n  /**\n   * @param {Structure} structure\n   * @param {object} styles\n   * @param {object} oldStyles\n   * @returns {object}\n   */\n  var setStyles = (structure, styles, oldStyles) => {\n    if ( styles === void 0 ) styles = {};\n    if ( oldStyles === void 0 ) oldStyles = {};\n\n    if (!structure.html || !structure.html[0]) { return styles; }\n    var element = structure.html[0];\n\n    // Handle Listeners\n    if (styles instanceof Listener) {\n      if (typeof structure.$styleListeners.general !== 'undefined') {\n        return element.style;\n      }\n      structure.$styleListeners.general = styles;\n      structure.$styleListeners.general.applyDepth(structure.depth).init();\n\n      structure.$styleListeners.general.onValueChange(value => {\n        setStyles(structure, value, {});\n      });\n\n      return element.style;\n    }\n\n    if (typeof styles === 'string') {\n      element.style = styles;\n      return element.style;\n    }\n\n    var toRemove = Object.keys(oldStyles)\n      .filter(key => typeof styles[key] === 'undefined');\n\n    var loop = function ( style ) {\n      if (styles.hasOwnProperty(style)) {\n        // Skip if styles are the same\n        if (typeof oldStyles !== 'undefined' && oldStyles[style] === styles[style]) { return; }\n\n        // Need to remove falsy style\n        if (!styles[style] && typeof styles[style] !== 'number') {\n          element.style[style] = null;\n          return;\n        }\n\n        // Handle Listeners\n        if (styles[style] instanceof Listener) {\n          if (typeof structure.$styleListeners[style] !== 'undefined') { return; }\n          structure.$styleListeners[style] = styles[style];\n          structure.$styleListeners[style].applyDepth(structure.depth).init();\n\n          structure.$styleListeners[style].onValueChange(value => {\n            setStyles(structure, {\n              [style]: value,\n            }, {});\n          });\n\n          styles[style] = structure.$styleListeners[style].value;\n          return;\n        }\n\n        element.style[style] = parseValue(styles[style]);\n      }\n    };\n\n    for (var style in styles) loop( style );\n\n    for (var i = 0; i < toRemove.length; i++) {\n      element.style[toRemove[i]] = null;\n    }\n\n    return element.style;\n  };\n\n  /**\n   * @param {*} value\n   * @return {*}\n   */\n  var parseClass = value => {\n    if (Array.isArray(value)) {\n      return value.filter(item => item).join(' ')\n    }\n    return value;\n  };\n\n  /* eslint-disable no-continue */\n  // import AttributeListener from './utils/AttributeListener';\n\n  /**\n   * @param {Structure} structure\n   * @param {object} propsSource\n   * @param {object} oldPropsSource\n   */\n  var setAttributes = (structure, propsSource, oldPropsSource) => {\n    if ( propsSource === void 0 ) propsSource = {};\n    if ( oldPropsSource === void 0 ) oldPropsSource = {};\n\n    var props = propsSource || {};\n    var oldProps = oldPropsSource || {};\n\n    if (!structure.html || !structure.html[0]) { return structure; }\n    var element = structure.html[0];\n\n    if (!(element instanceof Node && element.nodeType !== 3)) { return structure; }\n\n    var toRemove = Object.keys(oldProps)\n      .filter(key => typeof props[key] === 'undefined');\n\n    var loop = function ( prop ) {\n      if (props.hasOwnProperty(prop)) {\n        // Skip if proprs are the same\n        if (typeof oldProps !== 'undefined' && oldProps[prop] === props[prop]) { return; }\n\n        // Need to remove falsy attribute\n        if (!props[prop] && typeof props[prop] !== 'number') {\n          element.removeAttribute(prop);\n          return;\n        }\n\n        if ((prop === 'value' || prop === 'model') && !(props[prop] instanceof Listener)) {\n          if (/(checkbox|radio)/.test(element.getAttribute('type'))) {\n            element.checked = props[prop];\n          } else {\n            element.value = props[prop];\n          }\n        }\n\n        // Handle Listeners\n        if (props[prop] instanceof Listener) {\n          if (typeof structure.$attrListeners[prop] !== 'undefined') { return; }\n          structure.$attrListeners[prop] = props[prop];\n          props[prop].applyDepth(structure.depth).init();\n\n          if (prop.toLowerCase() === 'model') {\n            if (/(checkbox|radio)/.test(element.getAttribute('type'))) {\n              element.addEventListener('change', (e) => {\n                structure.$attrListeners[prop].updateValue(e.target.checked);\n              });\n            } else {\n              element.addEventListener('input', (e) => {\n                structure.$attrListeners[prop].updateValue(e.target.value);\n              });\n            }\n          }\n\n          structure.$attrListeners[prop].onValueChange(value => {\n            setAttributes(structure, {\n              [prop]: value,\n            }, {});\n            // props[prop] = value;\n          });\n\n          // structure.setProps(Object.assign(structure.data.props, {\n          //   [prop]: props[prop].value,\n          // }));\n          props[prop] = structure.$attrListeners[prop].value;\n          return;\n        }\n\n        if (typeof GLOBALS.CUSTOM_ATTRIBUTES[prop] !== 'undefined') {\n          var ref = GLOBALS.CUSTOM_ATTRIBUTES[prop];\n          var allowedTags = ref.allowedTags;\n\n          if (!allowedTags || (\n            allowedTags\n              && allowedTags.length > 0\n              && allowedTags.indexOf(element.localName) >= 0\n          )) {\n            if (typeof GLOBALS.CUSTOM_ATTRIBUTES[prop].caller === 'function') {\n              GLOBALS.CUSTOM_ATTRIBUTES[prop].caller(element, props[prop]);\n            }\n            if (!GLOBALS.CUSTOM_ATTRIBUTES[prop].addToElement) { return; }\n          }\n        }\n\n\n        if (prop.toLowerCase() === 'style') {\n          if (typeof props[prop] === 'object') {\n            setStyles(structure, props[prop], (oldProps && oldProps.style) || {});\n            // props[prop] = structure.setStyles(props[prop], (oldProps && oldProps.style) || {});\n          } else {\n            element.style = props[prop];\n          }\n          return;\n        }\n\n        if (prop.toLowerCase() === 'class' || prop.toLowerCase() === 'classname') {\n          element.setAttribute('class', parseClass(props[prop]));\n          return;\n        }\n\n        if (prop.toLowerCase() === 'loadfocus') {\n          element.onload = (el) => {\n            setTimeout(() => {\n              el.focus();\n            }, 10);\n          };\n          return;\n        }\n\n        if (prop.toLowerCase() === 'html') {\n          element.innerHTML = props[prop];\n          return;\n        }\n\n        // Handles events 'on<event>'\n        if (prop.substring(0, 2).toLowerCase() === 'on' && typeof props[prop] === 'function') {\n          var fn = props[prop];\n          if (prop.substring(0, 8).toLowerCase() === 'onsubmit') {\n            element[prop] = (e) => {\n              var data = [];\n              var inputs = e.target.elements || [];\n              for (var input of inputs) {\n                if ((input.name !== ''\n                  && (input.type !== 'radio' && input.type !== 'checkbox'))\n                  || input.checked) {\n                  var item = {\n                    name: input.name,\n                    el: input,\n                    type: input.type,\n                    default: input.defaultValue,\n                    value: input.value,\n                    set(val) {\n                      structure.el.value = val;\n                    },\n                    reset(val) {\n                      structure.el.value = val;\n                      structure.el.defaultValue = val;\n                    },\n                  };\n                  data.push(item);\n                  if (!data[item.name]) {\n                    Object.defineProperty(data, item.name, {\n                      value: item,\n                    });\n                  }\n                }\n              }\n\n              return fn(e, data);\n            };\n          } else {\n            element[prop] = e => fn(e);\n          }\n          return;\n        }\n\n        element.setAttribute(prop, props[prop]);\n      }\n    };\n\n    for (var prop in props) loop( prop );\n\n    for (var i = 0; i < toRemove.length; i++) {\n      element.removeAttribute(toRemove[i]);\n    }\n\n    structure.props = props;\n\n    return structure;\n  };\n\n  /* eslint-disable no-restricted-syntax */\n\n  /**\n   * @param {*} query\n   * @param {object} props\n   * @param {...*} children\n   * @param {number} depth\n   */\n  var Structure = function Structure(query, props, children, depth) {\n    if ( props === void 0 ) props = {};\n    if ( depth === void 0 ) depth = 0;\n\n    // console.log('H', query, children)\n    this.query = query;\n    this.props = Boolean !== props ? props : {};\n    if (isComponent(query) || query instanceof Component) {\n      this.$compChildren = flatten(children || []).map(filterNode);\n      this.children = [];\n    } else {\n      this.children = flatten(children || []).map(filterNode);\n      this.$compChildren = [];\n    }\n    this.html = null;\n    this.$attrListeners = [];\n    this.$styleListeners = [];\n    this.$pointer = null;\n    this.$component = null;\n    this.$listener = null;\n    this.$redirect = null;\n    this.$destroyed = false;\n    this.$isSvg = query === 'svg';\n    this.$depth = depth;\n  };\n\n  Structure.prototype.mount = function mount () {\n    this.$destroyed = false;\n    // console.warn('[mounted]', this)\n\n    if (this.$component instanceof Component) {\n      this.$component.mount();\n    }\n  };\n\n  Structure.prototype.destroy = function destroy (childrenToo) {\n      if ( childrenToo === void 0 ) childrenToo = true;\n\n    if (this.$destroyed) { return false; }\n    // console.warn('[destroyed]', this, this.html, this.$redirect)\n\n    for (var l in this.$styleListeners) {\n      if (this.$styleListeners[l]\n        && typeof this.$styleListeners[l].deattach === 'function') {\n        this.$styleListeners[l].deattach();\n      }\n    }\n\n    for (var l$1 in this.$attrListeners) {\n      if (this.$attrListeners[l$1]\n        && typeof this.$attrListeners[l$1].deattach === 'function') {\n        this.$attrListeners[l$1].deattach();\n      }\n    }\n\n    if (this.$redirect) {\n      for (var i = 0; i < this.$redirect.length; i++) {\n        if (typeof this.$redirect[i].destroy === 'function') {\n          this.$redirect[i].destroy();\n        }\n      }\n    }\n\n    if (childrenToo && this.children) {\n      for (var i$1 = 0; i$1 < this.children.length; i$1++) {\n        if (typeof this.children[i$1].destroy === 'function') {\n          this.children[i$1].destroy();\n        }\n      }\n    }\n\n    if (this.html) {\n      for (var i$2 = 0; i$2 < this.html.length; i$2++) {\n        if (this.html[i$2].parentNode) {\n          this.html[i$2].parentNode.removeChild(this.html[i$2]);\n        }\n      }\n    }\n\n    if (this.$component instanceof Component) {\n      this.$component.destroy();\n    }\n\n    if (this.$listener instanceof Listener) {\n      this.$listener.deattach();\n    }\n\n    if (this.$pointer && this.$pointer.parentNode) {\n      this.$pointer.parentNode.removeChild(this.$pointer);\n    }\n    this.$pointer = null;\n    this.$redirect = null;\n    this.$component = null;\n    this.render = () => {};\n    this.html = null;\n    this.$destroyed = true;\n    return true;\n  };\n\n  Structure.prototype.render = function render (next, parent, depth, isSvg) {\n      if ( depth === void 0 ) depth = 0;\n      if ( isSvg === void 0 ) isSvg = false;\n\n    // console.log('RENDER', isSvg, parent, parent && parent.$isSvg)\n    this.$depth = Math.max(this.$depth, depth);\n    this.$isSvg = isSvg || (parent && parent.$isSvg) || this.query === 'svg';\n\n    if (this.query === '#text') {\n      this.html = [textNode(this.props)];\n      return next(this.html);\n    }\n\n    if (typeof this.query === 'string' || typeof this.query === 'number') {\n      this.html = [getElementFromQuery(this.query, this.$isSvg)];\n\n      setAttributes(this, this.props, {});\n\n      return next(this.html);\n    }\n\n    if (this.query instanceof Listener) {\n      if (!this.$listener) {\n        this.$listener = this.query.applyDepth(this.$depth).init();\n        this.mount();\n      }\n      return this.query.onValueChange(v => {\n        if (this.html) {\n          var tempParent = this.html[0];\n\n          if (this.$pointer) {\n            this.$redirect = patch(this.$redirect, v, this.$pointer,\n              true, this.$isSvg, this.$depth + 1);\n          } else {\n            this.$redirect = patch(this.$redirect, v, tempParent,\n              true, this.$isSvg, this.$depth + 1);\n          }\n\n          // let a = {\n          // $redirect: [],\n          // children: [],\n          // };\n          //\n          // explode(v, a, output => {\n          // // this.html = output;\n          // if (this.$pointer) {\n          //   this.$redirect = patch(this.$redirect, a.$redirect,\n          // this.$pointer, true, this.$isSvg, this.$depth + 1);\n          // } else {\n          //   this.$redirect = patch(this.$redirect, a.$redirect,\n          // tempParent, true, this.$isSvg, this.$depth + 1);\n          // }\n          // // next(output);\n          // }, this.$depth + 1, this.$isSvg);\n        } else {\n          explode(v, parent || this, output => {\n            // console.warn('change HTML', this.html)\n            this.html = output;\n            next(output);\n          }, this.$depth + 1, this.$isSvg);\n        }\n      });\n    }\n\n    if (this.query instanceof Promise\n      || this.query.constructor.name === 'LazyPromise') {\n      return this.query.then(v => {\n        var normalisedValue = v.default || v;\n        explode(normalisedValue, parent || this, output => {\n          this.html = output;\n          next(output);\n        }, this.$depth, this.$isSvg);\n      });\n    }\n\n    if (this.query instanceof Component\n      && typeof this.query.render === 'function') {\n      this.$component = this.query;\n      return explode(this.$component.render(), parent || this, v => {\n        this.html = v;\n        next(v);\n        this.mount();\n      }, this.$depth, this.$isSvg);\n    }\n\n    if (isComponent(this.query)) {\n      if (!this.$component) {\n        this.$component =\n          new this.query(this.$compChildren).setProps(this.props); // eslint-disable-line\n      }\n      if (typeof this.$component.render === 'function') {\n        explode(this.$component.render(), parent || this, v => {\n          this.html = v;\n          next(v);\n        }, this.$depth, this.$isSvg);\n        this.mount();\n      }\n      return null;\n    }\n\n    if (typeof this.query === 'function') {\n      return explode(this.query(this.props), parent || this, v => {\n        this.html = v;\n        next(v);\n      }, this.$depth, this.$isSvg);\n    }\n\n    return next(textNode(this.query));\n  };\n\n  /* eslint-disable no-restricted-syntax */\n\n  // const hasRedirect = item => (\n  //   item && item.$redirect\n  // );\n\n  var patch = (rawfirst, rawsecond, parent,\n    after, isSvg, depth) => {\n    if ( after === void 0 ) after = false;\n    if ( isSvg === void 0 ) isSvg = false;\n    if ( depth === void 0 ) depth = 0;\n\n    var first = flatten([rawfirst]);\n    var second = flatten([rawsecond]).map(filterNode);\n\n    var length = Math.max(first.length, second.length);\n\n    var loop = function ( i ) {\n      // debugger\n      // const nn = i;\n      // first[i] = first[i].$redirect || first[i];\n      if (typeof first[i] === 'undefined') {\n        // mount\n        mount(second[i], parent, after, isSvg, depth);\n        return;\n      }\n\n      if (typeof second[i] === 'undefined') {\n        // remove\n        if (typeof first[i].destroy === 'function') {\n          first[i].destroy();\n        }\n        return;\n      }\n\n      second[i].$depth = depth;\n\n      if (first[i] instanceof Structure\n        && second[i] instanceof Structure\n        && first[i] !== second[i]) {\n        // if (second[i].$redirect2) {\n        //   second[i] = patch(\n        //     // first[i].$redirect || first[i],\n        //     hasRedirect(first[i]) || first[i],\n        //     second[i].$redirect[second[i].$redirect.length - 1] || second[i],\n        //     parent,\n        //     after,\n        //     isSvg,\n        //     depth\n        //   );\n        //   continue;\n        // }\n\n        if (first[i].html\n          && first[i].query === '#text'\n          && second[i].query === '#text') {\n          for (var n = 0; n < first[i].html.length; n++) {\n            if (first[i].props !== second[i].props) {\n              first[i].html[n].textContent = first[i].props = second[i].props;\n            }\n          }\n\n          second[i].html = first[i].html;\n          first[i].html = null;\n\n          if (first[i].$pointer) {\n            if (second[i].$pointer && second[i].$pointer.parentNode) {\n              second[i].$pointer.parentNode.removeChild(second[i].$pointer);\n            }\n            second[i].$pointer = first[i].$pointer;\n            first[i].$pointer = null;\n          }\n\n          first[i].destroy();\n          return;\n        }\n\n\n        if (first[i].html\n          && typeof first[i].query === 'string'\n          && typeof second[i].query === 'string'\n          && first[i].query === second[i].query) {\n          // for (var n = 0; n < first[i].html.length; n++) {\n          //   if (first[i].props !== second[i].props) {\n          //     // first[i].html[n].textContent = second[i].props;\n          //   }\n          // }\n\n          second[i].html = first[i].html;\n          first[i].html = null;\n\n          if (first[i].$pointer) {\n            if (second[i].$pointer && second[i].$pointer.parentNode) {\n              second[i].$pointer.parentNode.removeChild(second[i].$pointer);\n            }\n            second[i].$pointer = first[i].$pointer;\n            first[i].$pointer = null;\n          }\n\n          setAttributes(second[i], second[i].props, first[i].props);\n          // mountChildren(second[i], second[i].$isSvg, second[i].$depth + 1);\n\n          if (second[i].html[0]\n              && second[i].children\n              && second[i].children.length > 0) {\n            second[i].children = patch(first[i].children,\n              second[i].children,\n              second[i].html[0],\n              false,\n              second[i].$isSvg,\n              second[i].$depth + 1);\n          }\n          first[i].destroy(false);\n\n          return;\n        }\n\n        // maybe merge\n        var n1 = first[i];\n        var n2 = second[i];\n\n        // n2.$pointer = textNode('[pointer2]');\n        n2.$pointer = textNode('');\n        append(n2.$pointer, parent, after);\n\n        n2.render(rendered => {\n          if (n1.$pointer) {\n            if (n2.$pointer && n2.$pointer.parentNode) {\n              n2.$pointer.parentNode.removeChild(n2.$pointer);\n            }\n            n2.$pointer = n1.$pointer;\n            n1.$pointer = null;\n          }\n\n          for (var n = 0; n < rendered.length; n++) {\n            if ((n1.html && !n1.html[i]) || !n1.html) {\n              append(rendered[n], n2.$pointer, true);\n            } else {\n              append(rendered[n], n1.html[i], true);\n            }\n          }\n\n          mountChildren(n2, isSvg, depth + 1);\n\n          n1.destroy(false);\n        }, n2, depth, isSvg);\n      }\n    };\n\n    for (var i = 0; i < length; i++) loop( i );\n\n    return second;\n  };\n\n  /* eslint-disable guard-for-in */\n\n  var Component = function Component(children, props) {\n    this.addNonEnumerableProperties({\n      $id: generateId(),\n      $name: this.constructor.name,\n      $config: (typeof this.config === 'function') ? this.config() : {\n        listen: true,\n      },\n      $events: {},\n      $privateStore: new PrivateStore(),\n    });\n\n    this.on = (typeof this.on === 'function') ? this.on() : {};\n    this.children = [];\n\n    // Links headless components\n    for (var key in GLOBALS.HEADLESS_COMPONENTS) {\n      this[key].when('update', () => this.setState());\n    }\n\n    this.state = typeof this.state === 'function'\n      ? this.state()\n      : (this.state || {});\n\n    skipInProductionAndTest(() => Object.freeze(this.state));\n\n    if (children) { this.setChildren(children); }\n    if (props) { this.setProps(props); }\n  };\n\n  /**\n   * @returns {HTMLElement}\n   */\n  Component.prototype.render = function render () {\n    if (typeof this.view !== 'function') { return null; }\n    return this.html = this.view();\n  };\n\n  /**\n   * @param {object} props\n   * @returns {Component}\n   */\n  Component.prototype.setProps = function setProps (props) {\n    var newState = {};\n    var self = this;\n    var loop = function ( key ) {\n      if (typeof props[key] === 'function' && key.substr(0, 2) === 'on') {\n        self.when(key.substring(2, key.length), props[key]);\n      } else\n      if (props[key] instanceof Listener) {\n        newState[key] = props[key].init().value;\n        props[key].changeListener = value => {\n          self.setState({\n            [key]: value,\n          });\n        };\n      } else {\n        newState[key] = props[key];\n      }\n    };\n\n      for (var key in props) loop( key );\n    this.setState(newState);\n    return this;\n  };\n\n  /**\n   * @param {Node[]|*[]} children\n   */\n  Component.prototype.setChildren = function setChildren (children) {\n    this.children = children;\n    this.setState();\n    for (var i = 0; i < this.children.length; i++) {\n      if (typeof this.children[i].when === 'function') {\n        this.children[i].when('update', () => this.setState());\n      }\n    }\n    return this;\n  };\n\n  /**\n   * @private\n   * @param {object} obj\n   */\n  Component.prototype.addNonEnumerableProperties = function addNonEnumerableProperties (obj) {\n    for (var key in obj) {\n      if (typeof this[key] !== 'undefined') { continue; }\n      Object.defineProperty(this, key, {\n        value: obj[key],\n      });\n    }\n  };\n\n  /**\n   * @param {string} key\n   * @param {Listener} listener\n   * @param {number} depth\n   */\n  Component.prototype.addListener = function addListener (key, listener, depth) {\n    this.$privateStore.addListener(key, listener, depth);\n  };\n\n  Component.prototype.mount = function mount () {\n    this.trigger('mount');\n  };\n\n  Component.prototype.destroy = function destroy () {\n    // if (this.html) {\n    // for (var i = 0; i < this.html.length; i++) {\n    //   if (this.html[i].parentNode) {\n    //     this.html[i].parentNode.removeChild(this.html[i]);\n    //   }\n    // }\n    // }\n    this.html = null;\n    this.trigger('destroy');\n    this.$privateStore.removeListeners();\n  };\n\n  /**\n   * @param {string} key\n   * @param {function} fn\n   */\n  Component.prototype.when = function when (key, fn) {\n    if (typeof this.$events[key] === 'undefined') { this.$events[key] = []; }\n    this.$events[key].push(fn);\n  };\n\n  /**\n   * @param {string} key\n   * @param {*} value\n   */\n  Component.prototype.trigger = function trigger (key, ...args) {\n    if (typeof this.on[key] === 'function') {\n      this.on[key].call(this, ...args);\n    }\n\n    if (typeof this.$events[key] !== 'undefined') {\n      for (var i in this.$events[key]) {\n        this.$events[key][i].call(this, ...args);\n      }\n    }\n  };\n\n  /**\n   * @param {object} newState\n   */\n  Component.prototype.setState = function setState (newState) {\n    if (typeof newState === 'object') {\n      var oldstate = this.state;\n\n      skipInProductionAndTest(() => oldstate = clone(this.state));\n\n      this.state = Object.assign(oldstate, newState);\n\n      skipInProductionAndTest(() => Object.freeze(this.state));\n\n      if (this.$config.listen) {\n        this.$privateStore.setState(newState);\n      }\n    }\n\n    if (!this.$config.listen && typeof this.view === 'function' && this.html) {\n      this.html = patch(this.html, this.view());\n    }\n\n    // if (typeof newState === 'object') {\n    // let oldstate = this.state;\n    //\n    // skipInProductionAndTest(() => oldstate = clone(this.state));\n    //\n    // this.state = Object.assign(oldstate, newState);\n    //\n    // skipInProductionAndTest(() => Object.freeze(this.state));\n    //\n    // if (this.$config.listen) {\n    //   this.$privateStore.setState(newState);\n    // }\n    // }\n    //\n    // if (!this.$config.listen && typeof this.view === 'function' && this.html) {\n    // fuseDom.fuse(this.html, this.view());\n    // }\n    this.trigger('update');\n\n    return newState;\n  };\n\n  /**\n   * @returns {boolean}\n   */\n  Component.isComponent = function isComponent () {\n    return true;\n  };\n\n  /**\n   * @param {*} value\n   * @returns {Boolean}\n   */\n  var isComponent = value => {\n    if (value) {\n      if (value.prototype instanceof Component) {\n        return true;\n      }\n\n      if (value.isComponent) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * @param {function} value\n   * @returns {object}\n   */\n  var filterNode = value => {\n\n    if (typeof value === 'string' || typeof value === 'number') {\n      return r('#text', value)\n    }\n\n    if (!value || typeof value === 'boolean') {\n      return r('#text', '')\n    }\n\n    if (value instanceof Listener) {\n      return r(value)\n    }\n\n    if (isComponent(value) || value instanceof Component) {\n      return r(value)\n    }\n\n    if (typeof value === 'function') {\n      return r(value)\n    }\n\n    if (value instanceof Promise || value.constructor.name === 'LazyPromise') {\n      return r(value)\n    }\n\n    return value;\n  };\n\n  // import Component from '../component/Component';\n\n  /**\n   * @param {*} query\n   * @param {object} props\n   * @param {...*} children\n   * @returns {object}\n   */\n  var r = (query, props, ...children) => {\n    if (query === 'await') {\n      var output = null;\n\n      if (props.src && props.src instanceof Promise) {\n        props.src.then(v => {\n          var nomalizedData = filterNode(\n            typeof props.transform === 'function'\n              ? props.transform(v)\n              : v\n          );\n\n          if (output) {\n            output = patch(output, nomalizedData, output.html[0].parentNode);\n          } else {\n            output = nomalizedData;\n          }\n        }).catch(error => {\n          var placerror = filterNode(\n            typeof props.error === 'function'\n              ? props.error(error)\n              : props.error\n          );\n\n          if (output) {\n            output = patch(output, placerror, output.html[0].parentNode);\n          } else {\n            output = placerror;\n          }\n        });\n      }\n\n      if (!output) {\n        output = filterNode(props.placeholder);\n      }\n\n      return output;\n    }\n\n    if (query === 'template') {\n      // return flatten([children]).map(filterNode);\n      return new Structure('section', props, flatten([children]).map(filterNode));\n    }\n\n    return new Structure(query, props, flatten([children]).map(filterNode));\n  };\n\n  /**\n   * The listen function is used for dynamically binding a component property\n   * to the DOM. Also commonly imported as 'l'.\n   * @param {Component} component\n   * @param {...string} path\n   * @returns {Listener}\n   */\n  var listen = (component, ...path) =>\n    new Listener(component, ...path);\n\n  var remountActiveComponents = () => {\n    Object.values(GLOBALS.ACTIVE_COMPONENTS).forEach(component => {\n      if (typeof component.onMount === 'function') {\n        component.onMount(component);\n      }\n    });\n  };\n\n  function createWorker(fn) {\n    var fire = () => {};\n\n    var blob = new Blob([`self.onmessage = function(e) {\n    self.postMessage((${fn.toString()})(e.data));\n  }`], { type: 'text/javascript' });\n\n    var url = window.URL.createObjectURL(blob);\n    var myWorker = new Worker(url);\n\n    myWorker.onmessage = e => { fire(e.data, null); };\n    myWorker.onerror = e => { fire(null, e.data); };\n\n    return arg => new Promise((resolve, reject) => {\n      fire = (data, err) => !err ? resolve(data) : reject(data);\n      myWorker.postMessage(arg);\n    })\n  }\n\n  // Descriptor for worker\n  function worker(target, key, descriptor) {\n    var act = descriptor.value;\n\n    var promisedWorker = createWorker(act);\n\n    descriptor.value = function (...args) {\n      promisedWorker(...args).then(newState => {\n        this.setState.call(this, newState);\n      });\n    };\n    return descriptor;\n  }\n\n  // Descriptor for actions\n  function action(target, key, descriptor) {\n    var act = descriptor.value;\n    descriptor.value = function (...args) {\n      return this.setState.call(this, act.call(this, ...args));\n    };\n    return descriptor;\n  }\n\n  // Descriptor for subscriptions\n  function subscribe(container, eventName, triggerMount) {\n    // TODO: Remove event after no longer needed / Currently overrides existing\n    // TODO: Do not override existing event - use EventListener\n    // TODO: triggerMount should trigger this event on mount too\n    return function (target, key, descriptor) {\n      var name = 'on' + (eventName || key);\n      var fn = function (...args) {\n        return descriptor.value.call(this, ...args);\n      };\n\n      container[name] = fn;\n      // if (container && container.addEventListener) {\n      //   container.addEventListener(name, fn);\n      //   self.when('destroy', () => {\n      //     container.removeEventListener(name, fn);\n      //   });\n      // }\n      // console.log(target, key, descriptor, container[name], name, fn, fn.radiGlobalEvent);\n      return descriptor;\n    }\n  }\n\n  var Radi = {\n    version: GLOBALS.VERSION,\n    activeComponents: GLOBALS.ACTIVE_COMPONENTS,\n    r,\n    listen,\n    l: listen,\n    worker,\n    component: Component,\n    Component,\n    action,\n    subscribe,\n    customAttribute: (attributeName, caller, ref) => {\n      if ( ref === void 0 ) ref = {};\n      var allowedTags = ref.allowedTags;\n      var addToElement = ref.addToElement;\n\n      GLOBALS.CUSTOM_ATTRIBUTES[attributeName] = {\n        name: attributeName,\n        caller,\n        allowedTags: allowedTags || null,\n        addToElement,\n      };\n    },\n    headless: (key, comp) => {\n      // TODO: Validate component and key\n      var name = '$'.concat(key);\n      var mountedComponent = new comp();\n      mountedComponent.mount();\n      Component.prototype[name] = mountedComponent;\n      return GLOBALS.HEADLESS_COMPONENTS[name] = mountedComponent;\n    },\n    update: patch,\n    patch,\n    mount,\n    freeze: () => {\n      GLOBALS.FROZEN_STATE = true;\n    },\n    unfreeze: () => {\n      GLOBALS.FROZEN_STATE = false;\n      remountActiveComponents();\n    },\n  };\n\n  // Radi.customAttribute('source', (element, value) => {\n  //   element.style.fontSize = value + 'px';\n  //   console.log('Sourced', element, value)\n  // }, {\n  //   allowedTags: ['li', 'ul'],\n  // })\n\n  // Pass Radi instance to plugins\n  Radi.plugin = (fn, ...args) => fn(Radi, ...args);\n\n  if (window) { window.Radi = Radi; }\n  // export default Radi;\n  module.exports = Radi;\n\n})));\n//# sourceMappingURL=radi.js.map\n","export const version = '0.3.5';\n\n// Pass routes to initiate things\nexport default ({\n    r,\n    l,\n    mount,\n    headless,\n    Component,\n  }, routes) => {\n  let current = {};\n\n  const COLON = ':'.charCodeAt(0);\n  const SLASH = '/'.charCodeAt(0);\n  var cr, crg, lr, ld;\n\n  const parseRoute = route => {\n    var parts = route.split('/'),\n      end = [],\n      p = [];\n    for (var i = 0; i < parts.length; i++) {\n      if (COLON === parts[i].charCodeAt(0)) {\n        end.push('([^/]+?)');\n        p.push(parts[i].substr(1));\n      } else if (parts[i] !== '') {\n        end.push(parts[i]);\n      }\n    }\n    return [new RegExp('^/' + end.join('/') + '(?:[/])?(?:[?&].*)?$', 'i'), p];\n  };\n\n  const parseAllRoutes = arr => {\n    var len = arr.length,\n      ret = new Array(len);\n    for (var i = len - 1; i >= 0; i--) {\n      ret[i] = parseRoute(arr[i]);\n    }\n    return ret;\n  };\n\n  const renderError = number => {\n    return current.config.errors[number]();\n  };\n\n  const writeUrl = url => {\n    window.location.hash = url;\n    return true;\n  };\n\n  const guard = (before, comp, active, last, resolve, reject, deep, _router) => {\n    return before.call(_router, active, last, act => {\n      if (typeof act === 'undefined' || act === true) {\n        if (typeof deep === 'function') {\n          return guard(deep, comp, active, last, resolve, reject, null, _router);\n        } else {\n          resolve(comp);\n        }\n      } else if (typeof act === 'string' && act.charCodeAt(0) === SLASH) {\n        writeUrl(act);\n        return reject();\n      } else {\n        resolve(renderError(403));\n      }\n\n      // Fire afterEach event in routes\n      if (current.after) current.after(active, last);\n    });\n  };\n\n  const extractChildren = routes => {\n    let children = routes;\n    for (let child in routes) {\n      if (routes.hasOwnProperty(child) && routes[child].children) {\n        let extracted = extractChildren(routes[child].children);\n        for (var nn in extracted) {\n          if (extracted.hasOwnProperty(nn)) {\n            children[child + nn] = extracted[nn];\n          }\n        }\n      }\n    }\n    return children;\n  };\n\n  const getRoute = curr => {\n    if (lr === curr) return ld;\n    if (!cr) cr = Object.keys(current.routes);\n    if (!crg) crg = parseAllRoutes(cr);\n    var cahnged = false;\n\n    for (var i = 0; i < crg.length; i++) {\n      if (crg[i][0].test(curr)) {\n        ld = new Route(curr, crg[i], current.routes, cr[i]);\n        cahnged = true;\n        break;\n      }\n    }\n\n    lr = curr;\n    return !cahnged ? { key: null } : ld;\n  };\n\n  class Route {\n    constructor(curr, match, routes, key) {\n      const query = curr\n        .split(/[\\?\\&]/)\n        .slice(1)\n        .map(query => query.split('='))\n        .reduce(\n          (acc, key) =>\n            Object.assign(acc, {\n              [key[0]]: key[1]\n            }),\n          {}\n        );\n      var m = curr.match(match[0]);\n      this.path = curr;\n      this.key = key;\n      this.query = query;\n      this.cmp = routes[key];\n      this.params = this.cmp.data || {};\n      for (var i = 0; i < match[1].length; i++) {\n        this.params[match[1][i]] = m[i + 1];\n      }\n    }\n  }\n\n  class RouterHead extends Component {\n    state() {\n      return {\n        location: window.location.hash.substr(1) || '/',\n        params: {},\n        query: {},\n        last: null,\n        active: null,\n        activeComponent: null\n      };\n    }\n\n    on() {\n      return {\n        mount() {\n          window.onhashchange = () => this.setState(this.hashChange());\n          this.setState(this.hashChange());\n        }\n      }\n    }\n\n    hashChange() {\n      var loc = window.location.hash.substr(1) || '/';\n      var a = getRoute(loc);\n\n      // console.log('[radi-router] Route change', a, this.state.location);\n\n      window.scrollTo(0, 0);\n\n      // this.resolve(this.inject(a.key || '', this.state.active))\n\n      this.trigger('changed', a.key || '', this.state.active);\n\n      return {\n        last: this.state.active,\n        location: loc,\n        params: a.params || {},\n        query: a.query || {},\n        active: a.key || '',\n      }\n    }\n\n  }\n\n  class Link extends Component {\n    state() {\n      return {\n        to: '/',\n        active: 'active',\n        core: false,\n        class: '',\n        id: null,\n        title: null,\n      };\n    }\n    view() {\n      return r(\n        'a',\n        {\n          href: l(this, 'to').process(url => '#'.concat(url)),\n          class: l(this, 'to').process(to =>\n            l(this.$router, 'active').process(active =>\n              l(this, 'class').process(cls => ([\n                (active === to || (this.state.core && new RegExp('^' + to).test(active)))\n                  && this.state.active,\n                cls\n              ]))\n            )\n          ),\n          id: l(this, 'id'),\n          title: l(this, 'title'),\n        },\n        ...this.children\n      );\n    }\n  }\n\n  class Router extends Component {\n\n    state() {\n      return {\n        active: null,\n      }\n    }\n\n    on() {\n      return {\n        mount() {\n          this.setState({active: this.$router.state.active});\n          this.$router.when('changed', (active, last) => {\n            this.setState({active});\n          });\n        }\n      }\n    }\n\n    view() {\n      // return [\n      //   l(this.$router, 'active').process(() => r('div', {}, this.inject(this.$router.state))),\n      //   ...this.children,\n      // ];\n      return [\n        l(this, 'active').process(comp => this.extractComponent(comp)),\n        this.children,\n      ]\n      // return r(\n      //   'template',\n      //   {},\n      //   l(this, 'active').process(comp => this.extractComponent(comp)),\n      //   this.children,\n      // );\n      // return [\n      //   l(this.$router, 'activeComponent').process(comp => comp),\n      //   this.children,\n      // ]\n      // return r(\n      //   'template',\n      //   {},\n      //   l(this.$router, 'activeComponent').process(comp => comp),\n      //   this.children,\n      // );\n    }\n\n    // Triggers when route is changed\n    extractComponent(active, last) {\n      // Route is not yet ready\n      // For the future, maybe show cached page or default screen\n      // or loading placeholder if time between this and next request\n      // is too long\n      if (active === null && typeof last === 'undefined') return;\n\n      // const { active, last } = this.state\n      const RouteComponent = current.routes[active];\n      const WillRender =\n        typeof RouteComponent === 'object'\n          ? RouteComponent.component\n          : RouteComponent;\n\n      // Route not found or predefined error\n      if (\n        (typeof WillRender === 'undefined' ||\n          typeof WillRender === 'number' ||\n          !WillRender) &&\n        typeof RouteComponent === 'undefined'\n      )\n        return renderError(WillRender || 404);\n\n      // Plain redirect\n      if (typeof RouteComponent.redirect === 'string')\n        return writeUrl(RouteComponent.redirect);\n\n      // Check if has any guards to check\n      const guards = [\n        current.before || null,\n        RouteComponent.before || null,\n      ].filter(guard => typeof guard === 'function');\n\n      if (guards.length > 0) {\n        const checkGuard = (resolve, reject) => {\n          return guards.pop().call(this, active, last, act => {\n            // Render\n            if (typeof act === 'undefined' || act === true) {\n              if (guards.length > 0) {\n                return checkGuard(resolve, reject);\n              } else {\n                return resolve(WillRender);\n              }\n            }\n\n            // Redirect\n            // if (typeof act === 'string' && act.charCodeAt(0) === SLASH) {\n            //   reject();\n            //   return writeUrl(act);\n            // }\n\n            // Restricted\n            return resolve(renderError(403));\n          });\n        };\n\n        return () => new Promise(checkGuard);\n      }\n\n      if (typeof WillRender === 'function') {\n        // Route is component\n        if (WillRender.isComponent && WillRender.isComponent())\n          return r(WillRender);\n\n        // Route is plain function\n        return WillRender;\n      }\n\n      // Route is plain text/object\n      return WillRender;\n    }\n  }\n\n  const before = routes.beforeEach;\n  const after = routes.afterEach;\n\n  current = {\n    config: {\n      errors: {\n        404: () => r('div', {}, 'Error 404: Not Found'),\n        403: () => r('div', {}, 'Error 403: Forbidden')\n      }\n    },\n    before,\n    after,\n    routes: extractChildren(routes.routes),\n    write: writeUrl,\n    Link,\n    Router\n  };\n\n  // Initiates router component\n  headless('router', RouterHead);\n\n  return current;\n};\n","// import logo from '../../assets/img/llwhite.png'\n// import logoColor from '../../assets/img/llcolor.png'\n\nexport default {\n  github: 'https://github.com/radi-js/radi',\n  slack: 'https://join.slack.com/t/radijs/shared_invite/enQtMjk3NTE2NjYxMTI2LWFmMTM5NTgwZDI5NmFlYzMzYmMxZjBhMGY0MGM2MzY5NmExY2Y0ODBjNDNmYjYxZWYxMjEyNjJhNjA5OTJjNzQ',\n  docs: '/docs',\n  repl: '/fiddle',\n  startingCode: `state: {\n  count: 0\n}\n\n@action change(diff) {\n  return {\n    count: this.state.count + diff\n  }\n}\n\n<template>\n  <h2>{ this.state.count }</h2>\n\n  <button\n    class=\"btn\"\n    disabled={ this.state.count <= 0 }\n    onclick={ () => -1 |> this.change }>\n    -\n  </button>\n\n  <button\n    class=\"btn\"\n    onclick={ () => 1 |> this.change }>\n    +\n  </button>\n</template>`,\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles)\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  var id = bundles[bundles.length - 1];\n\n  return Promise.all(bundles.slice(0, -1).map(loadBundle))\n    .then(function () {\n      return require(id);\n    });\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.modules[id] = [function (require, module) {\n            module.exports = resolved;\n          }, {}];\n        }\n\n        return resolved;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  return this.promise || (this.promise = new Promise(this.executor).then(onSuccess, onError));\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  return this.promise || (this.promise = new Promise(this.executor).catch(onError));\n};\n","import globals from './helpers/globals';\n// import docs from './helpers/docs';\n\nexport default {\n  routes: {\n    '/': {\n      component: () => import('./pages/Index.radi'),\n    },\n    [globals.repl]: {\n      component: () => import('./pages/Repl.radi'),\n      children: {\n        '/:code': {\n          component: () => import('./pages/Repl.radi'),\n        },\n      },\n    },\n    [globals.docs]: {\n      component: () => import('./pages/docs/Introduction.radi'),\n      // children: docs.list.reduce((acc, value) => {\n      //   return Object.assign(acc, {\n      //     [value.link]: {\n      //       component: () => import('./pages/docs/' + value.name + '.radi'),\n      //     },\n      //   });\n      // }, {}),\n      children: {\n        '/installation': {\n          component: () => import('./pages/docs/Installation.radi'),\n        },\n        '/hyperscript': {\n          component: () => import('./pages/docs/Hyperscript.radi'),\n        },\n        '/components': {\n          component: () => import('./pages/docs/Components.radi'),\n        },\n        '/state': {\n          component: () => import('./pages/docs/State.radi'),\n        },\n        '/actions': {\n          component: () => import('./pages/docs/Actions.radi'),\n        },\n        '/view': {\n          component: () => import('./pages/docs/View.radi'),\n        },\n        '/listener': {\n          component: () => import('./pages/docs/Listener.radi'),\n        },\n        '/events': {\n          component: () => import('./pages/docs/Events.radi'),\n        },\n        '/headless-components': {\n          component: () => import('./pages/docs/HeadlessComponents.radi'),\n        },\n        '/plugin': {\n          component: () => import('./pages/docs/Plugin.radi'),\n        },\n        '/mount': {\n          component: () => import('./pages/docs/Mount.radi'),\n        },\n      },\n    },\n  },\n  // beforeEach(to, from, next) {\n  //   if (to === '/restricted') {\n  //     next(false)\n  //   } else {\n  //     next()\n  //   }\n  // },\n  // afterEach(to, from) {\n  //   console.log('This triggers after every route change', to, from)\n  // },\n}\n","/** @jsx _radi.r **/\n  /** @radi-listen _radi_listen **/\n\n  import _radi from 'radi';\n  const action = _radi.action;\n  const subscribe = _radi.subscribe;\n  const worker = _radi.worker;\n  const _radi_listen = _radi.listen;\n\n  import RadiRouter from '../../radi-router'\nimport routes from './routes.js'\n\nconst { Router, Link } = _radi.plugin(RadiRouter, routes);\nwindow.Link = Link;\n\n{}\n\n  export default class App extends _radi.Component {\n    constructor(...args) {\n      super(...args);\n      this.state = {};\n      this.on = {};\n    }\n\n    \n\n    view() {\n        const component = this;\n        return [\n<Router></Router>];\n      }\n\n  };","import App from './app/App.radi';\nimport { r, mount } from 'radi';\n\nimport './assets/stylus/main.styl'\n\nwindow.loadJS = function(url, fn){\n  var scriptTag = document.createElement('script');\n  scriptTag.src = url;\n\n  scriptTag.onload = fn;\n  scriptTag.onreadystatechange = fn;\n\n  document.body.appendChild(scriptTag);\n};\n\n// var a = new App()\n\n// console.log(a, a.render())\n\n// var toDestroy = mount([\n//   r('div', { id: 'hell' },\n//     r(App),\n//     r('h1', { style: 'font-size: 20px;' }, 'Hello World 1'),\n//     r('h1', {}, 'Hello World 2'),\n//     r('button', {onclick: () => { console.log('lel') }}, 'Hello World 2'),\n//   )]\n// , app);\n\nvar toDestroy = mount(r(App)\n, app);\n\nif (module.hot) {\n  module.hot.accept();\n  module.hot.dispose(() => {\n    // Before restarting the app, we create a new root element and dispose the old one\n    if (toDestroy) {\n      for (var i = 0; i < toDestroy.length; i++) {\n        toDestroy[i].destroy();\n      }\n    }\n    var del = document.getElementById('app');\n    del.parentNode.replaceChild(del.cloneNode(false), del);\n  });\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.declare = declare;\n\nfunction declare(builder) {\n  return function (api, options, dirname) {\n    if (!api.assertVersion) {\n      api = Object.assign(copyApiObject(api), {\n        assertVersion: function assertVersion(range) {\n          throwVersionError(range, api.version);\n        }\n      });\n    }\n\n    return builder(api, options || {}, dirname);\n  };\n}\n\nfunction copyApiObject(api) {\n  var proto = null;\n\n  if (typeof api.version === \"string\" && /^7\\./.test(api.version)) {\n    proto = Object.getPrototypeOf(api);\n\n    if (proto && (!has(proto, \"version\") || !has(proto, \"transform\") || !has(proto, \"template\") || !has(proto, \"types\"))) {\n      proto = null;\n    }\n  }\n\n  return Object.assign({}, proto, api);\n}\n\nfunction has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nfunction throwVersionError(range, version) {\n  if (typeof range === \"number\") {\n    if (!Number.isInteger(range)) {\n      throw new Error(\"Expected string or integer value.\");\n    }\n\n    range = \"^\" + range + \".0.0-0\";\n  }\n\n  if (typeof range !== \"string\") {\n    throw new Error(\"Expected string or integer value.\");\n  }\n\n  var limit = Error.stackTraceLimit;\n\n  if (typeof limit === \"number\" && limit < 25) {\n    Error.stackTraceLimit = 25;\n  }\n\n  var err;\n\n  if (version.slice(0, 2) === \"7.\") {\n    err = new Error(\"Requires Babel \\\"^7.0.0-beta.41\\\", but was loaded with \\\"\" + version + \"\\\". \" + \"You'll need to update your @babel/core version.\");\n  } else {\n    err = new Error(\"Requires Babel \\\"\" + range + \"\\\", but was loaded with \\\"\" + version + \"\\\". \" + \"If you are sure you have a compatible version of @babel/core, \" + \"it is likely that something in your build process is loading the \" + \"wrong version. Inspect the stack trace of this error to look for \" + \"the first entry that doesn't mention \\\"@babel/core\\\" or \\\"babel-core\\\" \" + \"to see what is calling Babel.\");\n  }\n\n  if (typeof limit === \"number\") {\n    Error.stackTraceLimit = limit;\n  }\n\n  throw Object.assign(err, {\n    code: \"BABEL_VERSION_UNSUPPORTED\",\n    version: version,\n    range: range\n  });\n}","const { declare } = require(\"@babel/helper-plugin-utils\");\n\nmodule.exports = declare(({types: t}, options) => {\n\n  const PRAGMA_DEFAULT = options.pragma || 'l';\n  const LISTEN_ANNOTATION_REGEX = /\\*?\\s*@radi-listen\\s+([^\\s]+)/;\n\n  let pragma = PRAGMA_DEFAULT;\n\n  function listener() {\n    const expr = t.identifier(pragma);\n    expr.isClean = true;\n    return expr;\n  }\n\n  let args = [];\n\n  let variables = {\n    prefix: '_$',\n    count: 0,\n  }\n\n  const getvar = () => variables.prefix.concat(variables.count++);\n\n  const makeListener = (variable, expression) => {\n    let newVariable = variable.slice(1)\n    if (variable[0].process) {\n      return t.callExpression(\n        t.memberExpression(\n          t.callExpression(\n            listener(),\n            variable[0].props\n          ),\n          t.identifier('process')\n        ),\n        [\n          t.functionExpression(\n            null,\n            [variable[0].var],\n            t.blockStatement([\n              t.returnStatement(\n                newVariable.length > 0 ? makeListener(newVariable, expression) : expression\n              )\n            ])\n          )\n        ]\n      )\n    } else {\n      return t.callExpression(\n        listener(),\n        variable[0].props\n      )\n    }\n  }\n\n  Array.prototype.extract = function (path) {\n    if (!path || !path.node) return;\n    if (t.isIdentifier(path.node.property)) {\n      this.unshift(t.stringLiteral(path.node.property.name));\n    } else {\n      this.unshift(path.node.property);\n    }\n    if (t.isIdentifier(path.node.object)) {\n      this.unshift(path.node.object);\n    }\n  }\n\n  return {\n    visitor: {\n      Program(path) {\n        for (const comment of path.container.comments) {\n          const matches = LISTEN_ANNOTATION_REGEX.exec(comment.value);\n          if (matches) {\n            pragma = matches[1];\n          }\n        }\n      },\n      JSXExpressionContainer(path) {\n        if (!path) return;\n        path.traverse({\n          ThisExpression(thisPath) {\n            thisPath.replaceWith(t.identifier('component'));\n          }\n        });\n        // Handle object attribute like { style: { color: ... } }\n        if (t.isObjectExpression(path.node.expression) && t.isJSXAttribute(path.parent)) {\n\n          path.traverse({\n            ObjectProperty(path) {\n              // This isn't root member of Object\n              if (!t.isObjectExpression(path.parent)) return;\n              let gathered = [];\n              path.traverse({\n                MemberExpression(path) {\n                  // This isn't root member of Object\n                  if (t.isMemberExpression(path.parent)) return;\n\n                  const isRoot = t.isJSXExpressionContainer(path.parent);\n\n                  let extracted = [];\n\n                  extracted.extract(path);\n                  if (t.isMemberExpression(path.node.object)) {\n                    path.traverse({\n                      MemberExpression(path) {\n                        extracted.extract(path);\n                      },\n                      ThisExpression(path) {\n                        extracted.unshift(path.node);\n                      },\n                    });\n                  }\n\n                  // console.log('extracted', path.parentKey === callee);\n                  let fn = (t.isCallExpression(path.parent) && path.parentKey === 'callee') && extracted.pop();\n\n                  const DOLLAR = '$'.charCodeAt(0);\n\n                  if (extracted[0]\n                    && !t.isThisExpression(extracted[0])\n                    && extracted[0].name !== 'component') return;\n                  if (extracted[1] && extracted[1].value\n                    && extracted[1].value.charCodeAt(0) === DOLLAR) {\n                    extracted[0] = t.memberExpression(\n                      extracted[0],\n                      t.identifier(extracted[1].value),\n                    );\n                    extracted.splice(1, 1);\n                  }\n                  if (extracted[1] && extracted[1].name !== 'state') {\n                    extracted.splice(1, 1);\n                  }\n\n                  if (extracted.length < 2) return;\n\n                  // console.log('extracted', extracted);\n                  // console.log('extracted', extracted.map(item => item.value || item.name));\n\n                  // Should replace\n\n                  let newvar = t.identifier(getvar());\n\n                  if (t.isIdentifier(path.node.property)) {\n                    path.node.property = t.stringLiteral(path.node.property.name);\n                  }\n\n                  gathered.push({\n                    process: !(!fn && isRoot),\n                    var: newvar,\n                    props: extracted\n                  })\n\n                  path.replaceWith(t.expressionStatement(\n                    fn ? t.memberExpression(newvar, t.identifier(fn.value)) : newvar,\n                  ));\n                }\n              });\n\n              if (gathered.length > 0) {\n            \t  path.replaceWith(\n                  t.ObjectProperty(\n                    path.node.key,\n                    makeListener(gathered, path.node.value),\n                  )\n                );\n              }\n            }\n          });\n\n        } else {\n          let gathered = [];\n\n          path.traverse({\n            JSXExpressionContainer(path) {\n              path.skip();\n            },\n            MemberExpression(path) {\n              // This isn't root member of Object\n              if (t.isMemberExpression(path.parent)) return;\n\n              const isRoot = t.isJSXExpressionContainer(path.parent);\n\n              let extracted = [];\n\n              extracted.extract(path);\n              if (t.isMemberExpression(path.node.object)) {\n                path.traverse({\n                  MemberExpression(path) {\n                    extracted.extract(path);\n                  },\n                  ThisExpression(path) {\n                    extracted.unshift(path.node);\n                  },\n                });\n              }\n\n              // console.log('extracted', path.parentKey === callee);\n              let fn = (t.isCallExpression(path.parent) && path.parentKey === 'callee') && extracted.pop();\n\n              const DOLLAR = '$'.charCodeAt(0);\n\n              if (extracted[0]\n                && !t.isThisExpression(extracted[0])\n                && extracted[0].name !== 'component') return;\n              if (extracted[1] && extracted[1].value\n                && extracted[1].value.charCodeAt(0) === DOLLAR) {\n                extracted[0] = t.memberExpression(\n                  extracted[0],\n                  t.identifier(extracted[1].value),\n                );\n                extracted.splice(1, 1);\n              }\n              if (extracted[1] && extracted[1].name !== 'state') {\n                extracted.splice(1, 1);\n              }\n\n              if (extracted.length < 2) return;\n\n              // console.log('extracted', extracted);\n              // console.log('extracted', extracted.map(item => item.value || item.name));\n\n              // Should replace\n\n              let newvar = t.identifier(getvar());\n\n              if (t.isIdentifier(path.node.property)) {\n                path.node.property = t.stringLiteral(path.node.property.name);\n              }\n\n              gathered.push({\n                process: !(!fn && isRoot),\n                var: newvar,\n                props: extracted\n              })\n\n              path.replaceWith(t.expressionStatement(\n                fn ? t.memberExpression(newvar, t.identifier(fn.value)) : newvar,\n              ));\n            }\n          });\n\n          if (gathered.length > 0) {\n            if (t.isJSXAttribute(path.parent)) {\n          \t  path.replaceWith(\n                t.JSXExpressionContainer(\n                  makeListener(gathered, path.node.expression)\n                )\n              );\n            } else {\n          \t  path.replaceWith(\n                makeListener(gathered, path.node.expression)\n              );\n            }\n          }\n\n        }\n      }\n    }\n  }\n\n})\n","const FINDTOKENS = /__RTOKEN-([A-Za-z0-9-_]+):([0-9]+);/g;\n\nconst definitions = {\n  comment: {\n    regex: /((?:\\/\\*(?:[^*]|[\\r\\n]|(?:\\*+([^*\\/]|[\\r\\n])))*\\*+\\/)|(?:(^|[^\\:])\\/\\/.*))/,\n  },\n  state: {\n    regex: /(?:^|\\s)state(?:\\s|:|)+\\{/,\n    extract: [-1, '{', '}'],\n  },\n  on: {\n    regex: /(?:^|\\s)on(?:\\s|:|)+\\{/,\n    extract: [-1, '{', '}'],\n  },\n  node: {\n    // regex: /(?:{\\/\\*[^\\*]+?\\*\\/\\}|<([A-Za-z][A-Za-z0-9-_]*?)(?:\\/>|\\b[^>]*>([^<\\/]*?|[\\s\\S]+?)<\\/\\1>))/,\n    regex: /(?:{\\/\\*[^\\*]+?\\*\\/\\}|<([A-Za-z][A-Za-z0-9-_]*?)(?:\\/>|\\b[^>]*>(?:[^{]+({[\\s\\S]*[^}]+})[^<\\\\]+|([^<\\/]*?|[\\s\\S]+?))<\\/\\1>))/,\n    custom: input => input.replace(/this\\.state/g, 'component.state'),\n  },\n  method: {\n    // regex: /(?:(@[\\w]+|[\\w]+)*[^\\b])(\\w+)\\s*\\([^)]*\\)\\s*({(?:{[^{}]*(?:{[^{}]*}|[\\s\\S])*?[^{}]*}|[\\s\\S])*?})/,\n    regex: /(?:(?:@[\\w]+|[\\w]+)*[^\\b])(?:\\w+)\\s*\\([^)]*\\)\\s*\\{/,\n    extract: [-1, '{', '}'],\n    matchToo: true,\n    multiple: true,\n  },\n  // method: /(?:(@[\\w]+|[\\w]+)*[^\\b])(\\w+)\\s*\\([^)]*\\)\\s*({(?:{[^{}]*(?:{[^{}]*}|[\\s\\S])*?[^{}]*}|[\\s\\S])*?})/,\n  // function: /(\\w+)\\s*\\([^)]*\\)\\s*({(?:{[^{}]*(?:{[^{}]*}|[\\s\\S])*?[^{}]*}|[\\s\\S])*?})/,\n}\n\nlet savedTokens = {}\n\nconst template = ({\n    on,\n    state,\n    method,\n    node,\n  }, name, outside) => (`\n  /** @jsx Radi.r **/\n  /** @radi-listen Radi_listen **/\n\n  const action = Radi.action;\n  const subscribe = Radi.subscribe;\n  const Radi_listen = Radi.listen;\n\n  ${outside || ''}\n\n  class ${name || ''} extends Radi.Component {\n    constructor(...args) {\n      super(...args);\n      this.state = ${state || '{}'};\n      this.on = ${on || '{}'};\n    }\n\n    ${method ? method.join('\\n\\n') : ''}\n\n    ${node && (\n      `view() {\n        const component = this;\n        return [${node.join(', ')}];\n      }`\n    ) || ''}\n\n  }\n`).trim()\n\nconst remapCode = input => {\n  let output = input.replace(FINDTOKENS, (match, type, id) => {\n    return savedTokens[type][id].match\n  })\n  return output === input ? output : remapCode(output)\n}\n\nconst rebuild = (code, name) => {\n  let out = {}\n  let output = code.replace(FINDTOKENS, (match, type, id) => {\n    if (typeof out[type] === 'undefined') out[type] = []\n    out[type].push(\n      remapCode(savedTokens[type][id].match)\n    )\n    return ''\n  }).trim()\n\n  return template(out, name, output)\n}\n\nconst parse = (name, code, cb) => {\n\n  savedTokens = {}\n\n  const saveToken = (type, contents, match, input) => {\n    if (typeof savedTokens[type] === 'undefined') savedTokens[type] = []\n    if (typeof definitions[type].custom === 'function') {\n      match = definitions[type].custom(match);\n      input = definitions[type].custom(input);\n    }\n    let i = savedTokens[type].push({\n      type,\n      contents: contents,\n      match,\n      input,\n    });\n    return `__RTOKEN-${type}:${i-1};`;\n  }\n\n  const tokenize = (type, CODE) => {\n    let replaced = CODE.replace(definitions[type].regex, (match, ...contents) => {\n      let input = contents.splice(-1)[0]\n      let offset = contents.splice(-1)[0]\n      return saveToken(type, [...contents], match, input)\n    })\n    return replaced === CODE ? CODE : tokenize(type, replaced)\n  }\n\n  // Extracts classes and contents from code\n  const extract = (type, CODE) => {\n    const find = definitions[type].regex\n    const [\n      mod,\n      first,\n      last,\n    ] = definitions[type].extract\n\n    var L = first.charCodeAt(0)\n    var R = last.charCodeAt(0)\n\n    var match = CODE.match(find)\n    if (!match) return CODE\n    var indexState = match.index + (match[0]).length\n\n    var diff = 1\n    var endIndex = -1\n\n    for (var i = indexState; i <= CODE.length; i++) {\n      if (CODE.charCodeAt(i) === L) diff += 1\n      else if (CODE.charCodeAt(i) === R) diff -= 1\n\n      if (diff === 0) {\n        endIndex = i + 1\n        break;\n      }\n    }\n    if (endIndex < 0) {\n      throw(new Error('Cannot find end for ' + type + ' in \"' + name + '\": ' + match[0].replace(/\\n/g, '') + '...'))\n      return CODE\n    }\n\n    let out = CODE.substring(indexState + (definitions[type].matchToo ? -(match[0]).length : mod), endIndex)\n\n    let tokenID = saveToken(type, ['state'], out, out)\n\n    let input = CODE.substr(0, match.index).concat(tokenID).concat(CODE.substring(endIndex, CODE.length))\n\n    if (definitions[type].multiple && CODE.match(find)) {\n      input = extract(type, input)\n    }\n\n    return input\n  }\n\n  for (let type of Object.keys(definitions)) {\n    code = (typeof definitions[type].extract !== 'undefined')\n      ? extract(type, code)\n      : tokenize(type, code)\n  }\n\n  const parsed = rebuild(code, name)\n\n  if (typeof cb === 'function') cb(savedTokens, code, parsed);\n  return parsed\n}\n\nmodule.exports = parse\n","export default function search(x,y) {\n  var list = x.toLowerCase().replace(/  /g, ' ').replace(/[^a-zA-z\\d]+/g, ' ').trim().split(' ')\n  var y2 = y.toLowerCase()\n  var score = 0\n  var step = 100 / list.length / 2\n  for (var i = 0; i < list.length; i++) {\n    var strength = 2 - (2 / list.length * i)\n    if (y2.indexOf(list[i]) >= 0) score += step * strength\n    if ((new RegExp('(^|\\\\b)' + list[i] + '($|\\\\b)', 'g')).test(y2)) score += step * strength\n  }\n  return score\n}\n","import introduction from 'radi/docs/readme.md'\nimport installation from 'radi/docs/installation.md'\nimport hyperscript from 'radi/docs/hyperscript.md'\nimport components from 'radi/docs/components.md'\nimport state from 'radi/docs/state.md'\nimport actions from 'radi/docs/actions.md'\nimport view from 'radi/docs/view.md'\nimport listener from 'radi/docs/listener.md'\nimport events from 'radi/docs/events.md'\nimport headlessComponents from 'radi/docs/headless-components.md'\nimport plugin from 'radi/docs/plugin.md'\nimport mount from 'radi/docs/mount.md'\n\nexport default {\n  introduction,\n  installation,\n  hyperscript,\n  components,\n  state,\n  actions,\n  view,\n  listener,\n  events,\n  headlessComponents,\n  plugin,\n  mount\n}\n","import docs from './docs-bundle.js'\n\nexport default [\n  {\n    page: '/docs',\n    title: 'Introduction',\n    html: docs.introduction,\n    p: docs.introduction.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/installation',\n    title: 'Installation',\n    html: docs.installation,\n    p: docs.installation.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/hyperscript',\n    title: 'Hyperscript',\n    html: docs.hyperscript,\n    p: docs.hyperscript.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/components',\n    title: 'Components',\n    html: docs.components,\n    p: docs.components.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/state',\n    title: 'State',\n    html: docs.state,\n    p: docs.state.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/actions',\n    title: 'Actions',\n    html: docs.actions,\n    p: docs.actions.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/view',\n    title: 'View',\n    html: docs.view,\n    p: docs.view.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/listener',\n    title: 'Listener',\n    html: docs.listener,\n    p: docs.listener.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/events',\n    title: 'Events',\n    html: docs.events,\n    p: docs.events.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/headless-components',\n    title: 'Headless Components',\n    html: docs.headlessComponents,\n    p: docs.headlessComponents.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/plugin',\n    title: 'Plugin',\n    html: docs.plugin,\n    p: docs.plugin.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n  {\n    page: '/docs/mount',\n    title: 'Mount',\n    html: docs.mount,\n    p: docs.mount.replace(/<\\/?[^>]+(>|$)/g, '').split('. '),\n  },\n]\n","/** @jsx _radi.r **/\n  /** @radi-listen _radi_listen **/\n\n  import _radi from 'radi';\n  const action = _radi.action;\n  const subscribe = _radi.subscribe;\n  const worker = _radi.worker;\n  const _radi_listen = _radi.listen;\n\n  import globals from '../helpers/globals';\nimport logo from '../../assets/img/logo-l-white.png';\n\n  export default class Header extends _radi.Component {\n    constructor(...args) {\n      super(...args);\n      this.state = {\n  location: null,\n};\n      this.on = {};\n    }\n\n    \n\n    view() {\n        const component = this;\n        return [\n<header class={ component.state.location }>\n  <div class=\"wrapper\">\n    <div id=\"logo\">\n      <Link to=\"/\"><img src={ logo } alt=\"\"/></Link>\n    </div>\n    <ul id=\"main-menu\">\n      <li>\n        <Link to={ globals.docs } core={ true }>Docs</Link>\n      </li>\n      <li>\n        <Link to={ globals.repl }>Try online</Link>\n      </li>\n      <li>\n        <a href={ globals.slack } target=\"_blank\">Slack</a>\n      </li>\n      <li>\n        <a href={ globals.github } target=\"_blank\">GitHub</a>\n      </li>\n    </ul>\n  </div>\n</header>];\n      }\n\n  };","/** @jsx _radi.r **/\n  /** @radi-listen _radi_listen **/\n\n  import _radi from 'radi';\n  const action = _radi.action;\n  const subscribe = _radi.subscribe;\n  const worker = _radi.worker;\n  const _radi_listen = _radi.listen;\n\n  import 'github-markdown-css'\nimport '../../assets/stylus/docs.styl';\nimport globals from '../helpers/globals';\nimport search from '../helpers/search';\nimport searchTerms from '../helpers/docs';\nimport Header from '../components/Header';\n\n  export default class DocsLayout extends _radi.Component {\n    constructor(...args) {\n      super(...args);\n      this.state = {\n  searchOverlay: false,\n  search: '',\n  results: [],\n};\n      this.on = {\n  mount() {\n    document.onkeydown = e => this.trigger('keydown', e)\n  },\n  // @subscribe(document)\n  keydown(e) {\n    if ((e.metaKey === true || e.ctrlKey === true)\n      && e.keyCode === 70) {\n      e.preventDefault();\n      this.openSearch();\n      return false;\n    } else {\n      this.searchKey(e);\n    }\n  },\n};\n    }\n\n    \nsearchKey(e) {\n  if (e.keyCode === 27) {\n    this.closeSearch()\n  }\n}\n\n@action makeSearch(e) {\n  let phrase = e.target.value\n\n  if (phrase === '') {\n    // this.noresults = phrase !== '' && this.results.length <= 0\n    return { results: [] }\n  }\n\n  var treshold = 100\n  var res = []\n  for (var i = 0; i < searchTerms.length; i++) {\n    for (var n = 0; n < searchTerms[i].p.length; n++) {\n      var s = search(phrase, searchTerms[i].p[n])\n      if (s >= treshold)\n        res.push({\n          term: searchTerms[i].p[n],\n          score: s,\n          page: searchTerms[i].page,\n          title: searchTerms[i].title,\n        })\n    }\n  }\n\n  if (res.length <= 0) {\n    return { results: [] }\n  }\n\n  return { results: res }\n}\n\n@action closeSearch() {\n  return { searchOverlay: false }\n}\n\n@action openSearch() {\n  return { searchOverlay: true }\n}\n\n\naddHighlight(text) {\n  return text.replace(new RegExp(this.state.search.trim().replace(/  /g, ' ').split(' ').join('|'), 'ig'), (match) => (\n      // '{' + match + '}'\n      '<span class=\"mark\">' + match + '</span>'\n    ));\n}\n\n    view() {\n        const component = this;\n        return [\n<template>\n  <Header location=\"at-docs\" />\n  <div id=\"docs-menu\">\n    <div class=\"docs-logo\">\n      <Link to=\"/\"><img src={ require('../../assets/img/llcolor.png') } alt=\"\"/></Link>\n    </div>\n    <ul>\n      <li class=\"search-btn-wrap\">\n        <button onclick={ e => this.openSearch(e) } class=\"search-btn\">\n          <i class=\"material-icons\">&#xE8B6;</i>\n          Search docs\n        </button>\n      </li>\n      {/* <li>\n        <strong>\n          <i class=\"material-icons\">&#xE869;</i>\n          Getting started\n        </strong>\n      </li> */}\n      <li>\n        <Link to={ globals.docs }>Introduction</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/installation' }>Installation</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/hyperscript' }>Hyperscript</Link>\n      </li>\n      {/* <li>\n        <strong>\n          <i class=\"material-icons\">&#xE8EB;</i>\n          Components\n        </strong>\n      </li> */}\n      <li>\n        <Link to={ globals.docs + '/components' }>Components</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/state' }>State</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/actions' }>Actions</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/view' }>View</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/listener' }>Listener</Link>\n      </li>\n      {/* <li>\n        <strong>\n          <i class=\"material-icons\">&#xE8BF;</i>\n          Events\n        </strong>\n      </li> */}\n      <li>\n        <Link to={ globals.docs + '/events' }>Events</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/headless-components' }>Headless Components</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/plugin' }>Plugin</Link>\n      </li>\n      <li>\n        <Link to={ globals.docs + '/mount' }>Mount</Link>\n      </li>\n      <hr/>\n      <li>\n        <Link to={ globals.repl }>Try online</Link>\n      </li>\n      <li>\n        <a href={ globals.slack } target=\"_blank\">Slack</a>\n      </li>\n      <li>\n        <a href={ globals.github } target=\"_blank\">GitHub</a>\n      </li>\n    </ul>\n  </div>\n  <div class=\"docs-wrapper\">\n    { component.state.searchOverlay && (\n      <div class=\"docs-search-wrapper\">\n        <div class=\"docs-search-wrapper-bg\" onclick={ e => component.closeSearch() }></div>\n        <div class=\"wrapper\">\n          <input type=\"search\" autofocus=\"true\" onkeyup={ e => component.makeSearch(e) } onkeydown={ e => component.searchKey(e) } placeholder=\"Search..\" model={ component.state.search }/>\n          {/* <h2>Search results</h2> */}\n          {\n            component.state.results.length > 0\n              ? <ul class=\"search-results\">\n                  { component.state.results.map(result => (\n                        <li>\n                          <Link to={ result.page }>\n                            <strong>{ result.title }</strong>\n                            <span html={ component.addHighlight(result.term) }></span>\n                          </Link>\n                        </li>\n                      ))\n                  }\n                </ul>\n              : <div>No results</div>\n          }\n        </div>\n      </div>\n    ) }\n    {/* <div class=\"under-hero-repl\">\n      <MiniRepl code={ globals.startingCode } />\n    </div> */}\n    { this.children }\n    <footer>\n      <p>Edit this page on <a href=\"https://github.com/radi-js/radi/docs\" target=\"_blank\">Github</a></p>\n    </footer>\n  </div>\n</template>];\n      }\n\n  };"]}